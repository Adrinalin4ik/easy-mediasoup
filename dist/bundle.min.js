!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EasyMediasoup=e()}}(function(){return function e(t,r,n){function o(i,s){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),a=i(e("debug"));function i(e){return e&&e.__esModule?e:{default:e}}var s="mediasoup",u=function(){function e(t){(0,n.default)(this,e),t?(this._debug=(0,a.default)(s+":"+t),this._warn=(0,a.default)(s+":WARN:"+t),this._error=(0,a.default)(s+":ERROR:"+t)):(this._debug=(0,a.default)(s),this._warn=(0,a.default)(s+":WARN"),this._error=(0,a.default)(s+":ERROR")),this._debug.enabled=!1}return(0,o.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();r.default=u},{"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,debug:169}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=b(e("babel-runtime/core-js/get-iterator")),o=b(e("babel-runtime/helpers/extends")),a=b(e("babel-runtime/core-js/array/from")),i=b(e("babel-runtime/core-js/promise")),s=b(e("babel-runtime/core-js/map")),u=b(e("babel-runtime/helpers/classCallCheck")),c=b(e("babel-runtime/helpers/createClass")),l=b(e("protoo-client")),d=_(e("mediasoup-client")),f=b(e("./Logger")),p=e("./urlFactory"),h=_(e("./cookiesManager")),m=_(e("./redux/requestActions")),v=_(e("./redux/stateActions"));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}var y=new f.default("RoomClient"),g={requestTimeout:1e4,transportOptions:{tcp:!1}},w={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}}},k=function(){function e(t){var r=t.media_server_wss,n=t.roomId,o=t.peerName,a=t.displayName,i=t.device,c=t.useSimulcast,f=t.produce,h=t.dispatch,m=t.getState,v=t.turnservers;(0,u.default)(this,e),y.debug('constructor() [roomId:"%s", peerName:"%s", displayName:"%s", device:%s]',n,o,a,i.flag);var _=(0,p.getProtooUrl)(r,o,n),b=new l.default.WebSocketTransport(_);this._closed=!1,this._produce=f,this._useSimulcast=c,this._dispatch=h,this._getState=m,this._peerName=o,this._protoo=new l.default.Peer(b),g.turnServers=v,this._room=new d.Room(g),this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._webcams=new s.default,this._webcam={device:null,resolution:"hd"},this._join({displayName:a,device:i})}return(0,c.default)(e,[{key:"close",value:function(){var e=this;this._closed||(this._closed=!0,y.debug("close()"),this._room.leave(),setTimeout(function(){return e._protoo.close()},250),this._dispatch(v.setRoomState("closed")))}},{key:"changeDisplayName",value:function(e){var t=this;return y.debug('changeDisplayName() [displayName:"%s"]',e),h.setUser({displayName:e}),this._protoo.send("change-display-name",{displayName:e}).then(function(){t._dispatch(v.setDisplayName(e)),t._dispatch(m.notify({text:"Display name changed"}))}).catch(function(e){y.error("changeDisplayName() | failed: %o",e),t._dispatch(m.notify({type:"error",text:"Could not change display name: "+e})),t._dispatch(v.setDisplayName())})}},{key:"muteMic",value:function(){y.debug("muteMic()"),this._micProducer.pause()}},{key:"unmuteMic",value:function(){y.debug("unmuteMic()"),this._micProducer.resume()}},{key:"enableWebcam",value:function(){var e=this;return y.debug("enableWebcam()"),h.setDevices({webcamEnabled:!0}),this._dispatch(v.setWebcamInProgress(!0)),i.default.resolve().then(function(){return e._updateWebcams()}).then(function(){return e._setWebcamProducer()}).then(function(){e._dispatch(v.setWebcamInProgress(!1))}).catch(function(t){y.error("enableWebcam() | failed: %o",t),e._dispatch(v.setWebcamInProgress(!1))})}},{key:"disableWebcam",value:function(){var e=this;return y.debug("disableWebcam()"),h.setDevices({webcamEnabled:!1}),this._dispatch(v.setWebcamInProgress(!0)),i.default.resolve().then(function(){e._webcamProducer.close(),e._dispatch(v.setWebcamInProgress(!1))}).catch(function(t){y.error("disableWebcam() | failed: %o",t),e._dispatch(v.setWebcamInProgress(!1))})}},{key:"changeWebcam",value:function(){var e=this;return y.debug("changeWebcam()"),this._dispatch(v.setWebcamInProgress(!0)),i.default.resolve().then(function(){return e._updateWebcams()}).then(function(){var t=(0,a.default)(e._webcams.keys()),r=t.length,n=e._webcam.device?e._webcam.device.deviceId:void 0,o=t.indexOf(n);o<r-1?o++:o=0,e._webcam.device=e._webcams.get(t[o]),y.debug("changeWebcam() | new selected webcam [device:%o]",e._webcam.device),e._webcam.resolution="hd"}).then(function(){var t=e._webcam,r=t.device,n=t.resolution;if(!r)throw new Error("no webcam devices");return y.debug("changeWebcam() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia({video:(0,o.default)({deviceId:{exact:r.deviceId}},w[n])})}).then(function(t){var r=t.getVideoTracks()[0];return e._webcamProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(t){e._dispatch(v.setProducerTrack(e._webcamProducer.id,t)),e._dispatch(v.setWebcamInProgress(!1))}).catch(function(t){y.error("changeWebcam() failed: %o",t),e._dispatch(v.setWebcamInProgress(!1))})}},{key:"changeWebcamResolution",value:function(){var e=this;y.debug("changeWebcamResolution()");var t=void 0,r=void 0;return this._dispatch(v.setWebcamInProgress(!0)),i.default.resolve().then(function(){switch(t=e._webcam.resolution){case"qvga":r="vga";break;case"vga":r="hd";break;case"hd":r="qvga"}e._webcam.resolution=r}).then(function(){var t=e._webcam,r=t.device,n=t.resolution;return y.debug("changeWebcamResolution() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia({video:(0,o.default)({deviceId:{exact:r.deviceId}},w[n])})}).then(function(t){var r=t.getVideoTracks()[0];return e._webcamProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(t){e._dispatch(v.setProducerTrack(e._webcamProducer.id,t)),e._dispatch(v.setWebcamInProgress(!1))}).catch(function(r){y.error("changeWebcamResolution() failed: %o",r),e._dispatch(v.setWebcamInProgress(!1)),e._webcam.resolution=t})}},{key:"enableAudioOnly",value:function(){var e=this;return y.debug("enableAudioOnly()"),this._dispatch(v.setAudioOnlyInProgress(!0)),i.default.resolve().then(function(){e._webcamProducer&&e._webcamProducer.close();var t=!0,r=!1,o=void 0;try{for(var a,i=(0,n.default)(e._room.peers);!(t=(a=i.next()).done);t=!0){var s=a.value,u=!0,c=!1,l=void 0;try{for(var d,f=(0,n.default)(s.consumers);!(u=(d=f.next()).done);u=!0){var p=d.value;"video"===p.kind&&p.pause("audio-only-mode")}}catch(e){c=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw l}}}}catch(e){r=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw o}}e._dispatch(v.setAudioOnlyState(!0)),e._dispatch(v.setAudioOnlyInProgress(!1))}).catch(function(t){y.error("enableAudioOnly() failed: %o",t),e._dispatch(v.setAudioOnlyInProgress(!1))})}},{key:"disableAudioOnly",value:function(){var e=this;return y.debug("disableAudioOnly()"),this._dispatch(v.setAudioOnlyInProgress(!0)),i.default.resolve().then(function(){if(!e._webcamProducer&&e._room.canSend("video"))return e.enableWebcam()}).then(function(){var t=!0,r=!1,o=void 0;try{for(var a,i=(0,n.default)(e._room.peers);!(t=(a=i.next()).done);t=!0){var s=a.value,u=!0,c=!1,l=void 0;try{for(var d,f=(0,n.default)(s.consumers);!(u=(d=f.next()).done);u=!0){var p=d.value;"video"===p.kind&&p.supported&&p.resume()}}catch(e){c=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw l}}}}catch(e){r=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw o}}e._dispatch(v.setAudioOnlyState(!1)),e._dispatch(v.setAudioOnlyInProgress(!1))}).catch(function(t){y.error("disableAudioOnly() failed: %o",t),e._dispatch(v.setAudioOnlyInProgress(!1))})}},{key:"restartIce",value:function(){var e=this;return y.debug("restartIce()"),this._dispatch(v.setRestartIceInProgress(!0)),i.default.resolve().then(function(){e._room.restartIce(),setTimeout(function(){e._dispatch(v.setRestartIceInProgress(!1))},500)}).catch(function(t){y.error("restartIce() failed: %o",t),e._dispatch(v.setRestartIceInProgress(!1))})}},{key:"_join",value:function(e){var t=this,r=e.displayName,n=e.device;this._dispatch(v.setRoomState("connecting")),this._protoo.on("open",function(){y.debug('protoo Peer "open" event'),t._joinRoom({displayName:r,device:n})}),this._protoo.on("disconnected",function(){y.warn('protoo Peer "disconnected" event'),t._dispatch(m.notify({type:"error",text:"WebSocket disconnected"}));try{t._room.remoteClose({cause:"protoo disconnected"})}catch(e){}t._dispatch(v.setRoomState("connecting"))}),this._protoo.on("close",function(){t._closed||(y.warn('protoo Peer "close" event'),t.close())}),this._protoo.on("request",function(e,r,n){switch(y.debug("_handleProtooRequest() [method:%s, data:%o]",e.method,e.data),e.method){case"mediasoup-notification":r();var o=e.data;t._room.receiveNotification(o);break;case"active-speaker":r();var a=e.data.peerName;t._dispatch(v.setRoomActiveSpeaker(a));break;case"display-name-changed":r();var i=e.data,s=i.peerName,u=i.displayName,c=i.oldDisplayName,l=t._room.getPeerByName(s);if(!l){y.error("peer not found");break}l.appData.displayName=u,t._dispatch(v.setPeerDisplayName(u,s)),t._dispatch(m.notify({text:c+" is now "+u}));break;default:y.error('unknown protoo method "%s"',e.method),n(404,"unknown method")}})}},{key:"_joinRoom",value:function(e){var t=this,r=e.displayName,o=e.device;y.debug("_joinRoom()"),this._room.removeAllListeners(),this._room.on("close",function(e,r){if("remote"===e)return y.warn("mediasoup Peer/Room remotely closed [appData:%o]",r),void t._dispatch(v.setRoomState("closed"))}),this._room.on("request",function(e,r,n){y.debug("sending mediasoup request [method:%s]:%o",e.method,e),t._protoo.send("mediasoup-request",e).then(r).catch(n)}),this._room.on("notify",function(e){y.debug("sending mediasoup notification [method:%s]:%o",e.method,e),t._protoo.send("mediasoup-notification",e).catch(function(e){y.warn("could not send mediasoup notification:%o",e)})}),this._room.on("newpeer",function(e){y.debug('room "newpeer" event [name:"%s", peer:%o]',e.name,e),t._handlePeer(e)}),this._room.join(this._peerName,{displayName:r,device:o}).then(function(){t._sendTransport=t._room.createTransport("send",{media:"SEND_MIC_WEBCAM"}),t._sendTransport.on("close",function(e){y.debug('Transport "close" event [originator:%s]',e)}),t._recvTransport=t._room.createTransport("recv",{media:"RECV"}),t._recvTransport.on("close",function(e){y.debug('receiving Transport "close" event [originator:%s]',e)})}).then(function(){t._dispatch(v.setMediaCapabilities({canSendMic:t._room.canSend("audio"),canSendWebcam:t._room.canSend("video")}))}).then(function(){t._produce&&i.default.resolve().then(function(){t._room.canSend("audio")&&t._setMicProducer().catch(function(){})}).then(function(){if(t._room.canSend("video")){var e=h.getDevices();e&&!e.webcamEnabled||t.enableWebcam()}})}).then(function(){t._dispatch(v.setRoomState("connected")),t._dispatch(v.removeAllNotifications()),t._dispatch(m.notify({text:"You are in the room",timeout:5e3}));var e=t._room.peers,r=!0,o=!1,a=void 0;try{for(var i,s=(0,n.default)(e);!(r=(i=s.next()).done);r=!0){var u=i.value;t._handlePeer(u,{notify:!1})}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}).catch(function(e){y.error("_joinRoom() failed:%o",e),t._dispatch(m.notify({type:"error",text:"Could not join the room: "+e.toString()})),t.close()})}},{key:"_setMicProducer",value:function(){var e=this;if(!this._room.canSend("audio"))return i.default.reject(new Error("cannot send audio"));if(this._micProducer)return i.default.reject(new Error("mic Producer already exists"));var t=void 0;return i.default.resolve().then(function(){return y.debug("_setMicProducer() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia({audio:!0})}).then(function(r){var n=r.getAudioTracks()[0];return t=e._room.createProducer(n,null,{source:"mic"}),n.stop(),t.send(e._sendTransport)}).then(function(){e._micProducer=t,e._dispatch(v.addProducer({id:t.id,source:"mic",locallyPaused:t.locallyPaused,remotelyPaused:t.remotelyPaused,track:t.track,codec:t.rtpParameters.codecs[0].name})),t.on("close",function(r){y.debug('mic Producer "close" event [originator:%s]',r),e._micProducer=null,e._dispatch(v.removeProducer(t.id))}),t.on("pause",function(r){y.debug('mic Producer "pause" event [originator:%s]',r),e._dispatch(v.setProducerPaused(t.id,r))}),t.on("resume",function(r){y.debug('mic Producer "resume" event [originator:%s]',r),e._dispatch(v.setProducerResumed(t.id,r))}),t.on("handled",function(){y.debug('mic Producer "handled" event')}),t.on("unhandled",function(){y.debug('mic Producer "unhandled" event')})}).then(function(){y.debug("_setMicProducer() succeeded")}).catch(function(r){throw y.error("_setMicProducer() failed:%o",r),e._dispatch(m.notify({text:"Mic producer failed: "+r.name+":"+r.message})),t&&t.close(),r})}},{key:"_setWebcamProducer",value:function(){var e=this;if(!this._room.canSend("video"))return i.default.reject(new Error("cannot send video"));if(this._webcamProducer)return i.default.reject(new Error("webcam Producer already exists"));var t=void 0;return i.default.resolve().then(function(){var t=e._webcam,r=t.device,n=t.resolution;if(!r)throw new Error("no webcam devices");return y.debug("_setWebcamProducer() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia({video:(0,o.default)({deviceId:{exact:r.deviceId}},w[n])})}).then(function(r){var n=r.getVideoTracks()[0];return t=e._room.createProducer(n,{simulcast:e._useSimulcast},{source:"webcam"}),n.stop(),t.send(e._sendTransport)}).then(function(){e._webcamProducer=t;var r=e._webcam.device;e._dispatch(v.addProducer({id:t.id,source:"webcam",deviceLabel:r.label,type:e._getWebcamType(r),locallyPaused:t.locallyPaused,remotelyPaused:t.remotelyPaused,track:t.track,codec:t.rtpParameters.codecs[0].name})),t.on("close",function(r){y.debug('webcam Producer "close" event [originator:%s]',r),e._webcamProducer=null,e._dispatch(v.removeProducer(t.id))}),t.on("pause",function(r){y.debug('webcam Producer "pause" event [originator:%s]',r),e._dispatch(v.setProducerPaused(t.id,r))}),t.on("resume",function(r){y.debug('webcam Producer "resume" event [originator:%s]',r),e._dispatch(v.setProducerResumed(t.id,r))}),t.on("handled",function(){y.debug('webcam Producer "handled" event')}),t.on("unhandled",function(){y.debug('webcam Producer "unhandled" event')})}).then(function(){y.debug("_setWebcamProducer() succeeded")}).catch(function(r){throw y.error("_setWebcamProducer() failed:%o",r),e._dispatch(m.notify({text:"Webcam producer failed: "+r.name+":"+r.message})),t&&t.close(),r})}},{key:"_updateWebcams",value:function(){var e=this;return y.debug("_updateWebcams()"),this._webcams=new s.default,i.default.resolve().then(function(){return y.debug("_updateWebcams() | calling enumerateDevices()"),navigator.mediaDevices.enumerateDevices()}).then(function(t){var r=!0,o=!1,a=void 0;try{for(var i,s=(0,n.default)(t);!(r=(i=s.next()).done);r=!0){var u=i.value;"videoinput"===u.kind&&e._webcams.set(u.deviceId,u)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}).then(function(){var t=(0,a.default)(e._webcams.values()),r=t.length,n=e._webcam.device?e._webcam.device.deviceId:void 0;y.debug("_updateWebcams() [webcams:%o]",t),0===r?e._webcam.device=null:e._webcams.has(n)||(e._webcam.device=t[0]),e._dispatch(v.setCanChangeWebcam(e._webcams.size>=2))})}},{key:"_getWebcamType",value:function(e){return/(back|rear)/i.test(e.label)?(y.debug("_getWebcamType() | it seems to be a back camera"),"back"):(y.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_handlePeer",value:function(e){var t=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).notify,o=void 0===r||r,a=e.appData.displayName;this._dispatch(v.addPeer({name:e.name,displayName:a,device:e.appData.device,consumers:[]})),o&&this._dispatch(m.notify({text:a+" joined the room"}));var i=!0,s=!1,u=void 0;try{for(var c,l=(0,n.default)(e.consumers);!(i=(c=l.next()).done);i=!0){var d=c.value;this._handleConsumer(d)}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}e.on("close",function(r){y.debug('peer "close" event [name:"%s", originator:%s]',e.name,r),t._dispatch(v.removePeer(e.name)),t._room.joined&&t._dispatch(m.notify({text:e.appData.displayName+" left the room"}))}),e.on("newconsumer",function(r){y.debug('peer "newconsumer" event [name:"%s", id:%s, consumer:%o]',e.name,r.id,r),t._handleConsumer(r)})}},{key:"_handleConsumer",value:function(e){var t=this,r=e.rtpParameters.codecs[0];this._dispatch(v.addConsumer({id:e.id,peerName:e.peer.name,source:e.appData.source,supported:e.supported,locallyPaused:e.locallyPaused,remotelyPaused:e.remotelyPaused,track:null,codec:r?r.name:null},e.peer.name)),e.on("close",function(r){y.debug('consumer "close" event [id:%s, originator:%s, consumer:%o]',e.id,r,e),t._dispatch(v.removeConsumer(e.id,e.peer.name))}),e.on("pause",function(r){y.debug('consumer "pause" event [id:%s, originator:%s, consumer:%o]',e.id,r,e),t._dispatch(v.setConsumerPaused(e.id,r))}),e.on("resume",function(r){y.debug('consumer "resume" event [id:%s, originator:%s, consumer:%o]',e.id,r,e),t._dispatch(v.setConsumerResumed(e.id,r))}),e.on("effectiveprofilechange",function(r){y.debug('consumer "effectiveprofilechange" event [id:%s, consumer:%o, profile:%s]',e.id,e,r),t._dispatch(v.setConsumerEffectiveProfile(e.id,r))}),e.supported&&("video"===e.kind&&this._getState().me.audioOnly&&e.pause("audio-only-mode"),e.receive(this._recvTransport).then(function(r){t._dispatch(v.setConsumerTrack(e.id,r))}).catch(function(e){y.error("unexpected error while receiving a new Consumer:%o",e)}))}}]),e}();r.default=k},{"./Logger":1,"./cookiesManager":3,"./redux/requestActions":12,"./redux/stateActions":14,"./urlFactory":15,"babel-runtime/core-js/array/from":17,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/map":21,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/extends":35,"mediasoup-client":204,"protoo-client":213}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUser=function(){return a.default.getJSON(i)},r.setUser=function(e){var t=e.displayName;a.default.set(i,{displayName:t})},r.getDevices=function(){return a.default.getJSON(s)},r.setDevices=function(e){var t=e.webcamEnabled;a.default.set(s,{webcamEnabled:t})};var n,o=e("js-cookie"),a=(n=o,n&&n.__esModule?n:{default:n});var i="mediasoup-demo.user",s="mediasoup-demo.devices"},{"js-cookie":172}],4:[function(e,t,r){(function(t,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Init=void 0;var o=g(e("babel-runtime/core-js/object/keys")),a=g(e("babel-runtime/core-js/get-iterator")),i=g(e("babel-runtime/helpers/classCallCheck")),s=g(e("url-parse")),u=e("redux"),c=g(e("redux-thunk")),l=e("redux-logger"),d=e("mediasoup-client"),f=g(e("./Logger")),p=(y(e("./utils")),y(e("./cookiesManager"))),h=y(e("./redux/requestActions")),m=y(e("./redux/stateActions")),v=g(e("./redux/reducers")),_=g(e("./redux/roomClientMiddleware")),b=(y(e("lodash")),y(e("wildemitter")));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}r.Init=function e(r){var y=this;(0,i.default)(this,e),n.emitter=this.emitter=new b.default,this.roomClientMiddleware=_.default;new f.default;this.emitter.on("joinRoom",function(e){y.client=e});var g=[c.default,_.default];if("development"===t.env.NODE_ENV){var w=(0,l.createLogger)({duration:!0,timestamp:!1,level:"log",logErrors:!0});g.push(w)}var k=this.store=(0,u.createStore)(v.default,void 0,u.applyMiddleware.apply(void 0,g)),P=r.peerName||randomString({length:8}).toLowerCase(),j=(new s.default(window.location.href,!0),r.roomId),x="false"!==r.produce,C=r.displayName,E="true"===r.sipEndpoint,S="false"!==r.simulcast,R=r.media_server_wss,T=r.turnservers||[],O=new s.default(window.location.href,!0),I=!0,A=!1,M=void 0;try{for(var N,D=(0,a.default)((0,o.default)(O.query));!(I=(N=D.next()).done);I=!0){var L=N.value;switch(L){case"roomId":case"simulcast":break;default:delete O.query[L]}}}catch(e){A=!0,M=e}finally{try{!I&&D.return&&D.return()}finally{if(A)throw M}}delete O.hash;var F=O.toString(),U=p.getUser()||{},W=void 0;C||(C=U.displayName),C?W=!0:(C="",W=!1);var B=(0,d.getDeviceInfo)();E&&(B.flag="sipendpoint",B.name="SIP Endpoint",B.version=void 0),k.dispatch(m.setRoomUrl(F)),k.dispatch(m.setMe({peerName:P,displayName:C,displayNameSet:W,device:B})),k.dispatch(h.joinRoom({media_server_wss:R,roomId:j,peerName:P,displayName:C,device:B,useSimulcast:S,produce:x,turnservers:T}))}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Logger":1,"./cookiesManager":3,"./redux/reducers":6,"./redux/requestActions":12,"./redux/roomClientMiddleware":13,"./redux/stateActions":14,"./utils":16,_process:210,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/object/keys":26,"babel-runtime/helpers/classCallCheck":32,lodash:183,"mediasoup-client":204,redux:228,"redux-logger":221,"redux-thunk":222,"url-parse":241,wildemitter:245}],5:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=a(e("babel-runtime/helpers/defineProperty")),o=a(e("babel-runtime/helpers/extends"));function a(e){return e&&e.__esModule?e:{default:e}}var i={};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments[1];switch(r.type){case"ADD_CONSUMER":var a=r.payload.consumer;return t.emitter.emit("ADD_CONSUMER",r.payload),(0,o.default)({},e,(0,n.default)({},a.id,a));case"REMOVE_CONSUMER":var s=r.payload.consumerId,u=(0,o.default)({},e);return delete u[s],t.emitter.emit("REMOVE_CONSUMER",r.payload),u;case"SET_CONSUMER_PAUSED":var c=r.payload,l=c.consumerId,d=c.originator,f=e[l],p=void 0;return p="local"===d?(0,o.default)({},f,{locallyPaused:!0}):(0,o.default)({},f,{remotelyPaused:!0}),t.emitter.emit("SET_CONSUMER_PAUSED",r.payload),(0,o.default)({},e,(0,n.default)({},l,p));case"SET_CONSUMER_RESUMED":var h=r.payload,m=h.consumerId,v=h.originator,_=e[m],b=void 0;return b="local"===v?(0,o.default)({},_,{locallyPaused:!1}):(0,o.default)({},_,{remotelyPaused:!1}),t.emitter.emit("SET_CONSUMER_RESUMED",r.payload),(0,o.default)({},e,(0,n.default)({},m,b));case"SET_CONSUMER_EFFECTIVE_PROFILE":var y=r.payload,g=y.consumerId,w=y.profile,k=e[g],P=(0,o.default)({},k,{profile:w});return t.emitter.emit("SET_CONSUMER_EFFECTIVE_PROFILE",P),(0,o.default)({},e,(0,n.default)({},g,P));case"SET_CONSUMER_TRACK":var j=r.payload,x=j.consumerId,C=j.track,E=e[x],S=(0,o.default)({},E,{track:C});return t.emitter.emit("SET_CONSUMER_TRACK",S),(0,o.default)({},e,(0,n.default)({},x,S));default:return e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/defineProperty":34,"babel-runtime/helpers/extends":35}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("redux"),o=l(e("./room")),a=l(e("./me")),i=l(e("./producers")),s=l(e("./peers")),u=l(e("./consumers")),c=l(e("./notifications"));function l(e){return e&&e.__esModule?e:{default:e}}var d=(0,n.combineReducers)({room:o.default,me:a.default,producers:i.default,peers:s.default,consumers:u.default,notifications:c.default});r.default=d},{"./consumers":5,"./me":7,"./notifications":8,"./peers":9,"./producers":10,"./room":11,redux:228}],7:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("babel-runtime/helpers/extends"),a=(n=o,n&&n.__esModule?n:{default:n});var i={name:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,restartIceInProgress:!1};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments[1];switch(r.type){case"SET_ME":var n=r.payload,o=n.peerName,s=n.displayName,u=n.displayNameSet,c=n.device;return t.emitter.emit("SET_ME",r.payload),(0,a.default)({},e,{name:o,displayName:s,displayNameSet:u,device:c});case"SET_MEDIA_CAPABILITIES":var l=r.payload,d=l.canSendMic,f=l.canSendWebcam;return(0,a.default)({},e,{canSendMic:d,canSendWebcam:f});case"SET_CAN_CHANGE_WEBCAM":var p=r.payload;return t.emitter.emit("SET_CAN_CHANGE_WEBCAM",r.payload),(0,a.default)({},e,{canChangeWebcam:p});case"SET_WEBCAM_IN_PROGRESS":var h=r.payload.flag;return t.emitter.emit("SET_WEBCAM_IN_PROGRESS",r.payload),(0,a.default)({},e,{webcamInProgress:h});case"SET_DISPLAY_NAME":var m=r.payload.displayName;return m||(m=e.displayName),(0,a.default)({},e,{displayName:m,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var v=r.payload.enabled;return(0,a.default)({},e,{audioOnly:v});case"SET_AUDIO_ONLY_IN_PROGRESS":var _=r.payload.flag;return(0,a.default)({},e,{audioOnlyInProgress:_});case"SET_RESTART_ICE_IN_PROGRESS":var b=r.payload.flag;return(0,a.default)({},e,{restartIceInProgress:b});default:return e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/extends":35}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("babel-runtime/helpers/toConsumableArray"),a=(n=o,n&&n.__esModule?n:{default:n});var i=[];r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"ADD_NOTIFICATION":var r=t.payload.notification;return[].concat((0,a.default)(e),[r]);case"REMOVE_NOTIFICATION":var n=t.payload.notificationId;return e.filter(function(e){return e.id!==n});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return e}}},{"babel-runtime/helpers/toConsumableArray":39}],9:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/helpers/toConsumableArray")),o=i(e("babel-runtime/helpers/defineProperty")),a=i(e("babel-runtime/helpers/extends"));function i(e){return e&&e.__esModule?e:{default:e}}var s={};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,r=arguments[1];switch(r.type){case"ADD_PEER":var i=r.payload.peer;return t.emitter.emit("peerAdded",i),(0,a.default)({},e,(0,o.default)({},i.name,i));case"REMOVE_PEER":var u=r.payload.peerName,c=(0,a.default)({},e);return delete c[u],t.emitter.emit("peerRemoved",u),c;case"SET_PEER_DISPLAY_NAME":var l=r.payload,d=l.displayName,f=e[l.peerName];if(!f)throw new Error("no Peer found");var p=(0,a.default)({},f,{displayName:d});return(0,a.default)({},e,(0,o.default)({},p.name,p));case"ADD_CONSUMER":var h=r.payload,m=h.consumer,v=e[h.peerName];if(!v)throw new Error("no Peer found for new Consumer");var _=[].concat((0,n.default)(v.consumers),[m.id]),b=(0,a.default)({},v,{consumers:_});return t.emitter.emit("peerConsumerAdded",b),(0,a.default)({},e,(0,o.default)({},b.name,b));case"REMOVE_CONSUMER":var y=r.payload,g=y.consumerId,w=e[y.peerName];if(!w)return e;var k=w.consumers.indexOf(g);if(-1===k)throw new Error("Consumer not found");var P=w.consumers.slice();P.splice(k,1);var j=(0,a.default)({},w,{consumers:P});return t.emitter.emit("peerConsumerRemoved",j),(0,a.default)({},e,(0,o.default)({},j.name,j));default:return e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/defineProperty":34,"babel-runtime/helpers/extends":35,"babel-runtime/helpers/toConsumableArray":39}],10:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=a(e("babel-runtime/helpers/defineProperty")),o=a(e("babel-runtime/helpers/extends"));function a(e){return e&&e.__esModule?e:{default:e}}var i={};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments[1];switch(r.type){case"ADD_PRODUCER":var a=r.payload.producer;return t.emitter.emit("ADD_PRODUCER",a),(0,o.default)({},e,(0,n.default)({},a.id,a));case"REMOVE_PRODUCER":var s=r.payload.producerId,u=(0,o.default)({},e);return delete u[s],t.emitter.emit("REMOVE_PRODUCER",producer),u;case"SET_PRODUCER_PAUSED":var c=r.payload,l=c.producerId,d=c.originator,f=e[l],p=void 0;return p="local"===d?(0,o.default)({},f,{locallyPaused:!0}):(0,o.default)({},f,{remotelyPaused:!0}),t.emitter.emit("SET_PRODUCER_PAUSED",p),(0,o.default)({},e,(0,n.default)({},l,p));case"SET_PRODUCER_RESUMED":var h=r.payload,m=h.producerId,v=h.originator,_=e[m],b=void 0;return b="local"===v?(0,o.default)({},_,{locallyPaused:!1}):(0,o.default)({},_,{remotelyPaused:!1}),t.emitter.emit("SET_PRODUCER_RESUMED",b),(0,o.default)({},e,(0,n.default)({},m,b));case"SET_PRODUCER_TRACK":var y=r.payload,g=y.producerId,w=y.track,k=e[g],P=(0,o.default)({},k,{track:w});return t.emitter.emit("SET_PRODUCER_TRACK",P),(0,o.default)({},e,(0,n.default)({},g,P));default:return e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/defineProperty":34,"babel-runtime/helpers/extends":35}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("babel-runtime/helpers/extends"),a=(n=o,n&&n.__esModule?n:{default:n});var i={url:null,state:"new",activeSpeakerName:null};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"SET_ROOM_URL":var r=t.payload.url;return(0,a.default)({},e,{url:r});case"SET_ROOM_STATE":var n=t.payload.state;return"connected"==n?(0,a.default)({},e,{state:n}):(0,a.default)({},e,{state:n,activeSpeakerName:null});case"SET_ROOM_ACTIVE_SPEAKER":var o=t.payload.peerName;return(0,a.default)({},e,{activeSpeakerName:o});default:return e}}},{"babel-runtime/helpers/extends":35}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.notify=r.restartIce=r.disableAudioOnly=r.enableAudioOnly=r.changeWebcam=r.disableWebcam=r.enableWebcam=r.unmuteMic=r.muteMic=r.changeDisplayName=r.leaveRoom=r.joinRoom=void 0;var n,o=e("random-string"),a=(n=o,n&&n.__esModule?n:{default:n}),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./stateActions"));r.joinRoom=function(e){return{type:"JOIN_ROOM",payload:{media_server_wss:e.media_server_wss,roomId:e.roomId,peerName:e.peerName,displayName:e.displayName,device:e.device,useSimulcast:e.useSimulcast,produce:e.produce,turnservers:e.turnservers}}},r.leaveRoom=function(){return{type:"LEAVE_ROOM"}},r.changeDisplayName=function(e){return{type:"CHANGE_DISPLAY_NAME",payload:{displayName:e}}},r.muteMic=function(){return{type:"MUTE_MIC"}},r.unmuteMic=function(){return{type:"UNMUTE_MIC"}},r.enableWebcam=function(){return{type:"ENABLE_WEBCAM"}},r.disableWebcam=function(){return{type:"DISABLE_WEBCAM"}},r.changeWebcam=function(){return{type:"CHANGE_WEBCAM"}},r.enableAudioOnly=function(){return{type:"ENABLE_AUDIO_ONLY"}},r.disableAudioOnly=function(){return{type:"DISABLE_AUDIO_ONLY"}},r.restartIce=function(){return{type:"RESTART_ICE"}},r.notify=function(e){var t=e.type,r=void 0===t?"info":t,n=e.text,o=e.timeout;if(!o)switch(r){case"info":o=3e3;break;case"error":o=5e3}var s={id:(0,a.default)({length:6}).toLowerCase(),type:r,text:n,timeout:o};return function(e){e(i.addNotification(s)),setTimeout(function(){e(i.removeNotification(s.id))},o)}}},{"./stateActions":14,"random-string":220}],13:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("../RoomClient"),a=(n=o,n&&n.__esModule?n:{default:n});r.default=function(e){var r=e.dispatch,n=e.getState;return function(e){var o=void 0;return function(i){switch(i.type){case"JOIN_ROOM":var s=i.payload,u=s.media_server_wss,c=s.roomId,l=s.peerName,d=s.displayName,f=s.device,p=s.useSimulcast,h=s.produce,m=s.turnservers;o=new a.default({media_server_wss:u,roomId:c,peerName:l,displayName:d,device:f,useSimulcast:p,produce:h,dispatch:r,getState:n,turnservers:m}),t.CLIENT=o,t.emitter.emit("joinRoom",o);break;case"LEAVE_ROOM":o.close(),t.emitter.emit("leaveRoom",o);break;case"CHANGE_DISPLAY_NAME":var v=i.payload.displayName;o.changeDisplayName(v),t.emitter.emit("changeDisplayName",o);break;case"MUTE_MIC":o.muteMic(),t.emitter.emit("muteMic",o);break;case"UNMUTE_MIC":o.unmuteMic(),t.emitter.emit("unmuteMic",o);break;case"ENABLE_WEBCAM":o.enableWebcam(),t.emitter.emit("enableWebcam",o);break;case"DISABLE_WEBCAM":o.disableWebcam(),t.emitter.emit("disableWebcam",o);break;case"CHANGE_WEBCAM":o.changeWebcam(),t.emitter.emit("changeWebcam",o);break;case"ENABLE_AUDIO_ONLY":o.enableAudioOnly(),t.emitter.emit("enableAudioOnly",o);break;case"DISABLE_AUDIO_ONLY":o.disableAudioOnly(),t.emitter.emit("disableAudioOnly",o);break;case"RESTART_ICE":o.restartIce(),t.emitter.emit("restartIce",o)}return e(i)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../RoomClient":2}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.setRoomUrl=function(e){return{type:"SET_ROOM_URL",payload:{url:e}}},r.setRoomState=function(e){return{type:"SET_ROOM_STATE",payload:{state:e}}},r.setRoomActiveSpeaker=function(e){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerName:e}}},r.setMe=function(e){return{type:"SET_ME",payload:{peerName:e.peerName,displayName:e.displayName,displayNameSet:e.displayNameSet,device:e.device}}},r.setMediaCapabilities=function(e){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:e.canSendMic,canSendWebcam:e.canSendWebcam}}},r.setCanChangeWebcam=function(e){return{type:"SET_CAN_CHANGE_WEBCAM",payload:e}},r.setDisplayName=function(e){return{type:"SET_DISPLAY_NAME",payload:{displayName:e}}},r.setAudioOnlyState=function(e){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:e}}},r.setAudioOnlyInProgress=function(e){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:e}}},r.setRestartIceInProgress=function(e){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:e}}},r.addProducer=function(e){return{type:"ADD_PRODUCER",payload:{producer:e}}},r.removeProducer=function(e){return{type:"REMOVE_PRODUCER",payload:{producerId:e}}},r.setProducerPaused=function(e,t){return{type:"SET_PRODUCER_PAUSED",payload:{producerId:e,originator:t}}},r.setProducerResumed=function(e,t){return{type:"SET_PRODUCER_RESUMED",payload:{producerId:e,originator:t}}},r.setProducerTrack=function(e,t){return{type:"SET_PRODUCER_TRACK",payload:{producerId:e,track:t}}},r.setWebcamInProgress=function(e){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:e}}},r.addPeer=function(e){return{type:"ADD_PEER",payload:{peer:e}}},r.removePeer=function(e){return{type:"REMOVE_PEER",payload:{peerName:e}}},r.setPeerDisplayName=function(e,t){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:e,peerName:t}}},r.addConsumer=function(e,t){return{type:"ADD_CONSUMER",payload:{consumer:e,peerName:t}}},r.removeConsumer=function(e,t){return{type:"REMOVE_CONSUMER",payload:{consumerId:e,peerName:t}}},r.setConsumerPaused=function(e,t){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:e,originator:t}}},r.setConsumerResumed=function(e,t){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:e,originator:t}}},r.setConsumerEffectiveProfile=function(e,t){return{type:"SET_CONSUMER_EFFECTIVE_PROFILE",payload:{consumerId:e,profile:t}}},r.setConsumerTrack=function(e,t){return{type:"SET_CONSUMER_TRACK",payload:{consumerId:e,track:t}}},r.addNotification=function(e){return{type:"ADD_NOTIFICATION",payload:{notification:e}}},r.removeNotification=function(e){return{type:"REMOVE_NOTIFICATION",payload:{notificationId:e}}},r.removeAllNotifications=function(){return{type:"REMOVE_ALL_NOTIFICATIONS"}}},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getProtooUrl=function(e,t,r){window.location.hostname;e||console.error("config.media_server_wss don't set.");return e+"/?peerName="+t+"&roomId="+r}},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("babel-runtime/core-js/promise"),a=(n=o,n&&n.__esModule?n:{default:n});r.initialize=function(){return i=document.getElementById("mediasoup-demo-app-media-query-detector"),a.default.resolve()},r.isDesktop=function(){return Boolean(i.offsetParent)},r.isMobile=function(){return!i.offsetParent};var i=void 0},{"babel-runtime/core-js/promise":28}],17:[function(e,t,r){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":42}],18:[function(e,t,r){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":43}],19:[function(e,t,r){t.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":44}],20:[function(e,t,r){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":45}],21:[function(e,t,r){t.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":46}],22:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":47}],23:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":48}],24:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":49}],25:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":50}],26:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":51}],27:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":52}],28:[function(e,t,r){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":53}],29:[function(e,t,r){t.exports={default:e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":54}],30:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":55}],31:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":56}],32:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],33:[function(e,t,r){"use strict";r.__esModule=!0;var n,o=e("../core-js/object/define-property"),a=(n=o,n&&n.__esModule?n:{default:n});r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,a.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":24}],34:[function(e,t,r){"use strict";r.__esModule=!0;var n,o=e("../core-js/object/define-property"),a=(n=o,n&&n.__esModule?n:{default:n});r.default=function(e,t,r){return t in e?(0,a.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{"../core-js/object/define-property":24}],35:[function(e,t,r){"use strict";r.__esModule=!0;var n,o=e("../core-js/object/assign"),a=(n=o,n&&n.__esModule?n:{default:n});r.default=a.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},{"../core-js/object/assign":22}],36:[function(e,t,r){"use strict";r.__esModule=!0;var n=i(e("../core-js/object/set-prototype-of")),o=i(e("../core-js/object/create")),a=i(e("../helpers/typeof"));function i(e){return e&&e.__esModule?e:{default:e}}r.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,a.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":23,"../core-js/object/set-prototype-of":27,"../helpers/typeof":40}],37:[function(e,t,r){"use strict";r.__esModule=!0;var n,o=e("../helpers/typeof"),a=(n=o,n&&n.__esModule?n:{default:n});r.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,a.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":40}],38:[function(e,t,r){"use strict";r.__esModule=!0;var n=a(e("../core-js/is-iterable")),o=a(e("../core-js/get-iterator"));function a(e){return e&&e.__esModule?e:{default:e}}r.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var s,u=(0,o.default)(e);!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":18,"../core-js/is-iterable":19}],39:[function(e,t,r){"use strict";r.__esModule=!0;var n,o=e("../core-js/array/from"),a=(n=o,n&&n.__esModule?n:{default:n});r.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,a.default)(e)}},{"../core-js/array/from":17}],40:[function(e,t,r){"use strict";r.__esModule=!0;var n=i(e("../core-js/symbol/iterator")),o=i(e("../core-js/symbol")),a="function"==typeof o.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function i(e){return e&&e.__esModule?e:{default:e}}r.default="function"==typeof o.default&&"symbol"===a(n.default)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":a(e)}},{"../core-js/symbol":30,"../core-js/symbol/iterator":31}],41:[function(e,t,r){n=this,o=function(){var e=!0;function t(t){function r(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function n(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var o,a=r(/(ipod|iphone|ipad)/i).toLowerCase(),i=!/like android/i.test(t)&&/android/i.test(t),s=/nexus\s*[0-6]\s*/i.test(t),u=!s&&/nexus\s*[0-9]+/i.test(t),c=/CrOS/.test(t),l=/silk/i.test(t),d=/sailfish/i.test(t),f=/tizen/i.test(t),p=/(web|hpw)os/i.test(t),h=/windows phone/i.test(t),m=(/SamsungBrowser/i.test(t),!h&&/windows/i.test(t)),v=!a&&!l&&/macintosh/i.test(t),_=!i&&!d&&!f&&!p&&/linux/i.test(t),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),y=r(/version\/(\d+(\.\d+)?)/i),g=/tablet/i.test(t)&&!/tablet pc/i.test(t),w=!g&&/[^-]mobi/i.test(t),k=/xbox/i.test(t);/opera/i.test(t)?o={name:"Opera",opera:e,version:y||r(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?o={name:"Opera",opera:e,version:r(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(t)?o={name:"Samsung Internet for Android",samsungBrowser:e,version:y||r(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?o={name:"Opera Coast",coast:e,version:y||r(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?o={name:"Yandex Browser",yandexbrowser:e,version:y||r(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?o={name:"UC Browser",ucbrowser:e,version:r(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?o={name:"Maxthon",maxthon:e,version:r(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?o={name:"Epiphany",epiphany:e,version:r(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?o={name:"Puffin",puffin:e,version:r(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?o={name:"Sleipnir",sleipnir:e,version:r(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?o={name:"K-Meleon",kMeleon:e,version:r(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:h?(o={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},b?(o.msedge=e,o.version=b):(o.msie=e,o.version=r(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?o={name:"Internet Explorer",msie:e,version:r(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?o={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?o={name:"Microsoft Edge",msedge:e,version:b}:/vivaldi/i.test(t)?o={name:"Vivaldi",vivaldi:e,version:r(/vivaldi\/(\d+(\.\d+)?)/i)||y}:d?o={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:r(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?o={name:"SeaMonkey",seamonkey:e,version:r(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(o={name:"Firefox",firefox:e,version:r(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(o.firefoxos=e,o.osname="Firefox OS")):l?o={name:"Amazon Silk",silk:e,version:r(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?o={name:"PhantomJS",phantom:e,version:r(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?o={name:"SlimerJS",slimer:e,version:r(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?o={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:y||r(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(o={name:"WebOS",osname:"WebOS",webos:e,version:y||r(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(o.touchpad=e)):/bada/i.test(t)?o={name:"Bada",osname:"Bada",bada:e,version:r(/dolfin\/(\d+(\.\d+)?)/i)}:f?o={name:"Tizen",osname:"Tizen",tizen:e,version:r(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(t)?o={name:"QupZilla",qupzilla:e,version:r(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(t)?o={name:"Chromium",chromium:e,version:r(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(t)?o={name:"Chrome",chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?o={name:"Android",version:y}:/safari|applewebkit/i.test(t)?(o={name:"Safari",safari:e},y&&(o.version=y)):a?(o={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},y&&(o.version=y)):o=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:r(/googlebot\/(\d+(\.\d+))/i)||y}:{name:r(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(o.name=o.name||"Blink",o.blink=e):(o.name=o.name||"Webkit",o.webkit=e),!o.version&&y&&(o.version=y)):!o.opera&&/gecko\//i.test(t)&&(o.name=o.name||"Gecko",o.gecko=e,o.version=o.version||r(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||!i&&!o.silk?!o.windowsphone&&a?(o[a]=e,o.ios=e,o.osname="iOS"):v?(o.mac=e,o.osname="macOS"):k?(o.xbox=e,o.osname="Xbox"):m?(o.windows=e,o.osname="Windows"):_&&(o.linux=e,o.osname="Linux"):(o.android=e,o.osname="Android");var P="";o.windows?P=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(r(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?P=r(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?P=(P=r(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):a?P=(P=r(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):i?P=r(/android[ \/-](\d+(\.\d+)*)/i):o.webos?P=r(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?P=r(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?P=r(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(P=r(/tizen[\/\s](\d+(\.\d+)*)/i)),P&&(o.osversion=P);var j=!o.windows&&P.split(".")[0];return g||u||"ipad"==a||i&&(3==j||j>=4&&!w)||o.silk?o.tablet=e:(w||"iphone"==a||"ipod"==a||i||s||o.blackberry||o.webos||o.bada)&&(o.mobile=e),o.msedge||o.msie&&o.version>=10||o.yandexbrowser&&o.version>=15||o.vivaldi&&o.version>=1||o.chrome&&o.version>=20||o.samsungBrowser&&o.version>=4||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1||o.chromium&&o.version>=20?o.a=e:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6||o.chromium&&o.version<20?o.c=e:o.x=e,o}var r=t("undefined"!=typeof navigator?navigator.userAgent||"":"");r.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in r)return!0}return!1};function n(e){return e.split(".").length}function o(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function a(e){for(var t=Math.max(n(e[0]),n(e[1])),r=o(e,function(e){var r=t-n(e);return o((e+=new Array(r+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(r[0][t]>r[1][t])return 1;if(r[0][t]!==r[1][t])return-1;if(0===t)return 0}}function i(e,n,o){var i=r;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(i=t(o));var s=""+i.version;for(var u in e)if(e.hasOwnProperty(u)&&i[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return a([s,e[u]])<0}return n}return r.isUnsupportedBrowser=i,r.compareVersions=a,r.check=function(e,t,r){return!i(e,t,r)},r._detect=t,r},void 0!==t&&t.exports?t.exports=o():n.bowser=o();var n,o},{}],42:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":71,"../../modules/es6.array.from":144,"../../modules/es6.string.iterator":156}],43:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":142,"../modules/es6.string.iterator":156,"../modules/web.dom.iterable":168}],44:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":143,"../modules/es6.string.iterator":156,"../modules/web.dom.iterable":168}],45:[function(e,t,r){var n=e("../../modules/_core"),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(e){return o.stringify.apply(o,arguments)}},{"../../modules/_core":71}],46:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),t.exports=e("../modules/_core").Map},{"../modules/_core":71,"../modules/es6.map":146,"../modules/es6.object.to-string":153,"../modules/es6.string.iterator":156,"../modules/es7.map.from":158,"../modules/es7.map.of":159,"../modules/es7.map.to-json":160,"../modules/web.dom.iterable":168}],47:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":71,"../../modules/es6.object.assign":147}],48:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":71,"../../modules/es6.object.create":148}],49:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":71,"../../modules/es6.object.define-property":149}],50:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":71,"../../modules/es6.object.get-prototype-of":150}],51:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":71,"../../modules/es6.object.keys":151}],52:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":71,"../../modules/es6.object.set-prototype-of":152}],53:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":71,"../modules/es6.object.to-string":153,"../modules/es6.promise":154,"../modules/es6.string.iterator":156,"../modules/es7.promise.finally":161,"../modules/es7.promise.try":162,"../modules/web.dom.iterable":168}],54:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),t.exports=e("../modules/_core").Set},{"../modules/_core":71,"../modules/es6.object.to-string":153,"../modules/es6.set":155,"../modules/es6.string.iterator":156,"../modules/es7.set.from":163,"../modules/es7.set.of":164,"../modules/es7.set.to-json":165,"../modules/web.dom.iterable":168}],55:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":71,"../../modules/es6.object.to-string":153,"../../modules/es6.symbol":157,"../../modules/es7.symbol.async-iterator":166,"../../modules/es7.symbol.observable":167}],56:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":139,"../../modules/es6.string.iterator":156,"../../modules/web.dom.iterable":168}],57:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],58:[function(e,t,r){t.exports=function(){}},{}],59:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],60:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":91}],61:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":81}],62:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),a=e("./_to-absolute-index");t.exports=function(e){return function(t,r,i){var s,u=n(t),c=o(u.length),l=a(i,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},{"./_to-absolute-index":130,"./_to-iobject":132,"./_to-length":133}],63:[function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),a=e("./_to-object"),i=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var m,v,_=a(t),b=o(_),y=n(s,h,3),g=i(b.length),w=0,k=r?p(t,g):u?p(t,0):void 0;g>w;w++)if((f||w in b)&&(v=y(m=b[w],w,_),e))if(r)k[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:k.push(m)}else if(l)return!1;return d?-1:c||l?l:k}}},{"./_array-species-create":65,"./_ctx":73,"./_iobject":88,"./_to-length":133,"./_to-object":134}],64:[function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),a=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":90,"./_is-object":91,"./_wks":140}],65:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":64}],66:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),a="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:a?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},{"./_cof":67,"./_wks":140}],67:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],68:[function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),a=e("./_redefine-all"),i=e("./_ctx"),s=e("./_an-instance"),u=e("./_for-of"),c=e("./_iter-define"),l=e("./_iter-step"),d=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,h=e("./_validate-collection"),m=f?"_s":"size",v=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,c){var l=e(function(e,n){s(e,l,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=n&&u(n,r,e[c],e)});return a(l.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=h(this,t),n=v(r,e);if(n){var o=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=o),o&&(o.p=a),r._f==n&&(r._f=o),r._l==n&&(r._l=a),r[m]--}return!!n},forEach:function(e){h(this,t);for(var r,n=i(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(h(this,t),e)}}),f&&n(l.prototype,"size",{get:function(){return h(this,t)[m]}}),l},def:function(e,t,r){var n,o,a=v(e,t);return a?a.v=r:(e._l=a={i:o=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[m]++,"F"!==o&&(e._i[o]=a)),e},getEntry:v,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=h(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))},r?"entries":"values",!r,!0),d(t)}}},{"./_an-instance":59,"./_ctx":73,"./_descriptors":75,"./_for-of":81,"./_iter-define":94,"./_iter-step":96,"./_meta":99,"./_object-create":103,"./_object-dp":104,"./_redefine-all":118,"./_set-species":123,"./_validate-collection":137}],69:[function(e,t,r){var n=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":61,"./_classof":66}],70:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),a=e("./_meta"),i=e("./_fails"),s=e("./_hide"),u=e("./_redefine-all"),c=e("./_for-of"),l=e("./_an-instance"),d=e("./_is-object"),f=e("./_set-to-string-tag"),p=e("./_object-dp").f,h=e("./_array-methods")(0),m=e("./_descriptors");t.exports=function(e,t,r,v,_,b){var y=n[e],g=y,w=_?"set":"add",k=g&&g.prototype,P={};return m&&"function"==typeof g&&(b||k.forEach&&!i(function(){(new g).entries().next()}))?(g=t(function(t,r){l(t,g,e,"_c"),t._c=new y,void 0!=r&&c(r,_,t[w],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!b||"clear"!=e)&&s(g.prototype,e,function(r,n){if(l(this,g,e),!t&&b&&!d(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,n);return t?this:o})}),b||p(g.prototype,"size",{get:function(){return this._c.size}})):(g=v.getConstructor(t,e,_,w),u(g.prototype,r),a.NEED=!0),f(g,e),P[e]=g,o(o.G+o.W+o.F,P),b||v.setStrong(g,e,_),g}},{"./_an-instance":59,"./_array-methods":63,"./_descriptors":75,"./_export":79,"./_fails":80,"./_for-of":81,"./_global":82,"./_hide":84,"./_is-object":91,"./_meta":99,"./_object-dp":104,"./_redefine-all":118,"./_set-to-string-tag":124}],71:[function(e,t,r){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},{}],72:[function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},{"./_object-dp":104,"./_property-desc":117}],73:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":57}],74:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],75:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":80}],76:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,a=n(o)&&n(o.createElement);t.exports=function(e){return a?o.createElement(e):{}}},{"./_global":82,"./_is-object":91}],77:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],78:[function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),a=e("./_object-pie");t.exports=function(e){var t=n(e),r=o.f;if(r)for(var i,s=r(e),u=a.f,c=0;s.length>c;)u.call(e,i=s[c++])&&t.push(i);return t}},{"./_object-gops":109,"./_object-keys":112,"./_object-pie":113}],79:[function(e,t,r){var n=e("./_global"),o=e("./_core"),a=e("./_ctx"),i=e("./_hide"),s="prototype",u=function(e,t,r){var c,l,d,f=e&u.F,p=e&u.G,h=e&u.S,m=e&u.P,v=e&u.B,_=e&u.W,b=p?o:o[t]||(o[t]={}),y=b[s],g=p?n:h?n[t]:(n[t]||{})[s];p&&(r=t);for(c in r)(l=!f&&g&&void 0!==g[c])&&c in b||(d=l?g[c]:r[c],b[c]=p&&"function"!=typeof g[c]?r[c]:v&&l?a(d,n):_&&g[c]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((b.virtual||(b.virtual={}))[c]=d,e&u.R&&y&&!y[c]&&i(y,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":71,"./_ctx":73,"./_global":82,"./_hide":84}],80:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],81:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),a=e("./_is-array-iter"),i=e("./_an-object"),s=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={};(r=t.exports=function(e,t,r,d,f){var p,h,m,v,_=f?function(){return e}:u(e),b=n(r,d,t?2:1),y=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(a(_)){for(p=s(e.length);p>y;y++)if((v=t?b(i(h=e[y])[0],h[1]):b(e[y]))===c||v===l)return v}else for(m=_.call(e);!(h=m.next()).done;)if((v=o(m,b,h.value,t))===c||v===l)return v}).BREAK=c,r.RETURN=l},{"./_an-object":60,"./_ctx":73,"./_is-array-iter":89,"./_iter-call":92,"./_to-length":133,"./core.get-iterator-method":141}],82:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],83:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],84:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":75,"./_object-dp":104,"./_property-desc":117}],85:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":82}],86:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":75,"./_dom-create":76,"./_fails":80}],87:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],88:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":67}],89:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||a[o]===e)}},{"./_iterators":97,"./_wks":140}],90:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":67}],91:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],92:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},{"./_an-object":60}],93:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),a=e("./_set-to-string-tag"),i={};e("./_hide")(i,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(i,{next:o(1,r)}),a(e,t+" Iterator")}},{"./_hide":84,"./_object-create":103,"./_property-desc":117,"./_set-to-string-tag":124,"./_wks":140}],94:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),a=e("./_redefine"),i=e("./_hide"),s=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),d=e("./_object-gpo"),f=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(e,t,r,m,v,_,b){c(r,t,m);var y,g,w,k=function(e){if(!p&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},P=t+" Iterator",j="values"==v,x=!1,C=e.prototype,E=C[f]||C["@@iterator"]||v&&C[v],S=!p&&E||k(v),R=v?j?k("entries"):S:void 0,T="Array"==t?C.entries||E:E;if(T&&(w=d(T.call(new e)))!==Object.prototype&&w.next&&(l(w,P,!0),n||s(w,f)||i(w,f,h)),j&&E&&"values"!==E.name&&(x=!0,S=function(){return E.call(this)}),n&&!b||!p&&!x&&C[f]||i(C,f,S),u[t]=S,u[P]=h,v)if(y={values:j?S:k("values"),keys:_?S:k("keys"),entries:R},b)for(g in y)g in C||a(C,g,y[g]);else o(o.P+o.F*(p||x),t,y);return y}},{"./_export":79,"./_has":83,"./_hide":84,"./_iter-create":93,"./_iterators":97,"./_library":98,"./_object-gpo":110,"./_redefine":119,"./_set-to-string-tag":124,"./_wks":140}],95:[function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var a=[7][n]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var a=[7],i=a[n]();i.next=function(){return{done:r=!0}},a[n]=function(){return i},e(a)}catch(e){}return r}},{"./_wks":140}],96:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],97:[function(e,t,r){t.exports={}},{}],98:[function(e,t,r){t.exports=!0},{}],99:[function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),a=e("./_has"),i=e("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){i(e,n,{value:{i:"O"+ ++s,w:{}}})},d=t.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},onFreeze:function(e){return c&&d.NEED&&u(e)&&!a(e,n)&&l(e),e}}},{"./_fails":80,"./_has":83,"./_is-object":91,"./_object-dp":104,"./_uid":136}],100:[function(e,t,r){var n=e("./_global"),o=e("./_task").set,a=n.MutationObserver||n.WebKitMutationObserver,i=n.process,s=n.Promise,u="process"==e("./_cof")(i);t.exports=function(){var e,t,r,c=function(){var n,o;for(u&&(n=i.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){i.nextTick(c)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve();r=function(){l.then(c)}}else r=function(){o.call(n,c)};else{var d=!0,f=document.createTextNode("");new a(c).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},{"./_cof":67,"./_global":82,"./_task":129}],101:[function(e,t,r){"use strict";var n=e("./_a-function");t.exports.f=function(e){return new function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}(e)}},{"./_a-function":57}],102:[function(e,t,r){"use strict";var n=e("./_object-keys"),o=e("./_object-gops"),a=e("./_object-pie"),i=e("./_to-object"),s=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=i(e),u=arguments.length,c=1,l=o.f,d=a.f;u>c;)for(var f,p=s(arguments[c++]),h=l?n(p).concat(l(p)):n(p),m=h.length,v=0;m>v;)d.call(p,f=h[v++])&&(r[f]=p[f]);return r}:u},{"./_fails":80,"./_iobject":88,"./_object-gops":109,"./_object-keys":112,"./_object-pie":113,"./_to-object":134}],103:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),a=e("./_enum-bug-keys"),i=e("./_shared-key")("IE_PROTO"),s=function(){},u=function(){var t,r=e("./_dom-create")("iframe"),n=a.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",(t=r.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[a[n]];return u()};t.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[i]=e):r=u(),void 0===t?r:o(r,t)}},{"./_an-object":60,"./_dom-create":76,"./_enum-bug-keys":77,"./_html":85,"./_object-dps":105,"./_shared-key":125}],104:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),a=e("./_to-primitive"),i=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),o)try{return i(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":60,"./_descriptors":75,"./_ie8-dom-define":86,"./_to-primitive":135}],105:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),a=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),s=i.length,u=0;s>u;)n.f(e,r=i[u++],t[r]);return e}},{"./_an-object":60,"./_descriptors":75,"./_object-dp":104,"./_object-keys":112}],106:[function(e,t,r){var n=e("./_object-pie"),o=e("./_property-desc"),a=e("./_to-iobject"),i=e("./_to-primitive"),s=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?c:function(e,t){if(e=a(e),t=i(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},{"./_descriptors":75,"./_has":83,"./_ie8-dom-define":86,"./_object-pie":113,"./_property-desc":117,"./_to-iobject":132,"./_to-primitive":135}],107:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return i&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return i.slice()}}(e):o(n(e))}},{"./_object-gopn":108,"./_to-iobject":132}],108:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"./_enum-bug-keys":77,"./_object-keys-internal":111}],109:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],110:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},{"./_has":83,"./_shared-key":125,"./_to-object":134}],111:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),a=e("./_array-includes")(!1),i=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)r!=i&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~a(c,r)||c.push(r));return c}},{"./_array-includes":62,"./_has":83,"./_shared-key":125,"./_to-iobject":132}],112:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":77,"./_object-keys-internal":111}],113:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],114:[function(e,t,r){var n=e("./_export"),o=e("./_core"),a=e("./_fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",i)}},{"./_core":71,"./_export":79,"./_fails":80}],115:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],116:[function(e,t,r){var n=e("./_an-object"),o=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},{"./_an-object":60,"./_is-object":91,"./_new-promise-capability":101}],117:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],118:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},{"./_hide":84}],119:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":84}],120:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_a-function"),a=e("./_ctx"),i=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,u=arguments[1];return o(this),(t=void 0!==u)&&o(u),void 0==e?new this:(r=[],t?(n=0,s=a(u,arguments[2],2),i(e,!1,function(e){r.push(s(e,n++))})):i(e,!1,r.push,r),new this(r))}})}},{"./_a-function":57,"./_ctx":73,"./_export":79,"./_for-of":81}],121:[function(e,t,r){"use strict";var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":79}],122:[function(e,t,r){var n=e("./_is-object"),o=e("./_an-object"),a=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{(n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return a(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:a}},{"./_an-object":60,"./_ctx":73,"./_is-object":91,"./_object-gopd":106}],123:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_core"),a=e("./_object-dp"),i=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];i&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":71,"./_descriptors":75,"./_global":82,"./_object-dp":104,"./_wks":140}],124:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},{"./_has":83,"./_object-dp":104,"./_wks":140}],125:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":126,"./_uid":136}],126:[function(e,t,r){var n=e("./_global"),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./_global":82}],127:[function(e,t,r){var n=e("./_an-object"),o=e("./_a-function"),a=e("./_wks")("species");t.exports=function(e,t){var r,i=n(e).constructor;return void 0===i||void 0==(r=n(i)[a])?t:o(r)}},{"./_a-function":57,"./_an-object":60,"./_wks":140}],128:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var a,i,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(i=s.charCodeAt(u+1))<56320||i>57343?e?s.charAt(u):a:e?s.slice(u,u+2):i-56320+(a-55296<<10)+65536}}},{"./_defined":74,"./_to-integer":131}],129:[function(e,t,r){var n,o,a,i=e("./_ctx"),s=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),l=e("./_global"),d=l.process,f=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,m=l.Dispatch,v=0,_={},b=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},y=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},p=function(e){delete _[e]},"process"==e("./_cof")(d)?n=function(e){d.nextTick(i(b,e,1))}:m&&m.now?n=function(e){m.now(i(b,e,1))}:h?(a=(o=new h).port2,o.port1.onmessage=y,n=i(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",y,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(i(b,e,1),0)}),t.exports={set:f,clear:p}},{"./_cof":67,"./_ctx":73,"./_dom-create":76,"./_global":82,"./_html":85,"./_invoke":87}],130:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,a=Math.min;t.exports=function(e,t){return(e=n(e))<0?o(e+t,0):a(e,t)}},{"./_to-integer":131}],131:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],132:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":74,"./_iobject":88}],133:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":131}],134:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":74}],135:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":91}],136:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],137:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":91}],138:[function(e,t,r){var n=e("./_global"),o=e("./_core"),a=e("./_library"),i=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},{"./_core":71,"./_global":82,"./_library":98,"./_object-dp":104,"./_wks-ext":139}],139:[function(e,t,r){r.f=e("./_wks")},{"./_wks":140}],140:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),a=e("./_global").Symbol,i="function"==typeof a;(t.exports=function(e){return n[e]||(n[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=n},{"./_global":82,"./_shared":126,"./_uid":136}],141:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[n(e)]}},{"./_classof":66,"./_core":71,"./_iterators":97,"./_wks":140}],142:[function(e,t,r){var n=e("./_an-object"),o=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":60,"./_core":71,"./core.get-iterator-method":141}],143:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||a.hasOwnProperty(n(t))}},{"./_classof":66,"./_core":71,"./_iterators":97,"./_wks":140}],144:[function(e,t,r){"use strict";var n=e("./_ctx"),o=e("./_export"),a=e("./_to-object"),i=e("./_iter-call"),s=e("./_is-array-iter"),u=e("./_to-length"),c=e("./_create-property"),l=e("./core.get-iterator-method");o(o.S+o.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,d,f=a(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,_=0,b=l(f);if(v&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&s(b))for(r=new p(t=u(f.length));t>_;_++)c(r,_,v?m(f[_],_):f[_]);else for(d=b.call(f),r=new p;!(o=d.next()).done;_++)c(r,_,v?i(d,m,[o.value,_],!0):o.value);return r.length=_,r}})},{"./_create-property":72,"./_ctx":73,"./_export":79,"./_is-array-iter":89,"./_iter-call":92,"./_iter-detect":95,"./_to-length":133,"./_to-object":134,"./core.get-iterator-method":141}],145:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),a=e("./_iterators"),i=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":58,"./_iter-define":94,"./_iter-step":96,"./_iterators":97,"./_to-iobject":132}],146:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":70,"./_collection-strong":68,"./_validate-collection":137}],147:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":79,"./_object-assign":102}],148:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":79,"./_object-create":103}],149:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":75,"./_export":79,"./_object-dp":104}],150:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(n(e))}})},{"./_object-gpo":110,"./_object-sap":114,"./_to-object":134}],151:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return o(n(e))}})},{"./_object-keys":112,"./_object-sap":114,"./_to-object":134}],152:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":79,"./_set-proto":122}],153:[function(e,t,r){},{}],154:[function(e,t,r){"use strict";var n,o,a,i,s=e("./_library"),u=e("./_global"),c=e("./_ctx"),l=e("./_classof"),d=e("./_export"),f=e("./_is-object"),p=e("./_a-function"),h=e("./_an-instance"),m=e("./_for-of"),v=e("./_species-constructor"),_=e("./_task").set,b=e("./_microtask")(),y=e("./_new-promise-capability"),g=e("./_perform"),w=e("./_promise-resolve"),k="Promise",P=u.TypeError,j=u.process,x=u.Promise,C="process"==l(j),E=function(){},S=o=y.f,R=!!function(){try{var t=x.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(E,E)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof r}catch(e){}}(),T=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var n=e._v,o=1==e._s,a=0,i=function(t){var r,a,i=o?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{i?(o||(2==e._h&&M(e),e._h=1),!0===i?r=n:(c&&c.enter(),r=i(n),c&&c.exit()),r===t.promise?u(P("Promise-chain cycle")):(a=T(r))?a.call(r,s,u):s(r)):u(n)}catch(e){u(e)}};r.length>a;)i(r[a++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){_.call(u,function(){var t,r,n,o=e._v,a=A(e);if(a&&(t=g(function(){C?j.emit("unhandledRejection",o,e):(r=u.onunhandledrejection)?r({promise:e,reason:o}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=C||A(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},M=function(e){_.call(u,function(){var t;C?j.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw P("Promise can't be resolved itself");(t=T(e))?b(function(){var n={_w:r,_d:!1};try{t.call(e,c(D,n,1),c(N,n,1))}catch(e){N.call(n,e)}}):(r._v=e,r._s=1,O(r,!1))}catch(e){N.call({_w:r,_d:!1},e)}}};R||(x=function(e){h(this,x,k,"_h"),p(e),n.call(this);try{e(c(D,this,1),c(N,this,1))}catch(e){N.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e("./_redefine-all")(x.prototype,{then:function(e,t){var r=S(v(this,x));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=C?j.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&O(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(D,e,1),this.reject=c(N,e,1)},y.f=S=function(e){return e===x||e===i?new a(e):o(e)}),d(d.G+d.W+d.F*!R,{Promise:x}),e("./_set-to-string-tag")(x,k),e("./_set-species")(k),i=e("./_core").Promise,d(d.S+d.F*!R,k,{reject:function(e){var t=S(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!R),k,{resolve:function(e){return w(s&&this===i?x:this,e)}}),d(d.S+d.F*!(R&&e("./_iter-detect")(function(e){x.all(e).catch(E)})),k,{all:function(e){var t=this,r=S(t),n=r.resolve,o=r.reject,a=g(function(){var r=[],a=0,i=1;m(e,!1,function(e){var s=a++,u=!1;r.push(void 0),i++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--i||n(r))},o)}),--i||n(r)});return a.e&&o(a.v),r.promise},race:function(e){var t=this,r=S(t),n=r.reject,o=g(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},{"./_a-function":57,"./_an-instance":59,"./_classof":66,"./_core":71,"./_ctx":73,"./_export":79,"./_for-of":81,"./_global":82,"./_is-object":91,"./_iter-detect":95,"./_library":98,"./_microtask":100,"./_new-promise-capability":101,"./_perform":115,"./_promise-resolve":116,"./_redefine-all":118,"./_set-species":123,"./_set-to-string-tag":124,"./_species-constructor":127,"./_task":129,"./_wks":140}],155:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":70,"./_collection-strong":68,"./_validate-collection":137}],156:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":94,"./_string-at":128}],157:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_has"),a=e("./_descriptors"),i=e("./_export"),s=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),d=e("./_set-to-string-tag"),f=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),m=e("./_wks-define"),v=e("./_enum-keys"),_=e("./_is-array"),b=e("./_an-object"),y=e("./_is-object"),g=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),P=e("./_object-create"),j=e("./_object-gopn-ext"),x=e("./_object-gopd"),C=e("./_object-dp"),E=e("./_object-keys"),S=x.f,R=C.f,T=j.f,O=n.Symbol,I=n.JSON,A=I&&I.stringify,M="prototype",N=p("_hidden"),D=p("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),W=l("op-symbols"),B=Object[M],z="function"==typeof O,q=n.QObject,G=!q||!q[M]||!q[M].findChild,V=a&&c(function(){return 7!=P(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=S(B,t);n&&delete B[t],R(e,t,r),n&&e!==B&&R(B,t,n)}:R,K=function(e){var t=U[e]=P(O[M]);return t._k=e,t},$=z&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},H=function(e,t,r){return e===B&&H(W,t,r),b(e),t=w(t,!0),b(r),o(U,t)?(r.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),r=P(r,{enumerable:k(0,!1)})):(o(e,N)||R(e,N,k(1,{})),e[N][t]=!0),V(e,t,r)):R(e,t,r)},J=function(e,t){b(e);for(var r,n=v(t=g(t)),o=0,a=n.length;a>o;)H(e,r=n[o++],t[r]);return e},Y=function(e){var t=L.call(this,e=w(e,!0));return!(this===B&&o(U,e)&&!o(W,e))&&(!(t||!o(this,e)||!o(U,e)||o(this,N)&&this[N][e])||t)},Z=function(e,t){if(e=g(e),t=w(t,!0),e!==B||!o(U,t)||o(W,t)){var r=S(e,t);return!r||!o(U,t)||o(e,N)&&e[N][t]||(r.enumerable=!0),r}},Q=function(e){for(var t,r=T(g(e)),n=[],a=0;r.length>a;)o(U,t=r[a++])||t==N||t==u||n.push(t);return n},X=function(e){for(var t,r=e===B,n=T(r?W:g(e)),a=[],i=0;n.length>i;)!o(U,t=n[i++])||r&&!o(B,t)||a.push(U[t]);return a};z||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===B&&t.call(W,r),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),V(this,e,k(1,r))};return a&&G&&V(B,e,{configurable:!0,set:t}),K(e)})[M],"toString",function(){return this._k}),x.f=Z,C.f=H,e("./_object-gopn").f=j.f=Q,e("./_object-pie").f=Y,e("./_object-gops").f=X,a&&!e("./_library")&&s(B,"propertyIsEnumerable",Y,!0),h.f=function(e){return K(p(e))}),i(i.G+i.W+i.F*!z,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var re=E(p.store),ne=0;re.length>ne;)m(re[ne++]);i(i.S+i.F*!z,"Symbol",{for:function(e){return o(F,e+="")?F[e]:F[e]=O(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!z,"Object",{create:function(e,t){return void 0===t?P(e):J(P(e),t)},defineProperty:H,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),I&&i(i.S+i.F*(!z||c(function(){var e=O();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(y(t)||void 0!==e)&&!$(e))return _(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!$(t))return t}),n[1]=t,A.apply(I,n)}}),O[M][D]||e("./_hide")(O[M],D,O[M].valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},{"./_an-object":60,"./_descriptors":75,"./_enum-keys":78,"./_export":79,"./_fails":80,"./_global":82,"./_has":83,"./_hide":84,"./_is-array":90,"./_is-object":91,"./_library":98,"./_meta":99,"./_object-create":103,"./_object-dp":104,"./_object-gopd":106,"./_object-gopn":108,"./_object-gopn-ext":107,"./_object-gops":109,"./_object-keys":112,"./_object-pie":113,"./_property-desc":117,"./_redefine":119,"./_set-to-string-tag":124,"./_shared":126,"./_to-iobject":132,"./_to-primitive":135,"./_uid":136,"./_wks":140,"./_wks-define":138,"./_wks-ext":139}],158:[function(e,t,r){e("./_set-collection-from")("Map")},{"./_set-collection-from":120}],159:[function(e,t,r){e("./_set-collection-of")("Map")},{"./_set-collection-of":121}],160:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":69,"./_export":79}],161:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_core"),a=e("./_global"),i=e("./_species-constructor"),s=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(e){var t=i(this,o.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},{"./_core":71,"./_export":79,"./_global":82,"./_promise-resolve":116,"./_species-constructor":127}],162:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_new-promise-capability"),a=e("./_perform");n(n.S,"Promise",{try:function(e){var t=o.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},{"./_export":79,"./_new-promise-capability":101,"./_perform":115}],163:[function(e,t,r){e("./_set-collection-from")("Set")},{"./_set-collection-from":120}],164:[function(e,t,r){e("./_set-collection-of")("Set")},{"./_set-collection-of":121}],165:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":69,"./_export":79}],166:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":138}],167:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":138}],168:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),o=e("./_hide"),a=e("./_iterators"),i=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=n[c],d=l&&l.prototype;d&&!d[i]&&o(d,i,c),a[c]=a.Array}},{"./_global":82,"./_hide":84,"./_iterators":97,"./_wks":140,"./es6.array.iterator":145}],169:[function(e,t,r){(function(n){(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(a=++o)}),e.splice(a,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=o,r.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function o(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}r.enable(o())}).call(this,e("_process"))},{"./debug":170,_process:210}],170:[function(e,t,r){(r=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){r.save(e),r.names=[],r.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={};function n(e){var t;function n(){if(n.enabled){var e=n,o=+new Date,a=o-(t||o);e.diff=a,e.prev=t,e.curr=o,t=o;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=r.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;u++;var o=r.formatters[n];if("function"==typeof o){var a=i[u];t=o.call(e,a),i.splice(u,1),u--}return t}),r.formatArgs.call(e,i);(n.log||r.log||console.log.bind(console)).apply(e,i)}}return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}(e),n.destroy=o,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}},{ms:209}],171:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(i(r=this._events[e]))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),n=(c=r.slice()).length,u=0;u<n;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!o(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,i,s;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=i;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)};function o(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}},{}],172:[function(e,t,r){!function(e){var n=!1;if("object"==typeof r&&(t.exports=e(),n=!0),!n){var o=window.Cookies,a=window.Cookies=e();a.noConflict=function(){return window.Cookies=o,a}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(r){function n(t,o,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},n.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{i=JSON.stringify(o),/^[\{\[]/.test(i)&&(o=i)}catch(e){}o=r.write?r.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var u="";for(var c in a)a[c]&&(u+="; "+c,!0!==a[c]&&(u+="="+a[c]));return document.cookie=t+"="+o+u}t||(i={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<l.length;f++){var p=l[f].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var m=p[0].replace(d,decodeURIComponent);if(h=r.read?r.read(h,m):r(h,m)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===m){i=h;break}t||(i[m]=h)}catch(e){}}return i}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,r){n(t,"",e(r,{expires:-1}))},n.withConverter=t,n}return t(function(){})})},{}],173:[function(e,t,r){var n=e("./_root").Symbol;t.exports=n},{"./_root":180}],174:[function(e,t,r){var n=e("./_Symbol"),o=e("./_getRawTag"),a=e("./_objectToString"),i="[object Null]",s="[object Undefined]",u=n?n.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?s:i:u&&u in Object(e)?o(e):a(e)}},{"./_Symbol":173,"./_getRawTag":177,"./_objectToString":178}],175:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],176:[function(e,t,r){var n=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=n},{"./_overArg":179}],177:[function(e,t,r){var n=e("./_Symbol"),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;t.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},{"./_Symbol":173}],178:[function(e,t,r){var n=Object.prototype.toString;t.exports=function(e){return n.call(e)}},{}],179:[function(e,t,r){t.exports=function(e,t){return function(r){return e(t(r))}}},{}],180:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();t.exports=a},{"./_freeGlobal":175}],181:[function(e,t,r){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],182:[function(e,t,r){var n=e("./_baseGetTag"),o=e("./_getPrototype"),a=e("./isObjectLike"),i="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,d=c.call(Object);t.exports=function(e){if(!a(e)||n(e)!=i)return!1;var t=o(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d}},{"./_baseGetTag":174,"./_getPrototype":176,"./isObjectLike":181}],183:[function(e,t,r){(function(e){(function(){var n,o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",s="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",l=1,d=2,f=4,p=1,h=2,m=1,v=2,_=4,b=8,y=16,g=32,w=64,k=128,P=256,j=512,x=30,C="...",E=800,S=16,R=1,T=2,O=1/0,I=9007199254740991,A=1.7976931348623157e308,M=NaN,N=4294967295,D=N-1,L=N>>>1,F=[["ary",k],["bind",m],["bindKey",v],["curry",b],["curryRight",y],["flip",j],["partial",g],["partialRight",w],["rearg",P]],U="[object Arguments]",W="[object Array]",B="[object AsyncFunction]",z="[object Boolean]",q="[object Date]",G="[object DOMException]",V="[object Error]",K="[object Function]",$="[object GeneratorFunction]",H="[object Map]",J="[object Number]",Y="[object Null]",Z="[object Object]",Q="[object Proxy]",X="[object RegExp]",ee="[object Set]",te="[object String]",re="[object Symbol]",ne="[object Undefined]",oe="[object WeakMap]",ae="[object WeakSet]",ie="[object ArrayBuffer]",se="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",le="[object Int8Array]",de="[object Int16Array]",fe="[object Int32Array]",pe="[object Uint8Array]",he="[object Uint8ClampedArray]",me="[object Uint16Array]",ve="[object Uint32Array]",_e=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ge=/&(?:amp|lt|gt|quot|#39);/g,we=/[&<>"']/g,ke=RegExp(ge.source),Pe=RegExp(we.source),je=/<%-([\s\S]+?)%>/g,xe=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,Ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,Re=/^\./,Te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,Ie=RegExp(Oe.source),Ae=/^\s+|\s+$/g,Me=/^\s+/,Ne=/\s+$/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,We=/\\(\\)?/g,Be=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,Ke=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,He=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,Ye=/['\n\r\u2028\u2029\\]/g,Ze="\\ud800-\\udfff",Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xe="a-z\\xdf-\\xf6\\xf8-\\xff",et="A-Z\\xc0-\\xd6\\xd8-\\xde",tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rt="["+Ze+"]",nt="["+tt+"]",ot="["+Qe+"]",at="\\d+",it="[\\u2700-\\u27bf]",st="["+Xe+"]",ut="[^"+Ze+tt+at+"\\u2700-\\u27bf"+Xe+et+"]",ct="\\ud83c[\\udffb-\\udfff]",lt="[^"+Ze+"]",dt="(?:\\ud83c[\\udde6-\\uddff]){2}",ft="[\\ud800-\\udbff][\\udc00-\\udfff]",pt="["+et+"]",ht="(?:"+st+"|"+ut+")",mt="(?:"+pt+"|"+ut+")",vt="(?:['](?:d|ll|m|re|s|t|ve))?",_t="(?:['](?:D|LL|M|RE|S|T|VE))?",bt="(?:"+ot+"|"+ct+")"+"?",yt="[\\ufe0e\\ufe0f]?"+bt+("(?:\\u200d(?:"+[lt,dt,ft].join("|")+")[\\ufe0e\\ufe0f]?"+bt+")*"),gt="(?:"+[it,dt,ft].join("|")+")"+yt,wt="(?:"+[lt+ot+"?",ot,dt,ft,rt].join("|")+")",kt=RegExp("[']","g"),Pt=RegExp(ot,"g"),jt=RegExp(ct+"(?="+ct+")|"+wt+yt,"g"),xt=RegExp([pt+"?"+st+"+"+vt+"(?="+[nt,pt,"$"].join("|")+")",mt+"+"+_t+"(?="+[nt,pt+ht,"$"].join("|")+")",pt+"?"+ht+"+"+vt,pt+"+"+_t,"\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",at,gt].join("|"),"g"),Ct=RegExp("[\\u200d"+Ze+Qe+"\\ufe0e\\ufe0f]"),Et=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,St=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rt=-1,Tt={};Tt[ue]=Tt[ce]=Tt[le]=Tt[de]=Tt[fe]=Tt[pe]=Tt[he]=Tt[me]=Tt[ve]=!0,Tt[U]=Tt[W]=Tt[ie]=Tt[z]=Tt[se]=Tt[q]=Tt[V]=Tt[K]=Tt[H]=Tt[J]=Tt[Z]=Tt[X]=Tt[ee]=Tt[te]=Tt[oe]=!1;var Ot={};Ot[U]=Ot[W]=Ot[ie]=Ot[se]=Ot[z]=Ot[q]=Ot[ue]=Ot[ce]=Ot[le]=Ot[de]=Ot[fe]=Ot[H]=Ot[J]=Ot[Z]=Ot[X]=Ot[ee]=Ot[te]=Ot[re]=Ot[pe]=Ot[he]=Ot[me]=Ot[ve]=!0,Ot[V]=Ot[K]=Ot[oe]=!1;var It={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},At=parseFloat,Mt=parseInt,Nt="object"==typeof e&&e&&e.Object===Object&&e,Dt="object"==typeof self&&self&&self.Object===Object&&self,Lt=Nt||Dt||Function("return this")(),Ft="object"==typeof r&&r&&!r.nodeType&&r,Ut=Ft&&"object"==typeof t&&t&&!t.nodeType&&t,Wt=Ut&&Ut.exports===Ft,Bt=Wt&&Nt.process,zt=function(){try{return Bt&&Bt.binding&&Bt.binding("util")}catch(e){}}(),qt=zt&&zt.isArrayBuffer,Gt=zt&&zt.isDate,Vt=zt&&zt.isMap,Kt=zt&&zt.isRegExp,$t=zt&&zt.isSet,Ht=zt&&zt.isTypedArray;function Jt(e,t){return e.set(t[0],t[1]),e}function Yt(e,t){return e.add(t),e}function Zt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Qt(e,t,r,n){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];t(n,i,r(i),e)}return n}function Xt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function er(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function tr(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function rr(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}function nr(e,t){return!!(null==e?0:e.length)&&pr(e,t,0)>-1}function or(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function ar(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function ir(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function sr(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r}function ur(e,t,r,n){var o=null==e?0:e.length;for(n&&o&&(r=e[--o]);o--;)r=t(r,e[o],o,e);return r}function cr(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var lr=_r("length");function dr(e,t,r){var n;return r(e,function(e,r,o){if(t(e,r,o))return n=r,!1}),n}function fr(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function pr(e,t,r){return t==t?function(e,t,r){var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):fr(e,mr,r)}function hr(e,t,r,n){for(var o=r-1,a=e.length;++o<a;)if(n(e[o],t))return o;return-1}function mr(e){return e!=e}function vr(e,t){var r=null==e?0:e.length;return r?gr(e,t)/r:M}function _r(e){return function(t){return null==t?n:t[e]}}function br(e){return function(t){return null==e?n:e[t]}}function yr(e,t,r,n,o){return o(e,function(e,o,a){r=n?(n=!1,e):t(r,e,o,a)}),r}function gr(e,t){for(var r,o=-1,a=e.length;++o<a;){var i=t(e[o]);i!==n&&(r=r===n?i:r+i)}return r}function wr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function kr(e){return function(t){return e(t)}}function Pr(e,t){return ar(t,function(t){return e[t]})}function jr(e,t){return e.has(t)}function xr(e,t){for(var r=-1,n=e.length;++r<n&&pr(t,e[r],0)>-1;);return r}function Cr(e,t){for(var r=e.length;r--&&pr(t,e[r],0)>-1;);return r}var Er=br({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Sr=br({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Rr(e){return"\\"+It[e]}function Tr(e){return Ct.test(e)}function Or(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function Ir(e,t){return function(r){return e(t(r))}}function Ar(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var i=e[r];i!==t&&i!==c||(e[r]=c,a[o++]=r)}return a}function Mr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function Nr(e){return Tr(e)?function(e){var t=jt.lastIndex=0;for(;jt.test(e);)++t;return t}(e):lr(e)}function Dr(e){return Tr(e)?e.match(jt)||[]:e.split("")}var Lr=br({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Fr=function e(t){var r=(t=null==t?Lt:Fr.defaults(Lt.Object(),t,Fr.pick(Lt,St))).Array,Ze=t.Date,Qe=t.Error,Xe=t.Function,et=t.Math,tt=t.Object,rt=t.RegExp,nt=t.String,ot=t.TypeError,at=r.prototype,it=Xe.prototype,st=tt.prototype,ut=t["__core-js_shared__"],ct=it.toString,lt=st.hasOwnProperty,dt=0,ft=function(){var e=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pt=st.toString,ht=ct.call(tt),mt=Lt._,vt=rt("^"+ct.call(lt).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_t=Wt?t.Buffer:n,bt=t.Symbol,yt=t.Uint8Array,gt=_t?_t.allocUnsafe:n,wt=Ir(tt.getPrototypeOf,tt),jt=tt.create,Ct=st.propertyIsEnumerable,It=at.splice,Nt=bt?bt.isConcatSpreadable:n,Dt=bt?bt.iterator:n,Ft=bt?bt.toStringTag:n,Ut=function(){try{var e=Wa(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Bt=t.clearTimeout!==Lt.clearTimeout&&t.clearTimeout,zt=Ze&&Ze.now!==Lt.Date.now&&Ze.now,lr=t.setTimeout!==Lt.setTimeout&&t.setTimeout,br=et.ceil,Ur=et.floor,Wr=tt.getOwnPropertySymbols,Br=_t?_t.isBuffer:n,zr=t.isFinite,qr=at.join,Gr=Ir(tt.keys,tt),Vr=et.max,Kr=et.min,$r=Ze.now,Hr=t.parseInt,Jr=et.random,Yr=at.reverse,Zr=Wa(t,"DataView"),Qr=Wa(t,"Map"),Xr=Wa(t,"Promise"),en=Wa(t,"Set"),tn=Wa(t,"WeakMap"),rn=Wa(tt,"create"),nn=tn&&new tn,on={},an=di(Zr),sn=di(Qr),un=di(Xr),cn=di(en),ln=di(tn),dn=bt?bt.prototype:n,fn=dn?dn.valueOf:n,pn=dn?dn.toString:n;function hn(e){if(Os(e)&&!gs(e)&&!(e instanceof bn)){if(e instanceof _n)return e;if(lt.call(e,"__wrapped__"))return fi(e)}return new _n(e)}var mn=function(){function e(){}return function(t){if(!Ts(t))return{};if(jt)return jt(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function vn(){}function _n(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}hn.templateSettings={escape:je,evaluate:xe,interpolate:Ce,variable:"",imports:{_:hn}},(hn.prototype=vn.prototype).constructor=hn,(_n.prototype=mn(vn.prototype)).constructor=_n;function bn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N,this.__views__=[]}(bn.prototype=mn(vn.prototype)).constructor=bn;function yn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yn.prototype.clear=function(){this.__data__=rn?rn(null):{},this.size=0},yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yn.prototype.get=function(e){var t=this.__data__;if(rn){var r=t[e];return r===s?n:r}return lt.call(t,e)?t[e]:n},yn.prototype.has=function(e){var t=this.__data__;return rn?t[e]!==n:lt.call(t,e)},yn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rn&&t===n?s:t,this};function gn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gn.prototype.clear=function(){this.__data__=[],this.size=0},gn.prototype.delete=function(e){var t=this.__data__,r=Tn(t,e);return!(r<0||(r==t.length-1?t.pop():It.call(t,r,1),--this.size,0))},gn.prototype.get=function(e){var t=this.__data__,r=Tn(t,e);return r<0?n:t[r][1]},gn.prototype.has=function(e){return Tn(this.__data__,e)>-1},gn.prototype.set=function(e,t){var r=this.__data__,n=Tn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function wn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}wn.prototype.clear=function(){this.size=0,this.__data__={hash:new yn,map:new(Qr||gn),string:new yn}},wn.prototype.delete=function(e){var t=Fa(this,e).delete(e);return this.size-=t?1:0,t},wn.prototype.get=function(e){return Fa(this,e).get(e)},wn.prototype.has=function(e){return Fa(this,e).has(e)},wn.prototype.set=function(e,t){var r=Fa(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function kn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new wn;++t<r;)this.add(e[t])}kn.prototype.add=kn.prototype.push=function(e){return this.__data__.set(e,s),this},kn.prototype.has=function(e){return this.__data__.has(e)};function Pn(e){var t=this.__data__=new gn(e);this.size=t.size}Pn.prototype.clear=function(){this.__data__=new gn,this.size=0},Pn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Pn.prototype.get=function(e){return this.__data__.get(e)},Pn.prototype.has=function(e){return this.__data__.has(e)},Pn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof gn){var n=r.__data__;if(!Qr||n.length<o-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new wn(n)}return r.set(e,t),this.size=r.size,this};function jn(e,t){var r=gs(e),n=!r&&ys(e),o=!r&&!n&&js(e),a=!r&&!n&&!o&&Us(e),i=r||n||o||a,s=i?wr(e.length,nt):[],u=s.length;for(var c in e)!t&&!lt.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||$a(c,u))||s.push(c);return s}function xn(e){var t=e.length;return t?e[Po(0,t-1)]:n}function Cn(e,t){return ui(oa(e),Nn(t,0,e.length))}function En(e){return ui(oa(e))}function Sn(e,t,r){(r===n||vs(e[t],r))&&(r!==n||t in e)||An(e,t,r)}function Rn(e,t,r){var o=e[t];lt.call(e,t)&&vs(o,r)&&(r!==n||t in e)||An(e,t,r)}function Tn(e,t){for(var r=e.length;r--;)if(vs(e[r][0],t))return r;return-1}function On(e,t,r,n){return Wn(e,function(e,o,a){t(n,e,r(e),a)}),n}function In(e,t){return e&&aa(t,su(t),e)}function An(e,t,r){"__proto__"==t&&Ut?Ut(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Mn(e,t){for(var o=-1,a=t.length,i=r(a),s=null==e;++o<a;)i[o]=s?n:ru(e,t[o]);return i}function Nn(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Dn(e,t,r,o,a,i){var s,u=t&l,c=t&d,p=t&f;if(r&&(s=a?r(e,o,a,i):r(e)),s!==n)return s;if(!Ts(e))return e;var h=gs(e);if(h){if(s=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&lt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return oa(e,s)}else{var m=qa(e),v=m==K||m==$;if(js(e))return Qo(e,u);if(m==Z||m==U||v&&!a){if(s=c||v?{}:Va(e),!u)return c?(y=e,k=e,g=(w=s)&&aa(k,uu(k),w),aa(y,za(y),g)):(_=e,b=In(s,e),aa(_,Ba(_),b))}else{if(!Ot[m])return a?e:{};s=function(e,t,r,n){var o=e.constructor;switch(t){case ie:return Xo(e);case z:case q:return new o(+e);case se:return function(e,t){var r=t?Xo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case ue:case ce:case le:case de:case fe:case pe:case he:case me:case ve:return ea(e,n);case H:return s=e,sr(n?r(Or(s),l):Or(s),Jt,new s.constructor);case J:case te:return new o(e);case X:return function(e){var t=new e.constructor(e.source,ze.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ee:return i=e,sr(n?r(Mr(i),l):Mr(i),Yt,new i.constructor);case re:return a=e,fn?tt(fn.call(a)):{}}var a,i,s}(e,m,Dn,u)}}var _,b,y,g,w,k;i||(i=new Pn);var P=i.get(e);if(P)return P;i.set(e,s);var j=h?n:(p?c?Aa:Ia:c?uu:su)(e);return Xt(j||e,function(n,o){j&&(n=e[o=n]),Rn(s,o,Dn(n,t,r,o,e,i))}),s}function Ln(e,t,r){var o=r.length;if(null==e)return!o;for(e=tt(e);o--;){var a=r[o],i=t[a],s=e[a];if(s===n&&!(a in e)||!i(s))return!1}return!0}function Fn(e,t,r){if("function"!=typeof e)throw new ot(i);return oi(function(){e.apply(n,r)},t)}function Un(e,t,r,n){var a=-1,i=nr,s=!0,u=e.length,c=[],l=t.length;if(!u)return c;r&&(t=ar(t,kr(r))),n?(i=or,s=!1):t.length>=o&&(i=jr,s=!1,t=new kn(t));e:for(;++a<u;){var d=e[a],f=null==r?d:r(d);if(d=n||0!==d?d:0,s&&f==f){for(var p=l;p--;)if(t[p]===f)continue e;c.push(d)}else i(t,f,n)||c.push(d)}return c}var Wn=ua(Hn),Bn=ua(Jn,!0);function zn(e,t){var r=!0;return Wn(e,function(e,n,o){return r=!!t(e,n,o)}),r}function qn(e,t,r){for(var o=-1,a=e.length;++o<a;){var i=e[o],s=t(i);if(null!=s&&(u===n?s==s&&!Fs(s):r(s,u)))var u=s,c=i}return c}function Gn(e,t){var r=[];return Wn(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r}function Vn(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=Ka),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?Vn(s,t-1,r,n,o):ir(o,s):n||(o[o.length]=s)}return o}var Kn=ca(),$n=ca(!0);function Hn(e,t){return e&&Kn(e,t,su)}function Jn(e,t){return e&&$n(e,t,su)}function Yn(e,t){return rr(t,function(t){return Es(e[t])})}function Zn(e,t){for(var r=0,o=(t=Ho(t,e)).length;null!=e&&r<o;)e=e[li(t[r++])];return r&&r==o?e:n}function Qn(e,t,r){var n=t(e);return gs(e)?n:ir(n,r(e))}function Xn(e){return null==e?e===n?ne:Y:Ft&&Ft in tt(e)?function(e){var t=lt.call(e,Ft),r=e[Ft];try{e[Ft]=n;var o=!0}catch(e){}var a=pt.call(e);return o&&(t?e[Ft]=r:delete e[Ft]),a}(e):(t=e,pt.call(t));var t}function eo(e,t){return e>t}function to(e,t){return null!=e&&lt.call(e,t)}function ro(e,t){return null!=e&&t in tt(e)}function no(e,t,o){for(var a=o?or:nr,i=e[0].length,s=e.length,u=s,c=r(s),l=1/0,d=[];u--;){var f=e[u];u&&t&&(f=ar(f,kr(t))),l=Kr(f.length,l),c[u]=!o&&(t||i>=120&&f.length>=120)?new kn(u&&f):n}f=e[0];var p=-1,h=c[0];e:for(;++p<i&&d.length<l;){var m=f[p],v=t?t(m):m;if(m=o||0!==m?m:0,!(h?jr(h,v):a(d,v,o))){for(u=s;--u;){var _=c[u];if(!(_?jr(_,v):a(e[u],v,o)))continue e}h&&h.push(v),d.push(m)}}return d}function oo(e,t,r){var o=null==(e=ri(e,t=Ho(t,e)))?e:e[li(Pi(t))];return null==o?n:Zt(o,e,r)}function ao(e){return Os(e)&&Xn(e)==U}function io(e,t,r,o,a){return e===t||(null==e||null==t||!Os(e)&&!Os(t)?e!=e&&t!=t:function(e,t,r,o,a,i){var s=gs(e),u=gs(t),c=s?W:qa(e),l=u?W:qa(t),d=(c=c==U?Z:c)==Z,f=(l=l==U?Z:l)==Z,m=c==l;if(m&&js(e)){if(!js(t))return!1;s=!0,d=!1}if(m&&!d)return i||(i=new Pn),s||Us(e)?Ta(e,t,r,o,a,i):function(e,t,r,n,o,a,i){switch(r){case se:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ie:return!(e.byteLength!=t.byteLength||!a(new yt(e),new yt(t)));case z:case q:case J:return vs(+e,+t);case V:return e.name==t.name&&e.message==t.message;case X:case te:return e==t+"";case H:var s=Or;case ee:var u=n&p;if(s||(s=Mr),e.size!=t.size&&!u)return!1;var c=i.get(e);if(c)return c==t;n|=h,i.set(e,t);var l=Ta(s(e),s(t),n,o,a,i);return i.delete(e),l;case re:if(fn)return fn.call(e)==fn.call(t)}return!1}(e,t,c,r,o,a,i);if(!(r&p)){var v=d&&lt.call(e,"__wrapped__"),_=f&&lt.call(t,"__wrapped__");if(v||_){var b=v?e.value():e,y=_?t.value():t;return i||(i=new Pn),a(b,y,r,o,i)}}return!!m&&(i||(i=new Pn),function(e,t,r,o,a,i){var s=r&p,u=Ia(e),c=u.length,l=Ia(t).length;if(c!=l&&!s)return!1;for(var d=c;d--;){var f=u[d];if(!(s?f in t:lt.call(t,f)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var m=!0;i.set(e,t),i.set(t,e);for(var v=s;++d<c;){f=u[d];var _=e[f],b=t[f];if(o)var y=s?o(b,_,f,t,e,i):o(_,b,f,e,t,i);if(!(y===n?_===b||a(_,b,r,o,i):y)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var g=e.constructor,w=t.constructor;g!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof w&&w instanceof w)&&(m=!1)}return i.delete(e),i.delete(t),m}(e,t,r,o,a,i))}(e,t,r,o,io,a))}function so(e,t,r,o){var a=r.length,i=a,s=!o;if(null==e)return!i;for(e=tt(e);a--;){var u=r[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<i;){var c=(u=r[a])[0],l=e[c],d=u[1];if(s&&u[2]){if(l===n&&!(c in e))return!1}else{var f=new Pn;if(o)var m=o(l,d,c,e,t,f);if(!(m===n?io(d,l,p|h,o,f):m))return!1}}return!0}function uo(e){if(!Ts(e)||(t=e,ft&&ft in t))return!1;var t;return(Es(e)?vt:Ve).test(di(e))}function co(e){return"function"==typeof e?e:null==e?Au:"object"==typeof e?gs(e)?vo(e[0],e[1]):mo(e):zu(e)}function lo(e){if(!Qa(e))return Gr(e);var t=[];for(var r in tt(e))lt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function fo(e){if(!Ts(e))return function(e){var t=[];if(null!=e)for(var r in tt(e))t.push(r);return t}(e);var t=Qa(e),r=[];for(var n in e)("constructor"!=n||!t&&lt.call(e,n))&&r.push(n);return r}function po(e,t){return e<t}function ho(e,t){var n=-1,o=ks(e)?r(e.length):[];return Wn(e,function(e,r,a){o[++n]=t(e,r,a)}),o}function mo(e){var t=Ua(e);return 1==t.length&&t[0][2]?ei(t[0][0],t[0][1]):function(r){return r===e||so(r,e,t)}}function vo(e,t){return Ja(e)&&Xa(t)?ei(li(e),t):function(r){var o=ru(r,e);return o===n&&o===t?nu(r,e):io(t,o,p|h)}}function _o(e,t,r,o,a){e!==t&&Kn(t,function(i,s){if(Ts(i))a||(a=new Pn),function(e,t,r,o,a,i,s){var u=e[r],c=t[r],l=s.get(c);if(l)Sn(e,r,l);else{var d=i?i(u,c,r+"",e,t,s):n,f=d===n;if(f){var p=gs(c),h=!p&&js(c),m=!p&&!h&&Us(c);d=c,p||h||m?gs(u)?d=u:Ps(u)?d=oa(u):h?(f=!1,d=Qo(c,!0)):m?(f=!1,d=ea(c,!0)):d=[]:Ms(c)||ys(c)?(d=u,ys(u)?d=$s(u):(!Ts(u)||o&&Es(u))&&(d=Va(c))):f=!1}f&&(s.set(c,d),a(d,c,o,i,s),s.delete(c)),Sn(e,r,d)}}(e,t,s,r,_o,o,a);else{var u=o?o(e[s],i,s+"",e,t,a):n;u===n&&(u=i),Sn(e,s,u)}},uu)}function bo(e,t){var r=e.length;if(r)return $a(t+=t<0?r:0,r)?e[t]:n}function yo(e,t,r){var n=-1;return t=ar(t.length?t:[Au],kr(La())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(ho(e,function(e,r,o){return{criteria:ar(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,i=o.length,s=r.length;++n<i;){var u=ta(o[n],a[n]);if(u){if(n>=s)return u;var c=r[n];return u*("desc"==c?-1:1)}}return e.index-t.index}(e,t,r)})}function go(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=Zn(e,i);r(s,i)&&So(a,Ho(i,e),s)}return a}function wo(e,t,r,n){var o=n?hr:pr,a=-1,i=t.length,s=e;for(e===t&&(t=oa(t)),r&&(s=ar(e,kr(r)));++a<i;)for(var u=0,c=t[a],l=r?r(c):c;(u=o(s,l,u,n))>-1;)s!==e&&It.call(s,u,1),It.call(e,u,1);return e}function ko(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==a){var a=o;$a(o)?It.call(e,o,1):Wo(e,o)}}return e}function Po(e,t){return e+Ur(Jr()*(t-e+1))}function jo(e,t){var r="";if(!e||t<1||t>I)return r;do{t%2&&(r+=e),(t=Ur(t/2))&&(e+=e)}while(t);return r}function xo(e,t){return ai(ti(e,t,Au),e+"")}function Co(e){return xn(vu(e))}function Eo(e,t){var r=vu(e);return ui(r,Nn(t,0,r.length))}function So(e,t,r,o){if(!Ts(e))return e;for(var a=-1,i=(t=Ho(t,e)).length,s=i-1,u=e;null!=u&&++a<i;){var c=li(t[a]),l=r;if(a!=s){var d=u[c];(l=o?o(d,c,u):n)===n&&(l=Ts(d)?d:$a(t[a+1])?[]:{})}Rn(u,c,l),u=u[c]}return e}var Ro=nn?function(e,t){return nn.set(e,t),e}:Au,To=Ut?function(e,t){return Ut(e,"toString",{configurable:!0,enumerable:!1,value:Tu(t),writable:!0})}:Au;function Oo(e){return ui(vu(e))}function Io(e,t,n){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=r(a);++o<a;)i[o]=e[o+t];return i}function Ao(e,t){var r;return Wn(e,function(e,n,o){return!(r=t(e,n,o))}),!!r}function Mo(e,t,r){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=L){for(;n<o;){var a=n+o>>>1,i=e[a];null!==i&&!Fs(i)&&(r?i<=t:i<t)?n=a+1:o=a}return o}return No(e,t,Au,r)}function No(e,t,r,o){t=r(t);for(var a=0,i=null==e?0:e.length,s=t!=t,u=null===t,c=Fs(t),l=t===n;a<i;){var d=Ur((a+i)/2),f=r(e[d]),p=f!==n,h=null===f,m=f==f,v=Fs(f);if(s)var _=o||m;else _=l?m&&(o||p):u?m&&p&&(o||!h):c?m&&p&&!h&&(o||!v):!h&&!v&&(o?f<=t:f<t);_?a=d+1:i=d}return Kr(i,D)}function Do(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var i=e[r],s=t?t(i):i;if(!r||!vs(s,u)){var u=s;a[o++]=0===i?0:i}}return a}function Lo(e){return"number"==typeof e?e:Fs(e)?M:+e}function Fo(e){if("string"==typeof e)return e;if(gs(e))return ar(e,Fo)+"";if(Fs(e))return pn?pn.call(e):"";var t=e+"";return"0"==t&&1/e==-O?"-0":t}function Uo(e,t,r){var n=-1,a=nr,i=e.length,s=!0,u=[],c=u;if(r)s=!1,a=or;else if(i>=o){var l=t?null:ja(e);if(l)return Mr(l);s=!1,a=jr,c=new kn}else c=t?[]:u;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||0!==d?d:0,s&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),u.push(d)}else a(c,f,r)||(c!==u&&c.push(f),u.push(d))}return u}function Wo(e,t){return null==(e=ri(e,t=Ho(t,e)))||delete e[li(Pi(t))]}function Bo(e,t,r,n){return So(e,t,r(Zn(e,t)),n)}function zo(e,t,r,n){for(var o=e.length,a=n?o:-1;(n?a--:++a<o)&&t(e[a],a,e););return r?Io(e,n?0:a,n?a+1:o):Io(e,n?a+1:0,n?o:a)}function qo(e,t){var r=e;return r instanceof bn&&(r=r.value()),sr(t,function(e,t){return t.func.apply(t.thisArg,ir([e],t.args))},r)}function Go(e,t,n){var o=e.length;if(o<2)return o?Uo(e[0]):[];for(var a=-1,i=r(o);++a<o;)for(var s=e[a],u=-1;++u<o;)u!=a&&(i[a]=Un(i[a]||s,e[u],t,n));return Uo(Vn(i,1),t,n)}function Vo(e,t,r){for(var o=-1,a=e.length,i=t.length,s={};++o<a;){var u=o<i?t[o]:n;r(s,e[o],u)}return s}function Ko(e){return Ps(e)?e:[]}function $o(e){return"function"==typeof e?e:Au}function Ho(e,t){return gs(e)?e:Ja(e,t)?[e]:ci(Hs(e))}var Jo=xo;function Yo(e,t,r){var o=e.length;return r=r===n?o:r,!t&&r>=o?e:Io(e,t,r)}var Zo=Bt||function(e){return Lt.clearTimeout(e)};function Qo(e,t){if(t)return e.slice();var r=e.length,n=gt?gt(r):new e.constructor(r);return e.copy(n),n}function Xo(e){var t=new e.constructor(e.byteLength);return new yt(t).set(new yt(e)),t}function ea(e,t){var r=t?Xo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ta(e,t){if(e!==t){var r=e!==n,o=null===e,a=e==e,i=Fs(e),s=t!==n,u=null===t,c=t==t,l=Fs(t);if(!u&&!l&&!i&&e>t||i&&s&&c&&!u&&!l||o&&s&&c||!r&&c||!a)return 1;if(!o&&!i&&!l&&e<t||l&&r&&a&&!o&&!i||u&&r&&a||!s&&a||!c)return-1}return 0}function ra(e,t,n,o){for(var a=-1,i=e.length,s=n.length,u=-1,c=t.length,l=Vr(i-s,0),d=r(c+l),f=!o;++u<c;)d[u]=t[u];for(;++a<s;)(f||a<i)&&(d[n[a]]=e[a]);for(;l--;)d[u++]=e[a++];return d}function na(e,t,n,o){for(var a=-1,i=e.length,s=-1,u=n.length,c=-1,l=t.length,d=Vr(i-u,0),f=r(d+l),p=!o;++a<d;)f[a]=e[a];for(var h=a;++c<l;)f[h+c]=t[c];for(;++s<u;)(p||a<i)&&(f[h+n[s]]=e[a++]);return f}function oa(e,t){var n=-1,o=e.length;for(t||(t=r(o));++n<o;)t[n]=e[n];return t}function aa(e,t,r,o){var a=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var u=t[i],c=o?o(r[u],e[u],u,r,e):n;c===n&&(c=e[u]),a?An(r,u,c):Rn(r,u,c)}return r}function ia(e,t){return function(r,n){var o=gs(r)?Qt:On,a=t?t():{};return o(r,e,La(n,2),a)}}function sa(e){return xo(function(t,r){var o=-1,a=r.length,i=a>1?r[a-1]:n,s=a>2?r[2]:n;for(i=e.length>3&&"function"==typeof i?(a--,i):n,s&&Ha(r[0],r[1],s)&&(i=a<3?n:i,a=1),t=tt(t);++o<a;){var u=r[o];u&&e(t,u,o,i)}return t})}function ua(e,t){return function(r,n){if(null==r)return r;if(!ks(r))return e(r,n);for(var o=r.length,a=t?o:-1,i=tt(r);(t?a--:++a<o)&&!1!==n(i[a],a,i););return r}}function ca(e){return function(t,r,n){for(var o=-1,a=tt(t),i=n(t),s=i.length;s--;){var u=i[e?s:++o];if(!1===r(a[u],u,a))break}return t}}function la(e){return function(t){var r=Tr(t=Hs(t))?Dr(t):n,o=r?r[0]:t.charAt(0),a=r?Yo(r,1).join(""):t.slice(1);return o[e]()+a}}function da(e){return function(t){return sr(Eu(yu(t).replace(kt,"")),e,"")}}function fa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=mn(e.prototype),n=e.apply(r,t);return Ts(n)?n:r}}function pa(e){return function(t,r,o){var a=tt(t);if(!ks(t)){var i=La(r,3);t=su(t),r=function(e){return i(a[e],e,a)}}var s=e(t,r,o);return s>-1?a[i?t[s]:s]:n}}function ha(e){return Oa(function(t){var r=t.length,o=r,a=_n.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new ot(i);if(a&&!u&&"wrapper"==Na(s))var u=new _n([],!0)}for(o=u?o:r;++o<r;){var c=Na(s=t[o]),l="wrapper"==c?Ma(s):n;u=l&&Ya(l[0])&&l[1]==(k|b|g|P)&&!l[4].length&&1==l[9]?u[Na(l[0])].apply(u,l[3]):1==s.length&&Ya(s)?u[c]():u.thru(s)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&gs(n))return u.plant(n).value();for(var o=0,a=r?t[o].apply(this,e):n;++o<r;)a=t[o].call(this,a);return a}})}function ma(e,t,o,a,i,s,u,c,l,d){var f=t&k,p=t&m,h=t&v,_=t&(b|y),g=t&j,w=h?n:fa(e);function P(){for(var m=arguments.length,v=r(m),b=m;b--;)v[b]=arguments[b];if(_)var y=Da(P),k=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,y);if(a&&(v=ra(v,a,i,_)),s&&(v=na(v,s,u,_)),m-=k,_&&m<d){var j=Ar(v,y);return ka(e,t,ma,P.placeholder,o,v,j,c,l,d-m)}var x=p?o:this,C=h?x[e]:e;return m=v.length,c?v=function(e,t){for(var r=e.length,o=Kr(t.length,r),a=oa(e);o--;){var i=t[o];e[o]=$a(i,r)?a[i]:n}return e}(v,c):g&&m>1&&v.reverse(),f&&l<m&&(v.length=l),this&&this!==Lt&&this instanceof P&&(C=w||fa(C)),C.apply(x,v)}return P}function va(e,t){return function(r,n){return o=r,a=e,i=t(n),s={},Hn(o,function(e,t,r){a(s,i(e),t,r)}),s;var o,a,i,s}}function _a(e,t){return function(r,o){var a;if(r===n&&o===n)return t;if(r!==n&&(a=r),o!==n){if(a===n)return o;"string"==typeof r||"string"==typeof o?(r=Fo(r),o=Fo(o)):(r=Lo(r),o=Lo(o)),a=e(r,o)}return a}}function ba(e){return Oa(function(t){return t=ar(t,kr(La())),xo(function(r){var n=this;return e(t,function(e){return Zt(e,n,r)})})})}function ya(e,t){var r=(t=t===n?" ":Fo(t)).length;if(r<2)return r?jo(t,e):t;var o=jo(t,br(e/Nr(t)));return Tr(t)?Yo(Dr(o),0,e).join(""):o.slice(0,e)}function ga(e){return function(t,o,a){return a&&"number"!=typeof a&&Ha(t,o,a)&&(o=a=n),t=qs(t),o===n?(o=t,t=0):o=qs(o),function(e,t,n,o){for(var a=-1,i=Vr(br((t-e)/(n||1)),0),s=r(i);i--;)s[o?i:++a]=e,e+=n;return s}(t,o,a=a===n?t<o?1:-1:qs(a),e)}}function wa(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Ks(t),r=Ks(r)),e(t,r)}}function ka(e,t,r,o,a,i,s,u,c,l){var d=t&b;t|=d?g:w,(t&=~(d?w:g))&_||(t&=~(m|v));var f=[e,t,a,d?i:n,d?s:n,d?n:i,d?n:s,u,c,l],p=r.apply(n,f);return Ya(e)&&ni(p,f),p.placeholder=o,ii(p,e,t)}function Pa(e){var t=et[e];return function(e,r){if(e=Ks(e),r=null==r?0:Kr(Gs(r),292)){var n=(Hs(e)+"e").split("e");return+((n=(Hs(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var ja=en&&1/Mr(new en([,-0]))[1]==O?function(e){return new en(e)}:Fu;function xa(e){return function(t){var r=qa(t);return r==H?Or(t):r==ee?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(t):(n=t,ar(e(t),function(e){return[e,n[e]]}));var n}}function Ca(e,t,o,a,s,u,l,d){var f=t&v;if(!f&&"function"!=typeof e)throw new ot(i);var p=a?a.length:0;if(p||(t&=~(g|w),a=s=n),l=l===n?l:Vr(Gs(l),0),d=d===n?d:Gs(d),p-=s?s.length:0,t&w){var h=a,j=s;a=s=n}var x=f?n:Ma(e),C=[e,t,o,a,s,h,j,u,l,d];if(x&&function(e,t){var r=e[1],n=t[1],o=r|n,a=o<(m|v|k),i=n==k&&r==b||n==k&&r==P&&e[7].length<=t[8]||n==(k|P)&&t[7].length<=t[8]&&r==b;if(!a&&!i)return e;n&m&&(e[2]=t[2],o|=r&m?0:_);var s=t[3];if(s){var u=e[3];e[3]=u?ra(u,s,t[4]):s,e[4]=u?Ar(e[3],c):t[4]}(s=t[5])&&(u=e[5],e[5]=u?na(u,s,t[6]):s,e[6]=u?Ar(e[5],c):t[6]),(s=t[7])&&(e[7]=s),n&k&&(e[8]=null==e[8]?t[8]:Kr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(C,x),e=C[0],t=C[1],o=C[2],a=C[3],s=C[4],!(d=C[9]=C[9]===n?f?0:e.length:Vr(C[9]-p,0))&&t&(b|y)&&(t&=~(b|y)),t&&t!=m)E=t==b||t==y?function(e,t,o){var a=fa(e);function i(){for(var s=arguments.length,u=r(s),c=s,l=Da(i);c--;)u[c]=arguments[c];var d=s<3&&u[0]!==l&&u[s-1]!==l?[]:Ar(u,l);return(s-=d.length)<o?ka(e,t,ma,i.placeholder,n,u,d,n,n,o-s):Zt(this&&this!==Lt&&this instanceof i?a:e,this,u)}return i}(e,t,d):t!=g&&t!=(m|g)||s.length?ma.apply(n,C):function(e,t,n,o){var a=t&m,i=fa(e);function s(){for(var t=-1,u=arguments.length,c=-1,l=o.length,d=r(l+u),f=this&&this!==Lt&&this instanceof s?i:e;++c<l;)d[c]=o[c];for(;u--;)d[c++]=arguments[++t];return Zt(f,a?n:this,d)}return s}(e,t,o,a);else var E=function(e,t,r){var n=t&m,o=fa(e);function a(){return(this&&this!==Lt&&this instanceof a?o:e).apply(n?r:this,arguments)}return a}(e,t,o);return ii((x?Ro:ni)(E,C),e,t)}function Ea(e,t,r,o){return e===n||vs(e,st[r])&&!lt.call(o,r)?t:e}function Sa(e,t,r,o,a,i){return Ts(e)&&Ts(t)&&(i.set(t,e),_o(e,t,n,Sa,i),i.delete(t)),e}function Ra(e){return Ms(e)?n:e}function Ta(e,t,r,o,a,i){var s=r&p,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=i.get(e);if(l&&i.get(t))return l==t;var d=-1,f=!0,m=r&h?new kn:n;for(i.set(e,t),i.set(t,e);++d<u;){var v=e[d],_=t[d];if(o)var b=s?o(_,v,d,t,e,i):o(v,_,d,e,t,i);if(b!==n){if(b)continue;f=!1;break}if(m){if(!cr(t,function(e,t){if(!jr(m,t)&&(v===e||a(v,e,r,o,i)))return m.push(t)})){f=!1;break}}else if(v!==_&&!a(v,_,r,o,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Oa(e){return ai(ti(e,n,bi),e+"")}function Ia(e){return Qn(e,su,Ba)}function Aa(e){return Qn(e,uu,za)}var Ma=nn?function(e){return nn.get(e)}:Fu;function Na(e){for(var t=e.name+"",r=on[t],n=lt.call(on,t)?r.length:0;n--;){var o=r[n],a=o.func;if(null==a||a==e)return o.name}return t}function Da(e){return(lt.call(hn,"placeholder")?hn:e).placeholder}function La(){var e=hn.iteratee||Mu;return e=e===Mu?co:e,arguments.length?e(arguments[0],arguments[1]):e}function Fa(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Ua(e){for(var t=su(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Xa(o)]}return t}function Wa(e,t){var r,o,a=(r=e,o=t,null==r?n:r[o]);return uo(a)?a:n}var Ba=Wr?function(e){return null==e?[]:(e=tt(e),rr(Wr(e),function(t){return Ct.call(e,t)}))}:Vu,za=Wr?function(e){for(var t=[];e;)ir(t,Ba(e)),e=wt(e);return t}:Vu,qa=Xn;(Zr&&qa(new Zr(new ArrayBuffer(1)))!=se||Qr&&qa(new Qr)!=H||Xr&&"[object Promise]"!=qa(Xr.resolve())||en&&qa(new en)!=ee||tn&&qa(new tn)!=oe)&&(qa=function(e){var t=Xn(e),r=t==Z?e.constructor:n,o=r?di(r):"";if(o)switch(o){case an:return se;case sn:return H;case un:return"[object Promise]";case cn:return ee;case ln:return oe}return t});function Ga(e,t,r){for(var n=-1,o=(t=Ho(t,e)).length,a=!1;++n<o;){var i=li(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&Rs(o)&&$a(i,o)&&(gs(e)||ys(e))}function Va(e){return"function"!=typeof e.constructor||Qa(e)?{}:mn(wt(e))}function Ka(e){return gs(e)||ys(e)||!!(Nt&&e&&e[Nt])}function $a(e,t){return!!(t=null==t?I:t)&&("number"==typeof e||$e.test(e))&&e>-1&&e%1==0&&e<t}function Ha(e,t,r){if(!Ts(r))return!1;var n=typeof t;return!!("number"==n?ks(r)&&$a(t,r.length):"string"==n&&t in r)&&vs(r[t],e)}function Ja(e,t){if(gs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Fs(e))||Se.test(e)||!Ee.test(e)||null!=t&&e in tt(t)}function Ya(e){var t=Na(e),r=hn[t];if("function"!=typeof r||!(t in bn.prototype))return!1;if(e===r)return!0;var n=Ma(r);return!!n&&e===n[0]}var Za=ut?Es:Ku;function Qa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function Xa(e){return e==e&&!Ts(e)}function ei(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in tt(r))}}function ti(e,t,o){return t=Vr(t===n?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Vr(n.length-t,0),s=r(i);++a<i;)s[a]=n[t+a];a=-1;for(var u=r(t+1);++a<t;)u[a]=n[a];return u[t]=o(s),Zt(e,this,u)}}function ri(e,t){return t.length<2?e:Zn(e,Io(t,0,-1))}var ni=si(Ro),oi=lr||function(e,t){return Lt.setTimeout(e,t)},ai=si(To);function ii(e,t,r){var n=t+"";return ai(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(De,"{\n/* [wrapped with "+t+"] */\n")}(n,(o=function(e){var t=e.match(Le);return t?t[1].split(Fe):[]}(n),a=r,Xt(F,function(e){var t="_."+e[0];a&e[1]&&!nr(o,t)&&o.push(t)}),o.sort())));var o,a}function si(e){var t=0,r=0;return function(){var o=$r(),a=S-(o-r);if(r=o,a>0){if(++t>=E)return arguments[0]}else t=0;return e.apply(n,arguments)}}function ui(e,t){var r=-1,o=e.length,a=o-1;for(t=t===n?o:t;++r<t;){var i=Po(r,a),s=e[i];e[i]=e[r],e[r]=s}return e.length=t,e}var ci=function(e){var t=ls(e,function(e){return r.size===u&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return Re.test(e)&&t.push(""),e.replace(Te,function(e,r,n,o){t.push(n?o.replace(We,"$1"):r||e)}),t});function li(e){if("string"==typeof e||Fs(e))return e;var t=e+"";return"0"==t&&1/e==-O?"-0":t}function di(e){if(null!=e){try{return ct.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function fi(e){if(e instanceof bn)return e.clone();var t=new _n(e.__wrapped__,e.__chain__);return t.__actions__=oa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var pi=xo(function(e,t){return Ps(e)?Un(e,Vn(t,1,Ps,!0)):[]}),hi=xo(function(e,t){var r=Pi(t);return Ps(r)&&(r=n),Ps(e)?Un(e,Vn(t,1,Ps,!0),La(r,2)):[]}),mi=xo(function(e,t){var r=Pi(t);return Ps(r)&&(r=n),Ps(e)?Un(e,Vn(t,1,Ps,!0),n,r):[]});function vi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:Gs(r);return o<0&&(o=Vr(n+o,0)),fr(e,La(t,3),o)}function _i(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var a=o-1;return r!==n&&(a=Gs(r),a=r<0?Vr(o+a,0):Kr(a,o-1)),fr(e,La(t,3),a,!0)}function bi(e){return null!=e&&e.length?Vn(e,1):[]}function yi(e){return e&&e.length?e[0]:n}var gi=xo(function(e){var t=ar(e,Ko);return t.length&&t[0]===e[0]?no(t):[]}),wi=xo(function(e){var t=Pi(e),r=ar(e,Ko);return t===Pi(r)?t=n:r.pop(),r.length&&r[0]===e[0]?no(r,La(t,2)):[]}),ki=xo(function(e){var t=Pi(e),r=ar(e,Ko);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?no(r,n,t):[]});function Pi(e){var t=null==e?0:e.length;return t?e[t-1]:n}var ji=xo(xi);function xi(e,t){return e&&e.length&&t&&t.length?wo(e,t):e}var Ci=Oa(function(e,t){var r=null==e?0:e.length,n=Mn(e,t);return ko(e,ar(t,function(e){return $a(e,r)?+e:e}).sort(ta)),n});function Ei(e){return null==e?e:Yr.call(e)}var Si=xo(function(e){return Uo(Vn(e,1,Ps,!0))}),Ri=xo(function(e){var t=Pi(e);return Ps(t)&&(t=n),Uo(Vn(e,1,Ps,!0),La(t,2))}),Ti=xo(function(e){var t=Pi(e);return t="function"==typeof t?t:n,Uo(Vn(e,1,Ps,!0),n,t)});function Oi(e){if(!e||!e.length)return[];var t=0;return e=rr(e,function(e){if(Ps(e))return t=Vr(e.length,t),!0}),wr(t,function(t){return ar(e,_r(t))})}function Ii(e,t){if(!e||!e.length)return[];var r=Oi(e);return null==t?r:ar(r,function(e){return Zt(t,n,e)})}var Ai=xo(function(e,t){return Ps(e)?Un(e,t):[]}),Mi=xo(function(e){return Go(rr(e,Ps))}),Ni=xo(function(e){var t=Pi(e);return Ps(t)&&(t=n),Go(rr(e,Ps),La(t,2))}),Di=xo(function(e){var t=Pi(e);return t="function"==typeof t?t:n,Go(rr(e,Ps),n,t)}),Li=xo(Oi);var Fi=xo(function(e){var t=e.length,r=t>1?e[t-1]:n;return Ii(e,r="function"==typeof r?(e.pop(),r):n)});function Ui(e){var t=hn(e);return t.__chain__=!0,t}function Wi(e,t){return t(e)}var Bi=Oa(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,a=function(t){return Mn(t,e)};return!(t>1||this.__actions__.length)&&o instanceof bn&&$a(r)?((o=o.slice(r,+r+(t?1:0))).__actions__.push({func:Wi,args:[a],thisArg:n}),new _n(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(a)});function zi(){return this}var qi=ia(function(e,t,r){lt.call(e,r)?++e[r]:An(e,r,1)});var Gi=pa(vi),Vi=pa(_i);function Ki(e,t){return(gs(e)?Xt:Wn)(e,La(t,3))}function $i(e,t){return(gs(e)?er:Bn)(e,La(t,3))}var Hi=ia(function(e,t,r){lt.call(e,r)?e[r].push(t):An(e,r,[t])});var Ji=xo(function(e,t,n){var o=-1,a="function"==typeof t,i=ks(e)?r(e.length):[];return Wn(e,function(e){i[++o]=a?Zt(t,e,n):oo(e,t,n)}),i}),Yi=ia(function(e,t,r){An(e,r,t)});function Zi(e,t){return(gs(e)?ar:ho)(e,La(t,3))}var Qi=ia(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var Xi=xo(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Ha(e,t[0],t[1])?t=[]:r>2&&Ha(t[0],t[1],t[2])&&(t=[t[0]]),yo(e,Vn(t,1),[])}),es=zt||function(){return Lt.Date.now()};function ts(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Ca(e,k,n,n,n,n,t)}function rs(e,t){var r;if("function"!=typeof t)throw new ot(i);return e=Gs(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var ns=xo(function(e,t,r){var n=m;if(r.length){var o=Ar(r,Da(ns));n|=g}return Ca(e,n,t,r,o)}),os=xo(function(e,t,r){var n=m|v;if(r.length){var o=Ar(r,Da(os));n|=g}return Ca(t,n,e,r,o)});function as(e,t,r){var o=Ca(e,b,n,n,n,n,n,t=r?n:t);return o.placeholder=as.placeholder,o}function is(e,t,r){var o=Ca(e,y,n,n,n,n,n,t=r?n:t);return o.placeholder=is.placeholder,o}function ss(e,t,r){var o,a,s,u,c,l,d=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new ot(i);t=Ks(t)||0,Ts(r)&&(f=!!r.leading,s=(p="maxWait"in r)?Vr(Ks(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h);function m(t){var r=o,i=a;return o=a=n,d=t,u=e.apply(i,r)}function v(e){var r=e-l;return l===n||r>=t||r<0||p&&e-d>=s}function _(){var e=es();if(v(e))return b(e);c=oi(_,function(e){var r=t-(e-l);return p?Kr(r,s-(e-d)):r}(e))}function b(e){return c=n,h&&o?m(e):(o=a=n,u)}function y(){var e=es(),r=v(e);if(o=arguments,a=this,l=e,r){if(c===n)return d=i=l,c=oi(_,t),f?m(i):u;if(p)return c=oi(_,t),m(l)}var i;return c===n&&(c=oi(_,t)),u}return y.cancel=function(){c!==n&&Zo(c),d=0,o=l=a=c=n},y.flush=function(){return c===n?u:b(es())},y}var us=xo(function(e,t){return Fn(e,1,t)}),cs=xo(function(e,t,r){return Fn(e,Ks(t)||0,r)});function ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(i);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(ls.Cache||wn),r}ls.Cache=wn;function ds(e){if("function"!=typeof e)throw new ot(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var fs=Jo(function(e,t){var r=(t=1==t.length&&gs(t[0])?ar(t[0],kr(La())):ar(Vn(t,1),kr(La()))).length;return xo(function(n){for(var o=-1,a=Kr(n.length,r);++o<a;)n[o]=t[o].call(this,n[o]);return Zt(e,this,n)})}),ps=xo(function(e,t){var r=Ar(t,Da(ps));return Ca(e,g,n,t,r)}),hs=xo(function(e,t){var r=Ar(t,Da(hs));return Ca(e,w,n,t,r)}),ms=Oa(function(e,t){return Ca(e,P,n,n,n,t)});function vs(e,t){return e===t||e!=e&&t!=t}var _s=wa(eo),bs=wa(function(e,t){return e>=t}),ys=ao(function(){return arguments}())?ao:function(e){return Os(e)&&lt.call(e,"callee")&&!Ct.call(e,"callee")},gs=r.isArray,ws=qt?kr(qt):function(e){return Os(e)&&Xn(e)==ie};function ks(e){return null!=e&&Rs(e.length)&&!Es(e)}function Ps(e){return Os(e)&&ks(e)}var js=Br||Ku,xs=Gt?kr(Gt):function(e){return Os(e)&&Xn(e)==q};function Cs(e){if(!Os(e))return!1;var t=Xn(e);return t==V||t==G||"string"==typeof e.message&&"string"==typeof e.name&&!Ms(e)}function Es(e){if(!Ts(e))return!1;var t=Xn(e);return t==K||t==$||t==B||t==Q}function Ss(e){return"number"==typeof e&&e==Gs(e)}function Rs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=I}function Ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Os(e){return null!=e&&"object"==typeof e}var Is=Vt?kr(Vt):function(e){return Os(e)&&qa(e)==H};function As(e){return"number"==typeof e||Os(e)&&Xn(e)==J}function Ms(e){if(!Os(e)||Xn(e)!=Z)return!1;var t=wt(e);if(null===t)return!0;var r=lt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ct.call(r)==ht}var Ns=Kt?kr(Kt):function(e){return Os(e)&&Xn(e)==X};var Ds=$t?kr($t):function(e){return Os(e)&&qa(e)==ee};function Ls(e){return"string"==typeof e||!gs(e)&&Os(e)&&Xn(e)==te}function Fs(e){return"symbol"==typeof e||Os(e)&&Xn(e)==re}var Us=Ht?kr(Ht):function(e){return Os(e)&&Rs(e.length)&&!!Tt[Xn(e)]};var Ws=wa(po),Bs=wa(function(e,t){return e<=t});function zs(e){if(!e)return[];if(ks(e))return Ls(e)?Dr(e):oa(e);if(Dt&&e[Dt])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Dt]());var t=qa(e);return(t==H?Or:t==ee?Mr:vu)(e)}function qs(e){return e?(e=Ks(e))===O||e===-O?(e<0?-1:1)*A:e==e?e:0:0===e?e:0}function Gs(e){var t=qs(e),r=t%1;return t==t?r?t-r:t:0}function Vs(e){return e?Nn(Gs(e),0,N):0}function Ks(e){if("number"==typeof e)return e;if(Fs(e))return M;if(Ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ae,"");var r=Ge.test(e);return r||Ke.test(e)?Mt(e.slice(2),r?2:8):qe.test(e)?M:+e}function $s(e){return aa(e,uu(e))}function Hs(e){return null==e?"":Fo(e)}var Js=sa(function(e,t){if(Qa(t)||ks(t))aa(t,su(t),e);else for(var r in t)lt.call(t,r)&&Rn(e,r,t[r])}),Ys=sa(function(e,t){aa(t,uu(t),e)}),Zs=sa(function(e,t,r,n){aa(t,uu(t),e,n)}),Qs=sa(function(e,t,r,n){aa(t,su(t),e,n)}),Xs=Oa(Mn);var eu=xo(function(e){return e.push(n,Ea),Zt(Zs,n,e)}),tu=xo(function(e){return e.push(n,Sa),Zt(lu,n,e)});function ru(e,t,r){var o=null==e?n:Zn(e,t);return o===n?r:o}function nu(e,t){return null!=e&&Ga(e,t,ro)}var ou=va(function(e,t,r){e[t]=r},Tu(Au)),au=va(function(e,t,r){lt.call(e,t)?e[t].push(r):e[t]=[r]},La),iu=xo(oo);function su(e){return ks(e)?jn(e):lo(e)}function uu(e){return ks(e)?jn(e,!0):fo(e)}var cu=sa(function(e,t,r){_o(e,t,r)}),lu=sa(function(e,t,r,n){_o(e,t,r,n)}),du=Oa(function(e,t){var r={};if(null==e)return r;var n=!1;t=ar(t,function(t){return t=Ho(t,e),n||(n=t.length>1),t}),aa(e,Aa(e),r),n&&(r=Dn(r,l|d|f,Ra));for(var o=t.length;o--;)Wo(r,t[o]);return r});var fu=Oa(function(e,t){return null==e?{}:go(r=e,t,function(e,t){return nu(r,t)});var r});function pu(e,t){if(null==e)return{};var r=ar(Aa(e),function(e){return[e]});return t=La(t),go(e,r,function(e,r){return t(e,r[0])})}var hu=xa(su),mu=xa(uu);function vu(e){return null==e?[]:Pr(e,su(e))}var _u=da(function(e,t,r){return t=t.toLowerCase(),e+(r?bu(t):t)});function bu(e){return Cu(Hs(e).toLowerCase())}function yu(e){return(e=Hs(e))&&e.replace(He,Er).replace(Pt,"")}var gu=da(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),wu=da(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),ku=la("toLowerCase");var Pu=da(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var ju=da(function(e,t,r){return e+(r?" ":"")+Cu(t)});var xu=da(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Cu=la("toUpperCase");function Eu(e,t,r){if(e=Hs(e),(t=r?n:t)===n)return o=e,Et.test(o)?e.match(xt)||[]:e.match(Ue)||[];var o;return e.match(t)||[]}var Su=xo(function(e,t){try{return Zt(e,n,t)}catch(e){return Cs(e)?e:new Qe(e)}}),Ru=Oa(function(e,t){return Xt(t,function(t){t=li(t),An(e,t,ns(e[t],e))}),e});function Tu(e){return function(){return e}}var Ou=ha(),Iu=ha(!0);function Au(e){return e}function Mu(e){return co("function"==typeof e?e:Dn(e,l))}var Nu=xo(function(e,t){return function(r){return oo(r,e,t)}}),Du=xo(function(e,t){return function(r){return oo(e,r,t)}});function Lu(e,t,r){var n=su(t),o=Yn(t,n);null!=r||Ts(t)&&(o.length||!n.length)||(r=t,t=e,e=this,o=Yn(t,su(t)));var a=!(Ts(r)&&"chain"in r&&!r.chain),i=Es(e);return Xt(o,function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__);return(r.__actions__=oa(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,ir([this.value()],arguments))})}),e}function Fu(){}var Uu=ba(ar),Wu=ba(tr),Bu=ba(cr);function zu(e){return Ja(e)?_r(li(e)):(t=e,function(e){return Zn(e,t)});var t}var qu=ga(),Gu=ga(!0);function Vu(){return[]}function Ku(){return!1}var $u=_a(function(e,t){return e+t},0),Hu=Pa("ceil"),Ju=_a(function(e,t){return e/t},1),Yu=Pa("floor");var Zu=_a(function(e,t){return e*t},1),Qu=Pa("round"),Xu=_a(function(e,t){return e-t},0);return hn.after=function(e,t){if("function"!=typeof t)throw new ot(i);return e=Gs(e),function(){if(--e<1)return t.apply(this,arguments)}},hn.ary=ts,hn.assign=Js,hn.assignIn=Ys,hn.assignInWith=Zs,hn.assignWith=Qs,hn.at=Xs,hn.before=rs,hn.bind=ns,hn.bindAll=Ru,hn.bindKey=os,hn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return gs(e)?e:[e]},hn.chain=Ui,hn.chunk=function(e,t,o){t=(o?Ha(e,t,o):t===n)?1:Vr(Gs(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var i=0,s=0,u=r(br(a/t));i<a;)u[s++]=Io(e,i,i+=t);return u},hn.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var a=e[t];a&&(o[n++]=a)}return o},hn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return ir(gs(n)?oa(n):[n],Vn(t,1))},hn.cond=function(e){var t=null==e?0:e.length,r=La();return e=t?ar(e,function(e){if("function"!=typeof e[1])throw new ot(i);return[r(e[0]),e[1]]}):[],xo(function(r){for(var n=-1;++n<t;){var o=e[n];if(Zt(o[0],this,r))return Zt(o[1],this,r)}})},hn.conforms=function(e){return function(e){var t=su(e);return function(r){return Ln(r,e,t)}}(Dn(e,l))},hn.constant=Tu,hn.countBy=qi,hn.create=function(e,t){var r=mn(e);return null==t?r:In(r,t)},hn.curry=as,hn.curryRight=is,hn.debounce=ss,hn.defaults=eu,hn.defaultsDeep=tu,hn.defer=us,hn.delay=cs,hn.difference=pi,hn.differenceBy=hi,hn.differenceWith=mi,hn.drop=function(e,t,r){var o=null==e?0:e.length;return o?Io(e,(t=r||t===n?1:Gs(t))<0?0:t,o):[]},hn.dropRight=function(e,t,r){var o=null==e?0:e.length;return o?Io(e,0,(t=o-(t=r||t===n?1:Gs(t)))<0?0:t):[]},hn.dropRightWhile=function(e,t){return e&&e.length?zo(e,La(t,3),!0,!0):[]},hn.dropWhile=function(e,t){return e&&e.length?zo(e,La(t,3),!0):[]},hn.fill=function(e,t,r,o){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&Ha(e,t,r)&&(r=0,o=a),function(e,t,r,o){var a=e.length;for((r=Gs(r))<0&&(r=-r>a?0:a+r),(o=o===n||o>a?a:Gs(o))<0&&(o+=a),o=r>o?0:Vs(o);r<o;)e[r++]=t;return e}(e,t,r,o)):[]},hn.filter=function(e,t){return(gs(e)?rr:Gn)(e,La(t,3))},hn.flatMap=function(e,t){return Vn(Zi(e,t),1)},hn.flatMapDeep=function(e,t){return Vn(Zi(e,t),O)},hn.flatMapDepth=function(e,t,r){return r=r===n?1:Gs(r),Vn(Zi(e,t),r)},hn.flatten=bi,hn.flattenDeep=function(e){return null!=e&&e.length?Vn(e,O):[]},hn.flattenDepth=function(e,t){return null!=e&&e.length?Vn(e,t=t===n?1:Gs(t)):[]},hn.flip=function(e){return Ca(e,j)},hn.flow=Ou,hn.flowRight=Iu,hn.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n},hn.functions=function(e){return null==e?[]:Yn(e,su(e))},hn.functionsIn=function(e){return null==e?[]:Yn(e,uu(e))},hn.groupBy=Hi,hn.initial=function(e){return null!=e&&e.length?Io(e,0,-1):[]},hn.intersection=gi,hn.intersectionBy=wi,hn.intersectionWith=ki,hn.invert=ou,hn.invertBy=au,hn.invokeMap=Ji,hn.iteratee=Mu,hn.keyBy=Yi,hn.keys=su,hn.keysIn=uu,hn.map=Zi,hn.mapKeys=function(e,t){var r={};return t=La(t,3),Hn(e,function(e,n,o){An(r,t(e,n,o),e)}),r},hn.mapValues=function(e,t){var r={};return t=La(t,3),Hn(e,function(e,n,o){An(r,n,t(e,n,o))}),r},hn.matches=function(e){return mo(Dn(e,l))},hn.matchesProperty=function(e,t){return vo(e,Dn(t,l))},hn.memoize=ls,hn.merge=cu,hn.mergeWith=lu,hn.method=Nu,hn.methodOf=Du,hn.mixin=Lu,hn.negate=ds,hn.nthArg=function(e){return e=Gs(e),xo(function(t){return bo(t,e)})},hn.omit=du,hn.omitBy=function(e,t){return pu(e,ds(La(t)))},hn.once=function(e){return rs(2,e)},hn.orderBy=function(e,t,r,o){return null==e?[]:(gs(t)||(t=null==t?[]:[t]),gs(r=o?n:r)||(r=null==r?[]:[r]),yo(e,t,r))},hn.over=Uu,hn.overArgs=fs,hn.overEvery=Wu,hn.overSome=Bu,hn.partial=ps,hn.partialRight=hs,hn.partition=Qi,hn.pick=fu,hn.pickBy=pu,hn.property=zu,hn.propertyOf=function(e){return function(t){return null==e?n:Zn(e,t)}},hn.pull=ji,hn.pullAll=xi,hn.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?wo(e,t,La(r,2)):e},hn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?wo(e,t,n,r):e},hn.pullAt=Ci,hn.range=qu,hn.rangeRight=Gu,hn.rearg=ms,hn.reject=function(e,t){return(gs(e)?rr:Gn)(e,ds(La(t,3)))},hn.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],a=e.length;for(t=La(t,3);++n<a;){var i=e[n];t(i,n,e)&&(r.push(i),o.push(n))}return ko(e,o),r},hn.rest=function(e,t){if("function"!=typeof e)throw new ot(i);return xo(e,t=t===n?t:Gs(t))},hn.reverse=Ei,hn.sampleSize=function(e,t,r){return t=(r?Ha(e,t,r):t===n)?1:Gs(t),(gs(e)?Cn:Eo)(e,t)},hn.set=function(e,t,r){return null==e?e:So(e,t,r)},hn.setWith=function(e,t,r,o){return o="function"==typeof o?o:n,null==e?e:So(e,t,r,o)},hn.shuffle=function(e){return(gs(e)?En:Oo)(e)},hn.slice=function(e,t,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Ha(e,t,r)?(t=0,r=o):(t=null==t?0:Gs(t),r=r===n?o:Gs(r)),Io(e,t,r)):[]},hn.sortBy=Xi,hn.sortedUniq=function(e){return e&&e.length?Do(e):[]},hn.sortedUniqBy=function(e,t){return e&&e.length?Do(e,La(t,2)):[]},hn.split=function(e,t,r){return r&&"number"!=typeof r&&Ha(e,t,r)&&(t=r=n),(r=r===n?N:r>>>0)?(e=Hs(e))&&("string"==typeof t||null!=t&&!Ns(t))&&!(t=Fo(t))&&Tr(e)?Yo(Dr(e),0,r):e.split(t,r):[]},hn.spread=function(e,t){if("function"!=typeof e)throw new ot(i);return t=null==t?0:Vr(Gs(t),0),xo(function(r){var n=r[t],o=Yo(r,0,t);return n&&ir(o,n),Zt(e,this,o)})},hn.tail=function(e){var t=null==e?0:e.length;return t?Io(e,1,t):[]},hn.take=function(e,t,r){return e&&e.length?Io(e,0,(t=r||t===n?1:Gs(t))<0?0:t):[]},hn.takeRight=function(e,t,r){var o=null==e?0:e.length;return o?Io(e,(t=o-(t=r||t===n?1:Gs(t)))<0?0:t,o):[]},hn.takeRightWhile=function(e,t){return e&&e.length?zo(e,La(t,3),!1,!0):[]},hn.takeWhile=function(e,t){return e&&e.length?zo(e,La(t,3)):[]},hn.tap=function(e,t){return t(e),e},hn.throttle=function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new ot(i);return Ts(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),ss(e,t,{leading:n,maxWait:t,trailing:o})},hn.thru=Wi,hn.toArray=zs,hn.toPairs=hu,hn.toPairsIn=mu,hn.toPath=function(e){return gs(e)?ar(e,li):Fs(e)?[e]:oa(ci(Hs(e)))},hn.toPlainObject=$s,hn.transform=function(e,t,r){var n=gs(e),o=n||js(e)||Us(e);if(t=La(t,4),null==r){var a=e&&e.constructor;r=o?n?new a:[]:Ts(e)&&Es(a)?mn(wt(e)):{}}return(o?Xt:Hn)(e,function(e,n,o){return t(r,e,n,o)}),r},hn.unary=function(e){return ts(e,1)},hn.union=Si,hn.unionBy=Ri,hn.unionWith=Ti,hn.uniq=function(e){return e&&e.length?Uo(e):[]},hn.uniqBy=function(e,t){return e&&e.length?Uo(e,La(t,2)):[]},hn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?Uo(e,n,t):[]},hn.unset=function(e,t){return null==e||Wo(e,t)},hn.unzip=Oi,hn.unzipWith=Ii,hn.update=function(e,t,r){return null==e?e:Bo(e,t,$o(r))},hn.updateWith=function(e,t,r,o){return o="function"==typeof o?o:n,null==e?e:Bo(e,t,$o(r),o)},hn.values=vu,hn.valuesIn=function(e){return null==e?[]:Pr(e,uu(e))},hn.without=Ai,hn.words=Eu,hn.wrap=function(e,t){return ps($o(t),e)},hn.xor=Mi,hn.xorBy=Ni,hn.xorWith=Di,hn.zip=Li,hn.zipObject=function(e,t){return Vo(e||[],t||[],Rn)},hn.zipObjectDeep=function(e,t){return Vo(e||[],t||[],So)},hn.zipWith=Fi,hn.entries=hu,hn.entriesIn=mu,hn.extend=Ys,hn.extendWith=Zs,Lu(hn,hn),hn.add=$u,hn.attempt=Su,hn.camelCase=_u,hn.capitalize=bu,hn.ceil=Hu,hn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=Ks(r))==r?r:0),t!==n&&(t=(t=Ks(t))==t?t:0),Nn(Ks(e),t,r)},hn.clone=function(e){return Dn(e,f)},hn.cloneDeep=function(e){return Dn(e,l|f)},hn.cloneDeepWith=function(e,t){return Dn(e,l|f,t="function"==typeof t?t:n)},hn.cloneWith=function(e,t){return Dn(e,f,t="function"==typeof t?t:n)},hn.conformsTo=function(e,t){return null==t||Ln(e,t,su(t))},hn.deburr=yu,hn.defaultTo=function(e,t){return null==e||e!=e?t:e},hn.divide=Ju,hn.endsWith=function(e,t,r){e=Hs(e),t=Fo(t);var o=e.length,a=r=r===n?o:Nn(Gs(r),0,o);return(r-=t.length)>=0&&e.slice(r,a)==t},hn.eq=vs,hn.escape=function(e){return(e=Hs(e))&&Pe.test(e)?e.replace(we,Sr):e},hn.escapeRegExp=function(e){return(e=Hs(e))&&Ie.test(e)?e.replace(Oe,"\\$&"):e},hn.every=function(e,t,r){var o=gs(e)?tr:zn;return r&&Ha(e,t,r)&&(t=n),o(e,La(t,3))},hn.find=Gi,hn.findIndex=vi,hn.findKey=function(e,t){return dr(e,La(t,3),Hn)},hn.findLast=Vi,hn.findLastIndex=_i,hn.findLastKey=function(e,t){return dr(e,La(t,3),Jn)},hn.floor=Yu,hn.forEach=Ki,hn.forEachRight=$i,hn.forIn=function(e,t){return null==e?e:Kn(e,La(t,3),uu)},hn.forInRight=function(e,t){return null==e?e:$n(e,La(t,3),uu)},hn.forOwn=function(e,t){return e&&Hn(e,La(t,3))},hn.forOwnRight=function(e,t){return e&&Jn(e,La(t,3))},hn.get=ru,hn.gt=_s,hn.gte=bs,hn.has=function(e,t){return null!=e&&Ga(e,t,to)},hn.hasIn=nu,hn.head=yi,hn.identity=Au,hn.includes=function(e,t,r,n){e=ks(e)?e:vu(e),r=r&&!n?Gs(r):0;var o=e.length;return r<0&&(r=Vr(o+r,0)),Ls(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&pr(e,t,r)>-1},hn.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:Gs(r);return o<0&&(o=Vr(n+o,0)),pr(e,t,o)},hn.inRange=function(e,t,r){return t=qs(t),r===n?(r=t,t=0):r=qs(r),e=Ks(e),(o=e)>=Kr(a=t,i=r)&&o<Vr(a,i);var o,a,i},hn.invoke=iu,hn.isArguments=ys,hn.isArray=gs,hn.isArrayBuffer=ws,hn.isArrayLike=ks,hn.isArrayLikeObject=Ps,hn.isBoolean=function(e){return!0===e||!1===e||Os(e)&&Xn(e)==z},hn.isBuffer=js,hn.isDate=xs,hn.isElement=function(e){return Os(e)&&1===e.nodeType&&!Ms(e)},hn.isEmpty=function(e){if(null==e)return!0;if(ks(e)&&(gs(e)||"string"==typeof e||"function"==typeof e.splice||js(e)||Us(e)||ys(e)))return!e.length;var t=qa(e);if(t==H||t==ee)return!e.size;if(Qa(e))return!lo(e).length;for(var r in e)if(lt.call(e,r))return!1;return!0},hn.isEqual=function(e,t){return io(e,t)},hn.isEqualWith=function(e,t,r){var o=(r="function"==typeof r?r:n)?r(e,t):n;return o===n?io(e,t,n,r):!!o},hn.isError=Cs,hn.isFinite=function(e){return"number"==typeof e&&zr(e)},hn.isFunction=Es,hn.isInteger=Ss,hn.isLength=Rs,hn.isMap=Is,hn.isMatch=function(e,t){return e===t||so(e,t,Ua(t))},hn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,so(e,t,Ua(t),r)},hn.isNaN=function(e){return As(e)&&e!=+e},hn.isNative=function(e){if(Za(e))throw new Qe(a);return uo(e)},hn.isNil=function(e){return null==e},hn.isNull=function(e){return null===e},hn.isNumber=As,hn.isObject=Ts,hn.isObjectLike=Os,hn.isPlainObject=Ms,hn.isRegExp=Ns,hn.isSafeInteger=function(e){return Ss(e)&&e>=-I&&e<=I},hn.isSet=Ds,hn.isString=Ls,hn.isSymbol=Fs,hn.isTypedArray=Us,hn.isUndefined=function(e){return e===n},hn.isWeakMap=function(e){return Os(e)&&qa(e)==oe},hn.isWeakSet=function(e){return Os(e)&&Xn(e)==ae},hn.join=function(e,t){return null==e?"":qr.call(e,t)},hn.kebabCase=gu,hn.last=Pi,hn.lastIndexOf=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var a=o;return r!==n&&(a=(a=Gs(r))<0?Vr(o+a,0):Kr(a,o-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,a):fr(e,mr,a,!0)},hn.lowerCase=wu,hn.lowerFirst=ku,hn.lt=Ws,hn.lte=Bs,hn.max=function(e){return e&&e.length?qn(e,Au,eo):n},hn.maxBy=function(e,t){return e&&e.length?qn(e,La(t,2),eo):n},hn.mean=function(e){return vr(e,Au)},hn.meanBy=function(e,t){return vr(e,La(t,2))},hn.min=function(e){return e&&e.length?qn(e,Au,po):n},hn.minBy=function(e,t){return e&&e.length?qn(e,La(t,2),po):n},hn.stubArray=Vu,hn.stubFalse=Ku,hn.stubObject=function(){return{}},hn.stubString=function(){return""},hn.stubTrue=function(){return!0},hn.multiply=Zu,hn.nth=function(e,t){return e&&e.length?bo(e,Gs(t)):n},hn.noConflict=function(){return Lt._===this&&(Lt._=mt),this},hn.noop=Fu,hn.now=es,hn.pad=function(e,t,r){e=Hs(e);var n=(t=Gs(t))?Nr(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return ya(Ur(o),r)+e+ya(br(o),r)},hn.padEnd=function(e,t,r){e=Hs(e);var n=(t=Gs(t))?Nr(e):0;return t&&n<t?e+ya(t-n,r):e},hn.padStart=function(e,t,r){e=Hs(e);var n=(t=Gs(t))?Nr(e):0;return t&&n<t?ya(t-n,r)+e:e},hn.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Hr(Hs(e).replace(Me,""),t||0)},hn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&Ha(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=qs(e),t===n?(t=e,e=0):t=qs(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var a=Jr();return Kr(e+a*(t-e+At("1e-"+((a+"").length-1))),t)}return Po(e,t)},hn.reduce=function(e,t,r){var n=gs(e)?sr:yr,o=arguments.length<3;return n(e,La(t,4),r,o,Wn)},hn.reduceRight=function(e,t,r){var n=gs(e)?ur:yr,o=arguments.length<3;return n(e,La(t,4),r,o,Bn)},hn.repeat=function(e,t,r){return t=(r?Ha(e,t,r):t===n)?1:Gs(t),jo(Hs(e),t)},hn.replace=function(){var e=arguments,t=Hs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},hn.result=function(e,t,r){var o=-1,a=(t=Ho(t,e)).length;for(a||(a=1,e=n);++o<a;){var i=null==e?n:e[li(t[o])];i===n&&(o=a,i=r),e=Es(i)?i.call(e):i}return e},hn.round=Qu,hn.runInContext=e,hn.sample=function(e){return(gs(e)?xn:Co)(e)},hn.size=function(e){if(null==e)return 0;if(ks(e))return Ls(e)?Nr(e):e.length;var t=qa(e);return t==H||t==ee?e.size:lo(e).length},hn.snakeCase=Pu,hn.some=function(e,t,r){var o=gs(e)?cr:Ao;return r&&Ha(e,t,r)&&(t=n),o(e,La(t,3))},hn.sortedIndex=function(e,t){return Mo(e,t)},hn.sortedIndexBy=function(e,t,r){return No(e,t,La(r,2))},hn.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=Mo(e,t);if(n<r&&vs(e[n],t))return n}return-1},hn.sortedLastIndex=function(e,t){return Mo(e,t,!0)},hn.sortedLastIndexBy=function(e,t,r){return No(e,t,La(r,2),!0)},hn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=Mo(e,t,!0)-1;if(vs(e[r],t))return r}return-1},hn.startCase=ju,hn.startsWith=function(e,t,r){return e=Hs(e),r=null==r?0:Nn(Gs(r),0,e.length),t=Fo(t),e.slice(r,r+t.length)==t},hn.subtract=Xu,hn.sum=function(e){return e&&e.length?gr(e,Au):0},hn.sumBy=function(e,t){return e&&e.length?gr(e,La(t,2)):0},hn.template=function(e,t,r){var o=hn.templateSettings;r&&Ha(e,t,r)&&(t=n),e=Hs(e),t=Zs({},t,o,Ea);var a,i,s=Zs({},t.imports,o.imports,Ea),u=su(s),c=Pr(s,u),l=0,d=t.interpolate||Je,f="__p += '",p=rt((t.escape||Je).source+"|"+d.source+"|"+(d===Ce?Be:Je).source+"|"+(t.evaluate||Je).source+"|$","g"),h="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Rt+"]")+"\n";e.replace(p,function(t,r,n,o,s,u){return n||(n=o),f+=e.slice(l,u).replace(Ye,Rr),r&&(a=!0,f+="' +\n__e("+r+") +\n'"),s&&(i=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+t.length,t}),f+="';\n";var m=t.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(i?f.replace(_e,""):f).replace(be,"$1").replace(ye,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Su(function(){return Xe(u,h+"return "+f).apply(n,c)});if(v.source=f,Cs(v))throw v;return v},hn.times=function(e,t){if((e=Gs(e))<1||e>I)return[];var r=N,n=Kr(e,N);t=La(t),e-=N;for(var o=wr(n,t);++r<e;)t(r);return o},hn.toFinite=qs,hn.toInteger=Gs,hn.toLength=Vs,hn.toLower=function(e){return Hs(e).toLowerCase()},hn.toNumber=Ks,hn.toSafeInteger=function(e){return e?Nn(Gs(e),-I,I):0===e?e:0},hn.toString=Hs,hn.toUpper=function(e){return Hs(e).toUpperCase()},hn.trim=function(e,t,r){if((e=Hs(e))&&(r||t===n))return e.replace(Ae,"");if(!e||!(t=Fo(t)))return e;var o=Dr(e),a=Dr(t);return Yo(o,xr(o,a),Cr(o,a)+1).join("")},hn.trimEnd=function(e,t,r){if((e=Hs(e))&&(r||t===n))return e.replace(Ne,"");if(!e||!(t=Fo(t)))return e;var o=Dr(e);return Yo(o,0,Cr(o,Dr(t))+1).join("")},hn.trimStart=function(e,t,r){if((e=Hs(e))&&(r||t===n))return e.replace(Me,"");if(!e||!(t=Fo(t)))return e;var o=Dr(e);return Yo(o,xr(o,Dr(t))).join("")},hn.truncate=function(e,t){var r=x,o=C;if(Ts(t)){var a="separator"in t?t.separator:a;r="length"in t?Gs(t.length):r,o="omission"in t?Fo(t.omission):o}var i=(e=Hs(e)).length;if(Tr(e)){var s=Dr(e);i=s.length}if(r>=i)return e;var u=r-Nr(o);if(u<1)return o;var c=s?Yo(s,0,u).join(""):e.slice(0,u);if(a===n)return c+o;if(s&&(u+=c.length-u),Ns(a)){if(e.slice(u).search(a)){var l,d=c;for(a.global||(a=rt(a.source,Hs(ze.exec(a))+"g")),a.lastIndex=0;l=a.exec(d);)var f=l.index;c=c.slice(0,f===n?u:f)}}else if(e.indexOf(Fo(a),u)!=u){var p=c.lastIndexOf(a);p>-1&&(c=c.slice(0,p))}return c+o},hn.unescape=function(e){return(e=Hs(e))&&ke.test(e)?e.replace(ge,Lr):e},hn.uniqueId=function(e){var t=++dt;return Hs(e)+t},hn.upperCase=xu,hn.upperFirst=Cu,hn.each=Ki,hn.eachRight=$i,hn.first=yi,Lu(hn,function(){var e={};return Hn(hn,function(t,r){lt.call(hn.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),hn.VERSION="4.17.4",Xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){hn[e].placeholder=hn}),Xt(["drop","take"],function(e,t){bn.prototype[e]=function(r){r=r===n?1:Vr(Gs(r),0);var o=this.__filtered__&&!t?new bn(this):this.clone();return o.__filtered__?o.__takeCount__=Kr(r,o.__takeCount__):o.__views__.push({size:Kr(r,N),type:e+(o.__dir__<0?"Right":"")}),o},bn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Xt(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==R||3==r;bn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:La(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),Xt(["head","last"],function(e,t){var r="take"+(t?"Right":"");bn.prototype[e]=function(){return this[r](1).value()[0]}}),Xt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");bn.prototype[e]=function(){return this.__filtered__?new bn(this):this[r](1)}}),bn.prototype.compact=function(){return this.filter(Au)},bn.prototype.find=function(e){return this.filter(e).head()},bn.prototype.findLast=function(e){return this.reverse().find(e)},bn.prototype.invokeMap=xo(function(e,t){return"function"==typeof e?new bn(this):this.map(function(r){return oo(r,e,t)})}),bn.prototype.reject=function(e){return this.filter(ds(La(e)))},bn.prototype.slice=function(e,t){e=Gs(e);var r=this;return r.__filtered__&&(e>0||t<0)?new bn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=Gs(t))<0?r.dropRight(-t):r.take(t-e)),r)},bn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},bn.prototype.toArray=function(){return this.take(N)},Hn(bn.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=hn[o?"take"+("last"==t?"Right":""):t],i=o||/^find/.test(t);a&&(hn.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,u=t instanceof bn,c=s[0],l=u||gs(t),d=function(e){var t=a.apply(hn,ir([e],s));return o&&f?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,h=i&&!f,m=u&&!p;if(!i&&l){t=m?t:new bn(this);var v=e.apply(t,s);return v.__actions__.push({func:Wi,args:[d],thisArg:n}),new _n(v,f)}return h&&m?e.apply(this,s):(v=this.thru(d),h?o?v.value()[0]:v.value():v)})}),Xt(["pop","push","shift","sort","splice","unshift"],function(e){var t=at[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);hn.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(gs(o)?o:[],e)}return this[r](function(r){return t.apply(gs(r)?r:[],e)})}}),Hn(bn.prototype,function(e,t){var r=hn[t];if(r){var n=r.name+"";(on[n]||(on[n]=[])).push({name:t,func:r})}}),on[ma(n,v).name]=[{name:"wrapper",func:n}],bn.prototype.clone=function(){var e=new bn(this.__wrapped__);return e.__actions__=oa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=oa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=oa(this.__views__),e},bn.prototype.reverse=function(){if(this.__filtered__){var e=new bn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},bn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=gs(e),n=t<0,o=r?e.length:0,a=function(e,t,r){for(var n=-1,o=r.length;++n<o;){var a=r[n],i=a.size;switch(a.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=Kr(t,e+i);break;case"takeRight":e=Vr(e,t-i)}}return{start:e,end:t}}(0,o,this.__views__),i=a.start,s=a.end,u=s-i,c=n?s:i-1,l=this.__iteratees__,d=l.length,f=0,p=Kr(u,this.__takeCount__);if(!r||!n&&o==u&&p==u)return qo(e,this.__actions__);var h=[];e:for(;u--&&f<p;){for(var m=-1,v=e[c+=t];++m<d;){var _=l[m],b=_.iteratee,y=_.type,g=b(v);if(y==T)v=g;else if(!g){if(y==R)continue e;break e}}h[f++]=v}return h},hn.prototype.at=Bi,hn.prototype.chain=function(){return Ui(this)},hn.prototype.commit=function(){return new _n(this.value(),this.__chain__)},hn.prototype.next=function(){this.__values__===n&&(this.__values__=zs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},hn.prototype.plant=function(e){for(var t,r=this;r instanceof vn;){var o=fi(r);o.__index__=0,o.__values__=n,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t},hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof bn){var t=e;return this.__actions__.length&&(t=new bn(this)),(t=t.reverse()).__actions__.push({func:Wi,args:[Ei],thisArg:n}),new _n(t,this.__chain__)}return this.thru(Ei)},hn.prototype.toJSON=hn.prototype.valueOf=hn.prototype.value=function(){return qo(this.__wrapped__,this.__actions__)},hn.prototype.first=hn.prototype.head,Dt&&(hn.prototype[Dt]=zi),hn}();Ut?((Ut.exports=Fr)._=Fr,Ft._=Fr):Lt._=Fr}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],184:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=p(e("babel-runtime/core-js/promise")),o=p(e("babel-runtime/helpers/extends")),a=p(e("babel-runtime/core-js/object/get-prototype-of")),i=p(e("babel-runtime/helpers/classCallCheck")),s=p(e("babel-runtime/helpers/createClass")),u=p(e("babel-runtime/helpers/possibleConstructorReturn")),c=p(e("babel-runtime/helpers/inherits")),l=e("events"),d=p(e("./Logger")),f=e("./errors");function p(e){return e&&e.__esModule?e:{default:e}}var h=new d.default("CommandQueue"),m=function(e){(0,c.default)(t,e);function t(){(0,i.default)(this,t);var e=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return e.setMaxListeners(1/0),e._closed=!1,e._busy=!1,e._queue=[],e}return(0,s.default)(t,[{key:"close",value:function(){this._closed=!0}},{key:"push",value:function(e,t){var r=this,a=(0,o.default)({method:e},t);return h.debug("push() [method:%s]",e),new n.default(function(e,t){var n=r._queue;a.resolve=e,a.reject=t,n.push(a),r._handlePendingCommands()})}},{key:"_handlePendingCommands",value:function(){var e=this;if(!this._busy){var t=this._queue,r=t[0];r&&(this._busy=!0,this._handleCommand(r).then(function(){e._busy=!1,t.shift(),e._handlePendingCommands()}))}}},{key:"_handleCommand",value:function(e){var t=this;if(h.debug("_handleCommand() [method:%s]",e.method),this._closed)return e.reject(new f.InvalidStateError("closed")),n.default.resolve();var r={promise:null};return this.emit("exec",e,r),n.default.resolve().then(function(){return r.promise}).then(function(r){h.debug("_handleCommand() | command succeeded [method:%s]",e.method),t._closed?e.reject(new f.InvalidStateError("closed")):e.resolve(r)}).catch(function(t){h.error("_handleCommand() | command failed [method:%s]: %o",e.method,t),e.reject(t)})}}]),t}(l.EventEmitter);r.default=m},{"./Logger":188,"./errors":193,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/extends":35,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,events:171}],185:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=h(e("babel-runtime/helpers/typeof")),o=h(e("babel-runtime/core-js/promise")),a=h(e("babel-runtime/core-js/object/get-prototype-of")),i=h(e("babel-runtime/helpers/classCallCheck")),s=h(e("babel-runtime/helpers/createClass")),u=h(e("babel-runtime/helpers/possibleConstructorReturn")),c=h(e("babel-runtime/helpers/inherits")),l=h(e("babel-runtime/core-js/set")),d=h(e("./Logger")),f=h(e("./EnhancedEventEmitter")),p=e("./errors");function h(e){return e&&e.__esModule?e:{default:e}}var m=new l.default(["default","low","medium","high"]),v=1e3,_=new d.default("Consumer"),b=function(e){(0,c.default)(t,e);function t(e,r,n,o,s){(0,i.default)(this,t);var c=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,_));return c._id=e,c._closed=!1,c._kind=r,c._rtpParameters=n,c._peer=o,c._appData=s,c._supported=!1,c._transport=null,c._track=null,c._locallyPaused=!1,c._remotelyPaused=!1,c._statsEnabled=!1,c._statsInterval=v,c._preferredProfile="default",c._effectiveProfile=null,c}return(0,s.default)(t,[{key:"close",value:function(){_.debug("close()"),this._closed||(this._closed=!0,this._statsEnabled&&(this._statsEnabled=!1,this.transport&&this.transport.disableConsumerStats(this)),this.emit("@close"),this.safeEmit("close","local"),this._destroy())}},{key:"remoteClose",value:function(){_.debug("remoteClose()"),this._closed||(this._closed=!0,this._transport&&this._transport.removeConsumer(this),this._destroy(),this.emit("@close"),this.safeEmit("close","remote"))}},{key:"_destroy",value:function(){this._transport=null;try{this._track.stop()}catch(e){}this._track=null}},{key:"receive",value:function(e){var t=this;return _.debug("receive() [transport:%o]",e),this._closed?o.default.reject(new p.InvalidStateError("Consumer closed")):this._supported?this._transport?o.default.reject(new Error("already handled by a Transport")):"object"!==(void 0===e?"undefined":(0,n.default)(e))?o.default.reject(new TypeError("invalid Transport")):(this._transport=e,e.addConsumer(this).then(function(r){return t._track=r,t.paused&&(r.enabled=!1),e.once("@close",function(){if(!t._closed&&t._transport===e){t._transport=null;try{t._track.stop()}catch(e){}t._track=null,t.safeEmit("unhandled")}}),t.safeEmit("handled"),t._statsEnabled&&e.enableConsumerStats(t,t._statsInterval),r}).catch(function(e){throw t._transport=null,e})):o.default.reject(new Error("unsupported codecs"))}},{key:"pause",value:function(e){return _.debug("pause()"),this._closed?(_.error("pause() | Consumer closed"),!1):!!this._locallyPaused||(this._locallyPaused=!0,this._track&&(this._track.enabled=!1),this._transport&&this._transport.pauseConsumer(this,e),this.safeEmit("pause","local",e),this.paused)}},{key:"remotePause",value:function(e){_.debug("remotePause()"),this._closed||this._remotelyPaused||(this._remotelyPaused=!0,this._track&&(this._track.enabled=!1),this.safeEmit("pause","remote",e))}},{key:"resume",value:function(e){return _.debug("resume()"),this._closed?(_.error("resume() | Consumer closed"),!1):!this._locallyPaused||(this._locallyPaused=!1,this._track&&!this._remotelyPaused&&(this._track.enabled=!0),this._transport&&this._transport.resumeConsumer(this,e),this.safeEmit("resume","local",e),!this.paused)}},{key:"remoteResume",value:function(e){_.debug("remoteResume()"),!this._closed&&this._remotelyPaused&&(this._remotelyPaused=!1,this._track&&!this._locallyPaused&&(this._track.enabled=!0),this.safeEmit("resume","remote",e))}},{key:"setPreferredProfile",value:function(e){_.debug("setPreferredProfile() [profile:%s]",e),this._closed?_.error("setPreferredProfile() | Consumer closed"):e!==this._preferredProfile&&(m.has(e)?(this._preferredProfile=e,this._transport&&this._transport.setConsumerPreferredProfile(this,this._preferredProfile)):_.error('setPreferredProfile() | invalid profile "%s"',e))}},{key:"remoteSetPreferredProfile",value:function(e){_.debug("remoteSetPreferredProfile() [profile:%s]",e),this._closed||e===this._preferredProfile||(this._preferredProfile=e)}},{key:"remoteEffectiveProfileChanged",value:function(e){_.debug("remoteEffectiveProfileChanged() [profile:%s]",e),this._closed||e===this._effectiveProfile||(this._effectiveProfile=e,this.safeEmit("effectiveprofilechange",this._effectiveProfile))}},{key:"enableStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;_.debug("enableStats() [interval:%s]",e),this._closed?_.error("enableStats() | Consumer closed"):this._statsEnabled||(this._statsInterval="number"!=typeof e||e<1e3?v:e,this._statsEnabled=!0,this._transport&&this._transport.enableConsumerStats(this,this._statsInterval))}},{key:"disableStats",value:function(){_.debug("disableStats()"),this._closed?_.error("disableStats() | Consumer closed"):this._statsEnabled&&(this._statsEnabled=!1,this._transport&&this._transport.disableConsumerStats(this))}},{key:"setSupported",value:function(e){this._supported=e}},{key:"remoteStats",value:function(e){this.safeEmit("stats",e)}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._kind}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"peer",get:function(){return this._peer}},{key:"appData",get:function(){return this._appData}},{key:"supported",get:function(){return this._supported}},{key:"transport",get:function(){return this._transport}},{key:"track",get:function(){return this._track}},{key:"locallyPaused",get:function(){return this._locallyPaused}},{key:"remotelyPaused",get:function(){return this._remotelyPaused}},{key:"paused",get:function(){return this._locallyPaused||this._remotelyPaused}},{key:"preferredProfile",get:function(){return this._preferredProfile}},{key:"effectiveProfile",get:function(){return this._effectiveProfile}}]),t}(f.default);r.default=b},{"./EnhancedEventEmitter":187,"./Logger":188,"./errors":193,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/core-js/set":29,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"babel-runtime/helpers/typeof":40}],186:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=d(e("babel-runtime/helpers/classCallCheck")),o=d(e("babel-runtime/helpers/createClass")),a=d(e("bowser")),i=d(e("./Logger")),s=d(e("./handlers/Chrome55")),u=d(e("./handlers/Safari11")),c=d(e("./handlers/Firefox50")),l=d(e("./handlers/Edge11"));function d(e){return e&&e.__esModule?e:{default:e}}var f=new i.default("Device"),p=function(){function e(){(0,n.default)(this,e)}return(0,o.default)(e,null,[{key:"isSupported",value:function(){return e._detected||e._detect(),Boolean(e._handlerClass)}},{key:"_detect",value:function(){var r=t.navigator.userAgent,n=a.default._detect(r);e._detected=!0,e._flag=void 0,e._name=n.name||"unknown device",e._version=n.version||"unknown vesion",e._bowser=n,e._handlerClass=null,a.default.check({chrome:"55",chromium:"55"},!0,r)?(e._flag="chrome",e._handlerClass=s.default):a.default.check({firefox:"50"},!0,r)?(e._flag="firefox",e._handlerClass=c.default):a.default.check({safari:"11"},!0,r)?(e._flag="safari",e._handlerClass=u.default):a.default.check({msedge:"11"},!0,r)&&(e._flag="msedge",e._handlerClass=l.default),a.default.check({opera:"44"},!0,r)&&(e._flag="opera",e._handlerClass=s.default),e.isSupported()?f.debug('device supported [flag:%s, name:"%s", version:%s, handler:%s]',e._flag,e._name,e._version,e._handlerClass.name):f.warn("device not supported [name:%s, version:%s]",e._name,e._version)}},{key:"flag",get:function(){return e._detected||e._detect(),e._flag}},{key:"name",get:function(){return e._detected||e._detect(),e._name}},{key:"version",get:function(){return e._detected||e._detect(),e._version}},{key:"bowser",get:function(){return e._detected||e._detect(),e._bowser}},{key:"Handler",get:function(){return e._detected||e._detect(),e._handlerClass}}]),e}();r.default=p,p._detected=!1,p._flag=void 0,p._name=void 0,p._version=void 0,p._bowser=void 0,p._handlerClass=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Logger":188,"./handlers/Chrome55":194,"./handlers/Edge11":195,"./handlers/Firefox50":196,"./handlers/Safari11":197,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,bowser:41}],187:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=d(e("babel-runtime/core-js/promise")),o=d(e("babel-runtime/core-js/object/get-prototype-of")),a=d(e("babel-runtime/helpers/classCallCheck")),i=d(e("babel-runtime/helpers/createClass")),s=d(e("babel-runtime/helpers/possibleConstructorReturn")),u=d(e("babel-runtime/helpers/inherits")),c=e("events"),l=d(e("./Logger"));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){(0,u.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return r.setMaxListeners(1/0),r._logger=e||new l.default("EnhancedEventEmitter"),r}return(0,i.default)(t,[{key:"safeEmit",value:function(e){try{for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e].concat(r))}catch(t){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",e,t)}}},{key:"safeEmitAsPromise",value:function(e){for(var t=this,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return new n.default(function(r,n){t.safeEmit.apply(t,[e].concat(o,[function(e){r(e)},function(r){t._logger.error("safeEmitAsPromise() | errback called [event:%s]:%o",e,r),n(r)}]))})}}]),t}(c.EventEmitter);r.default=f},{"./Logger":188,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,events:171}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass")),a=i(e("debug"));function i(e){return e&&e.__esModule?e:{default:e}}var s="mediasoup-client",u=function(){function e(t){(0,n.default)(this,e),t?(this._debug=(0,a.default)(s+":"+t),this._warn=(0,a.default)(s+":WARN:"+t),this._error=(0,a.default)(s+":ERROR:"+t)):(this._debug=(0,a.default)(s),this._warn=(0,a.default)(s+":WARN"),this._error=(0,a.default)(s+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,o.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();r.default=u},{"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,debug:207}],189:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=p(e("babel-runtime/core-js/array/from")),o=p(e("babel-runtime/core-js/get-iterator")),a=p(e("babel-runtime/core-js/map")),i=p(e("babel-runtime/core-js/object/get-prototype-of")),s=p(e("babel-runtime/helpers/classCallCheck")),u=p(e("babel-runtime/helpers/createClass")),c=p(e("babel-runtime/helpers/possibleConstructorReturn")),l=p(e("babel-runtime/helpers/inherits")),d=p(e("./Logger")),f=p(e("./EnhancedEventEmitter"));function p(e){return e&&e.__esModule?e:{default:e}}var h=new d.default("Peer"),m=function(e){(0,l.default)(t,e);function t(e,r){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,h));return n._name=e,n._closed=!1,n._appData=r,n._consumers=new a.default,n}return(0,u.default)(t,[{key:"close",value:function(){if(h.debug("close()"),!this._closed){this._closed=!0,this.emit("@close"),this.safeEmit("close","local");var e=!0,t=!1,r=void 0;try{for(var n,a=(0,o.default)(this._consumers.values());!(e=(n=a.next()).done);e=!0){n.value.close()}}catch(e){t=!0,r=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw r}}}}},{key:"remoteClose",value:function(e){if(h.debug("remoteClose()"),!this._closed){this._closed=!0,this.emit("@close"),this.safeEmit("close","remote",e);var t=!0,r=!1,n=void 0;try{for(var a,i=(0,o.default)(this._consumers.values());!(t=(a=i.next()).done);t=!0){a.value.remoteClose()}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}}},{key:"getConsumerById",value:function(e){return this._consumers.get(e)}},{key:"addConsumer",value:function(e){var t=this;if(this._consumers.has(e.id))throw new Error("Consumer already exists [id:"+e.id+"]");this._consumers.set(e.id,e),e.on("@close",function(){t._consumers.delete(e.id)}),this.safeEmit("newconsumer",e)}},{key:"name",get:function(){return this._name}},{key:"closed",get:function(){return this._closed}},{key:"appData",get:function(){return this._appData}},{key:"consumers",get:function(){return(0,n.default)(this._consumers.values())}}]),t}(f.default);r.default=m},{"./EnhancedEventEmitter":187,"./Logger":188,"babel-runtime/core-js/array/from":17,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/map":21,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=m(e("babel-runtime/helpers/typeof")),o=m(e("babel-runtime/core-js/promise")),a=m(e("babel-runtime/helpers/extends")),i=m(e("babel-runtime/core-js/object/get-prototype-of")),s=m(e("babel-runtime/helpers/classCallCheck")),u=m(e("babel-runtime/helpers/createClass")),c=m(e("babel-runtime/helpers/possibleConstructorReturn")),l=m(e("babel-runtime/helpers/inherits")),d=m(e("./Logger")),f=m(e("./EnhancedEventEmitter")),p=e("./errors"),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./utils"));function m(e){return e&&e.__esModule?e:{default:e}}var v=1e3,_={low:1e5,medium:3e5,high:15e5},b=new d.default("Producer"),y=function(e){(0,l.default)(t,e);function t(e,r,n){(0,s.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,b));return o._id=h.randomNumber(),o._closed=!1,o._originalTrack=e,o._track=e.clone(),o._appData=n,o._simulcast=!1,r.simulcast&&(o._simulcast=(0,a.default)({},_,r.simulcast)),o._transport=null,o._rtpParameters=null,o._locallyPaused=!o._track.enabled,o._remotelyPaused=!1,o._statsEnabled=!1,o._statsInterval=v,o._handleTrack(),o}return(0,u.default)(t,[{key:"close",value:function(e){b.debug("close()"),this._closed||(this._closed=!0,this._statsEnabled&&(this._statsEnabled=!1,this.transport&&this.transport.disableProducerStats(this)),this._transport&&this._transport.removeProducer(this,"local",e),this._destroy(),this.emit("@close","local",e),this.safeEmit("close","local",e))}},{key:"remoteClose",value:function(e){b.debug("remoteClose()"),this._closed||(this._closed=!0,this._transport&&this._transport.removeProducer(this,"remote",e),this._destroy(),this.emit("@close","remote",e),this.safeEmit("close","remote",e))}},{key:"_destroy",value:function(){this._transport=!1,this._rtpParameters=null;try{this._track.stop()}catch(e){}}},{key:"send",value:function(e){var t=this;return b.debug("send() [transport:%o]",e),this._closed?o.default.reject(new p.InvalidStateError("Producer closed")):this._transport?o.default.reject(new Error("already handled by a Transport")):"object"!==(void 0===e?"undefined":(0,n.default)(e))?o.default.reject(new TypeError("invalid Transport")):(this._transport=e,e.addProducer(this).then(function(){e.once("@close",function(){t._closed||t._transport!==e||(t._transport.removeProducer(t,"local"),t._transport=null,t._rtpParameters=null,t.safeEmit("unhandled"))}),t.safeEmit("handled"),t._statsEnabled&&e.enableProducerStats(t,t._statsInterval)}).catch(function(e){throw t._transport=null,e}))}},{key:"pause",value:function(e){return b.debug("pause()"),this._closed?(b.error("pause() | Producer closed"),!1):!!this._locallyPaused||(this._locallyPaused=!0,this._track.enabled=!1,this._transport&&this._transport.pauseProducer(this,e),this.safeEmit("pause","local",e),this.paused)}},{key:"remotePause",value:function(e){b.debug("remotePause()"),this._closed||this._remotelyPaused||(this._remotelyPaused=!0,this._track.enabled=!1,this.safeEmit("pause","remote",e))}},{key:"resume",value:function(e){return b.debug("resume()"),this._closed?(b.error("resume() | Producer closed"),!1):!this._locallyPaused||(this._locallyPaused=!1,this._remotelyPaused||(this._track.enabled=!0),this._transport&&this._transport.resumeProducer(this,e),this.safeEmit("resume","local",e),!this.paused)}},{key:"remoteResume",value:function(e){b.debug("remoteResume()"),!this._closed&&this._remotelyPaused&&(this._remotelyPaused=!1,this._locallyPaused||(this._track.enabled=!0),this.safeEmit("resume","remote",e))}},{key:"replaceTrack",value:function(e){var t=this;if(b.debug("replaceTrack() [track:%o]",e),this._closed)return o.default.reject(new p.InvalidStateError("Producer closed"));if(!(e instanceof MediaStreamTrack))return o.default.reject(new TypeError("track is not a MediaStreamTrack"));if("ended"===e.readyState)return o.default.reject(new Error('track.readyState is "ended"'));var r=e.clone();return o.default.resolve().then(function(){if(t._transport)return t._transport.replaceProducerTrack(t,r)}).then(function(){try{t._track.onended=null,t._track.stop()}catch(e){}return t.paused?r.enabled=!1:r.enabled=!0,t._originalTrack=e,t._track=r,t._handleTrack(),t._track})}},{key:"setRtpParameters",value:function(e){this._rtpParameters=e}},{key:"enableStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;b.debug("enableStats() [interval:%s]",e),this._closed?b.error("enableStats() | Producer closed"):this._statsEnabled||(this._statsInterval="number"!=typeof e||e<1e3?v:e,this._statsEnabled=!0,this._transport&&this._transport.enableProducerStats(this,this._statsInterval))}},{key:"disableStats",value:function(){b.debug("disableStats()"),this._closed?b.error("disableStats() | Producer closed"):this._statsEnabled&&(this._statsEnabled=!1,this._transport&&this._transport.disableProducerStats(this))}},{key:"remoteStats",value:function(e){this.safeEmit("stats",e)}},{key:"_handleTrack",value:function(){var e=this;this._track.onended=function(){e._closed||(b.warn('track "ended" event, closing Producer'),e.safeEmit("trackended"),e.close())}}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._track.kind}},{key:"track",get:function(){return this._track}},{key:"originalTrack",get:function(){return this._originalTrack}},{key:"simulcast",get:function(){return this._simulcast}},{key:"appData",get:function(){return this._appData}},{key:"transport",get:function(){return this._transport}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"locallyPaused",get:function(){return this._locallyPaused}},{key:"remotelyPaused",get:function(){return this._remotelyPaused}},{key:"paused",get:function(){return this._locallyPaused||this._remotelyPaused}}]),t}(f.default);r.default=y},{"./EnhancedEventEmitter":187,"./Logger":188,"./errors":193,"./utils":206,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/extends":35,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"babel-runtime/helpers/typeof":40}],191:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=P(e("babel-runtime/core-js/array/from")),o=P(e("babel-runtime/helpers/extends")),a=P(e("babel-runtime/helpers/typeof")),i=P(e("babel-runtime/core-js/get-iterator")),s=P(e("babel-runtime/core-js/promise")),u=P(e("babel-runtime/core-js/map")),c=P(e("babel-runtime/core-js/object/get-prototype-of")),l=P(e("babel-runtime/helpers/classCallCheck")),d=P(e("babel-runtime/helpers/createClass")),f=P(e("babel-runtime/helpers/possibleConstructorReturn")),p=P(e("babel-runtime/helpers/inherits")),h=P(e("./Logger")),m=P(e("./EnhancedEventEmitter")),v=e("./errors"),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./ortc")),b=P(e("./Device")),y=P(e("./Transport")),g=P(e("./Producer")),w=P(e("./Peer")),k=P(e("./Consumer"));function P(e){return e&&e.__esModule?e:{default:e}}var j=new h.default("Room"),x={new:"new",joining:"joining",joined:"joined",closed:"closed"},C=function(e){(0,p.default)(t,e);function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this,j));if(j.debug("constructor() [options:%o]",e),!b.default.isSupported())throw new Error("current browser/device not supported");return e=e||{},r._settings={roomSettings:e.roomSettings,requestTimeout:e.requestTimeout||1e4,transportOptions:e.transportOptions||{},turnServers:e.turnServers||[]},r._state=x.new,r._peerName=null,r._transports=new u.default,r._producers=new u.default,r._peers=new u.default,r._extendedRtpCapabilities=null,r._canSendByKind={audio:!1,video:!1},r}return(0,d.default)(t,[{key:"getTransportById",value:function(e){return this._transports.get(e)}},{key:"getProducerById",value:function(e){return this._producers.get(e)}},{key:"getPeerByName",value:function(e){return this._peers.get(e)}},{key:"join",value:function(e,t){var r=this;if(j.debug('join() [peerName:"%s"]',e),"string"!=typeof e)return s.default.reject(new TypeError("invalid peerName"));if(this._state!==x.new&&this._state!==x.closed)return s.default.reject(new v.InvalidStateError('invalid state "'+this._state+'"'));this._peerName=e,this._state=x.joining;var n=void 0;return s.default.resolve().then(function(){return r._settings.roomSettings?void(n=r._settings.roomSettings):r._sendRequest("queryRoom",{target:"room"}).then(function(e){n=e,j.debug("join() | got Room settings:%o",n)})}).then(function(){return b.default.Handler.getNativeRtpCapabilities()}).then(function(e){j.debug("join() | native RTP capabilities:%o",e),r._extendedRtpCapabilities=_.getExtendedRtpCapabilities(e,n.rtpCapabilities),j.debug("join() | extended RTP capabilities:%o",r._extendedRtpCapabilities);var o=_.getUnsupportedCodecs(n.rtpCapabilities,n.mandatoryCodecPayloadTypes,r._extendedRtpCapabilities);if(o.length>0)throw j.error("%s mandatory room codecs not supported:%o",o.length,o),new v.UnsupportedError("mandatory room codecs not supported",o);r._canSendByKind.audio=_.canSend("audio",r._extendedRtpCapabilities),r._canSendByKind.video=_.canSend("video",r._extendedRtpCapabilities);var a=_.getRtpCapabilities(r._extendedRtpCapabilities);j.debug("join() | effective local RTP capabilities for receiving:%o",a);var i={target:"room",peerName:r._peerName,rtpCapabilities:a,appData:t};return r._sendRequest("join",i).then(function(e){return e.peers})}).then(function(e){var t=!0,n=!1,o=void 0;try{for(var a,s=(0,i.default)(e||[]);!(t=(a=s.next()).done);t=!0){var u=a.value;try{r._handlePeerData(u)}catch(e){j.error("join() | error handling Peer:%o",e)}}}catch(e){n=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw o}}return r._state=x.joined,j.debug("join() | joined the Room"),r.peers}).catch(function(e){throw r._state=x.new,e})}},{key:"leave",value:function(e){if(j.debug("leave()"),!this.closed){this._sendNotification("leave",{appData:e}),this._state=x.closed,this.safeEmit("close","local",e);var t=!0,r=!1,n=void 0;try{for(var o,a=(0,i.default)(this._transports.values());!(t=(o=a.next()).done);t=!0){o.value.close()}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}var s=!0,u=!1,c=void 0;try{for(var l,d=(0,i.default)(this._producers.values());!(s=(l=d.next()).done);s=!0){l.value.close()}}catch(e){u=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}var f=!0,p=!1,h=void 0;try{for(var m,v=(0,i.default)(this._peers.values());!(f=(m=v.next()).done);f=!0){m.value.close()}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}}}},{key:"remoteClose",value:function(e){if(j.debug("remoteClose()"),!this.closed){this._state=x.closed,this.safeEmit("close","remote",e);var t=!0,r=!1,n=void 0;try{for(var o,a=(0,i.default)(this._transports.values());!(t=(o=a.next()).done);t=!0){o.value.remoteClose()}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}var s=!0,u=!1,c=void 0;try{for(var l,d=(0,i.default)(this._producers.values());!(s=(l=d.next()).done);s=!0){l.value.remoteClose()}}catch(e){u=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}var f=!0,p=!1,h=void 0;try{for(var m,v=(0,i.default)(this._peers.values());!(f=(m=v.next()).done);f=!0){m.value.remoteClose()}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}}}},{key:"canSend",value:function(e){if(!this.joined)throw new v.InvalidStateError('invalid state "'+this._state+'"');if("audio"!==e&&"video"!==e)throw new TypeError('invalid kind "'+e+'"');return this._canSendByKind[e]}},{key:"createTransport",value:function(e,t){var r=this;if(j.debug("createTransport() [direction:%s]",e),!this.joined)throw new v.InvalidStateError('invalid state "'+this._state+'"');if("send"!==e&&"recv"!==e)throw new TypeError('invalid direction "'+e+'"');var n=new y.default(e,this._extendedRtpCapabilities,this._settings,t);return this._transports.set(n.id,n),n.on("@request",function(e,t,n,o){r._sendRequest(e,t).then(n).catch(o)}),n.on("@notify",function(e,t){r._sendNotification(e,t)}),n.on("@close",function(){r._transports.delete(n.id)}),n}},{key:"createProducer",value:function(e,t,r){var n=this;if(j.debug("createProducer() [track:%o, options:%o]",e,t),!this.joined)throw new v.InvalidStateError('invalid state "'+this._state+'"');if(!(e instanceof MediaStreamTrack))throw new TypeError("track is not a MediaStreamTrack");if(!this._canSendByKind[e.kind])throw new Error("cannot send "+e.kind);if("ended"===e.readyState)throw new Error('track.readyState is "ended"');t=t||{};var o=new g.default(e,t,r);return this._producers.set(o.id,o),o.on("@close",function(){n._producers.delete(o.id)}),o}},{key:"restartIce",value:function(){if(!this.joined)throw new v.InvalidStateError('invalid state "'+this._state+'"');var e=!0,t=!1,r=void 0;try{for(var n,o=(0,i.default)(this._transports.values());!(e=(n=o.next()).done);e=!0){n.value.restartIce()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}},{key:"receiveNotification",value:function(e){var t=this;if(this.closed)return s.default.reject(new v.InvalidStateError("Room closed"));if("object"!==(void 0===e?"undefined":(0,a.default)(e)))return s.default.reject(new TypeError("wrong notification Object"));if(!0!==e.notification)return s.default.reject(new TypeError("not a notification"));if("string"!=typeof e.method)return s.default.reject(new TypeError("wrong/missing notification method"));var r=e.method;return j.debug("receiveNotification() [method:%s, notification:%o]",r,e),s.default.resolve().then(function(){switch(r){case"closed":var n=e.appData;t.remoteClose(n);break;case"transportClosed":var o=e.id,a=e.appData,i=t._transports.get(o);if(!i)throw new Error('Transport not found [id:"'+o+'"]');i.remoteClose(a);break;case"transportStats":var s=e.id,u=e.stats,c=t._transports.get(s);if(!c)throw new Error("transport not found [id:"+s+"]");c.remoteStats(u);break;case"newPeer":var l=e.name;if(t._peers.has(l))throw new Error('Peer already exists [name:"'+l+'"]');var d=e;t._handlePeerData(d);break;case"peerClosed":var f=e.name,p=e.appData,h=t._peers.get(f);if(!h)throw new Error('no Peer found [name:"'+f+'"]');h.remoteClose(p);break;case"producerPaused":var m=e.id,v=e.appData,_=t._producers.get(m);if(!_)throw new Error("Producer not found [id:"+m+"]");_.remotePause(v);break;case"producerResumed":var b=e.id,y=e.appData,g=t._producers.get(b);if(!g)throw new Error("Producer not found [id:"+b+"]");g.remoteResume(y);break;case"producerClosed":var w=e.id,k=e.appData,P=t._producers.get(w);if(!P)throw new Error("Producer not found [id:"+w+"]");P.remoteClose(k);break;case"producerStats":var j=e.id,x=e.stats,C=t._producers.get(j);if(!C)throw new Error("Producer not found [id:"+j+"]");C.remoteStats(x);break;case"newConsumer":var E=e.peerName,S=t._peers.get(E);if(!S)throw new Error('no Peer found [name:"'+E+'"]');var R=e;t._handleConsumerData(R,S);break;case"consumerClosed":var T=e.id,O=e.peerName,I=e.appData,A=t._peers.get(O);if(!A)throw new Error('no Peer found [name:"'+O+'"]');var M=A.getConsumerById(T);if(!M)throw new Error("Consumer not found [id:"+T+"]");M.remoteClose(I);break;case"consumerPaused":var N=e.id,D=e.peerName,L=e.appData,F=t._peers.get(D);if(!F)throw new Error('no Peer found [name:"'+D+'"]');var U=F.getConsumerById(N);if(!U)throw new Error("Consumer not found [id:"+N+"]");U.remotePause(L);break;case"consumerResumed":var W=e.id,B=e.peerName,z=e.appData,q=t._peers.get(B);if(!q)throw new Error('no Peer found [name:"'+B+'"]');var G=q.getConsumerById(W);if(!G)throw new Error("Consumer not found [id:"+W+"]");G.remoteResume(z);break;case"consumerPreferredProfileSet":var V=e.id,K=e.peerName,$=e.profile,H=t._peers.get(K);if(!H)throw new Error('no Peer found [name:"'+K+'"]');var J=H.getConsumerById(V);if(!J)throw new Error("Consumer not found [id:"+V+"]");J.remoteSetPreferredProfile($);break;case"consumerEffectiveProfileChanged":var Y=e.id,Z=e.peerName,Q=e.profile,X=t._peers.get(Z);if(!X)throw new Error('no Peer found [name:"'+Z+'"]');var ee=X.getConsumerById(Y);if(!ee)throw new Error("Consumer not found [id:"+Y+"]");ee.remoteEffectiveProfileChanged(Q);break;case"consumerStats":var te=e.id,re=e.peerName,ne=e.stats,oe=t._peers.get(re);if(!oe)throw new Error('no Peer found [name:"'+re+'"]');var ae=oe.getConsumerById(te);if(!ae)throw new Error("Consumer not found [id:"+te+"]");ae.remoteStats(ne);break;default:throw new Error('unknown notification method "'+r+'"')}}).catch(function(t){j.error("receiveNotification() failed [notification:%o]: %s",e,t)})}},{key:"_sendRequest",value:function(e,t){var r=this,n=(0,o.default)({method:e,target:"peer"},t);return this.closed?(j.error("_sendRequest() | Room closed [method:%s, request:%o]",e,n),s.default.reject(new v.InvalidStateError("Room closed"))):(j.debug("_sendRequest() [method:%s, request:%o]",e,n),new s.default(function(t,o){var a=!1,i=setTimeout(function(){j.error("request failed [method:%s]: timeout",e),a=!0,o(new v.TimeoutError("timeout"))},r._settings.requestTimeout);r.safeEmit("request",n,function(n){if(!a){if(a=!0,clearTimeout(i),r.closed)return j.error("request failed [method:%s]: Room closed",e),void o(new Error("Room closed"));j.debug("request succeeded [method:%s, response:%o]",e,n),t(n)}},function(t){if(!a){if(a=!0,clearTimeout(i),r.closed)return j.error("request failed [method:%s]: Room closed",e),void o(new Error("Room closed"));t instanceof Error||(t=new Error(String(t))),j.error("request failed [method:%s]:%o",e,t),o(t)}})}))}},{key:"_sendNotification",value:function(e,t){if(!this.closed){var r=(0,o.default)({method:e,target:"peer",notification:!0},t);j.debug("_sendNotification() [method:%s, notification:%o]",e,r),this.safeEmit("notify",r)}}},{key:"_handlePeerData",value:function(e){var t=this,r=e.name,n=e.consumers,o=e.appData,a=new w.default(r,o);this._peers.set(a.name,a),a.on("@close",function(){t._peers.delete(a.name)});var s=!0,u=!1,c=void 0;try{for(var l,d=(0,i.default)(n);!(s=(l=d.next()).done);s=!0){var f=l.value;try{this._handleConsumerData(f,a)}catch(e){j.error("error handling existing Consumer in Peer:%o",e)}}}catch(e){u=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}this.joined&&this.safeEmit("newpeer",a)}},{key:"_handleConsumerData",value:function(e,t){var r=e.id,n=e.kind,o=e.rtpParameters,a=e.paused,i=e.appData,s=new k.default(r,n,o,t,i);_.canReceive(s.rtpParameters,this._extendedRtpCapabilities)&&s.setSupported(!0),a&&s.remotePause(),t.addConsumer(s)}},{key:"joined",get:function(){return this._state===x.joined}},{key:"closed",get:function(){return this._state===x.closed}},{key:"peerName",get:function(){return this._peerName}},{key:"transports",get:function(){return(0,n.default)(this._transports.values())}},{key:"producers",get:function(){return(0,n.default)(this._producers.values())}},{key:"peers",get:function(){return(0,n.default)(this._peers.values())}}]),t}(m.default);r.default=C},{"./Consumer":185,"./Device":186,"./EnhancedEventEmitter":187,"./Logger":188,"./Peer":189,"./Producer":190,"./Transport":192,"./errors":193,"./ortc":205,"babel-runtime/core-js/array/from":17,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/map":21,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/extends":35,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"babel-runtime/helpers/typeof":40}],192:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=m(e("babel-runtime/core-js/promise")),o=m(e("babel-runtime/core-js/object/get-prototype-of")),a=m(e("babel-runtime/helpers/classCallCheck")),i=m(e("babel-runtime/helpers/createClass")),s=m(e("babel-runtime/helpers/possibleConstructorReturn")),u=m(e("babel-runtime/helpers/inherits")),c=m(e("./Logger")),l=m(e("./EnhancedEventEmitter")),d=e("./errors"),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("./utils")),p=m(e("./Device")),h=m(e("./CommandQueue"));function m(e){return e&&e.__esModule?e:{default:e}}var v=new c.default("Transport"),_=function(e){(0,u.default)(t,e);function t(e,r,n,i){(0,a.default)(this,t);var u=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,v));return v.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",e,r),u._id=f.randomNumber(),u._closed=!1,u._direction=e,u._settings=n,u._appData=i,u._statsEnabled=!1,u._commandQueue=new h.default,u._handler=new p.default.Handler(e,r,n),u._connectionState="new",u._commandQueue.on("exec",u._execCommand.bind(u)),u._handleHandler(),u}return(0,i.default)(t,[{key:"close",value:function(e){v.debug("close()"),this._closed||(this._closed=!0,this._statsEnabled&&(this._statsEnabled=!1,this.disableStats()),this.safeEmit("@notify","closeTransport",{id:this._id,appData:e}),this.emit("@close"),this.safeEmit("close","local",e),this._destroy())}},{key:"remoteClose",value:function(e){v.debug("remoteClose()"),this._closed||(this._closed=!0,this.emit("@close"),this.safeEmit("close","remote",e),this._destroy())}},{key:"_destroy",value:function(){this._commandQueue.close(),this._handler.close()}},{key:"restartIce",value:function(){var e=this;v.debug("restartIce()"),this._closed||"new"!==this._connectionState&&n.default.resolve().then(function(){var t={id:e._id};return e.safeEmitAsPromise("@request","restartTransport",t)}).then(function(t){var r=t.iceParameters;return e._commandQueue.push("restartIce",{remoteIceParameters:r})}).catch(function(e){v.error("restartIce() | failed: %o",e)})}},{key:"enableStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;v.debug("enableStats() [interval:%s]",e),("number"!=typeof e||e<1e3)&&(e=1e3),this._statsEnabled=!0;var t={id:this._id,interval:e};this.safeEmit("@notify","enableTransportStats",t)}},{key:"disableStats",value:function(){v.debug("disableStats()"),this._statsEnabled=!1;var e={id:this._id};this.safeEmit("@notify","disableTransportStats",e)}},{key:"_handleHandler",value:function(){var e=this,t=this._handler;t.on("@connectionstatechange",function(t){e._connectionState!==t&&(v.debug("Transport connection state changed to %s",t),e._connectionState=t,e._closed||e.safeEmit("connectionstatechange",t))}),t.on("@needcreatetransport",function(t,r,n){var o={id:e._id,direction:e._direction,options:e._settings.transportOptions,appData:e._appData};t&&(o.dtlsParameters=t.dtlsParameters),e.safeEmit("@request","createTransport",o,r,n)}),t.on("@needupdatetransport",function(t){var r={id:e._id,dtlsParameters:t.dtlsParameters};e.safeEmit("@notify","updateTransport",r)}),t.on("@needupdateproducer",function(t,r){var n={id:t.id,rtpParameters:r};t.setRtpParameters(r),e.safeEmit("@notify","updateProducer",n)})}},{key:"addProducer",value:function(e){return v.debug("addProducer() [producer:%o]",e),this._closed?n.default.reject(new d.InvalidStateError("Transport closed")):"send"!==this._direction?n.default.reject(new Error("not a sending Transport")):this._commandQueue.push("addProducer",{producer:e})}},{key:"removeProducer",value:function(e,t,r){v.debug("removeProducer() [producer:%o]",e),this._closed||this._commandQueue.push("removeProducer",{producer:e}).catch(function(){}),"local"===t&&this.safeEmit("@notify","closeProducer",{id:e.id,appData:r})}},{key:"pauseProducer",value:function(e,t){v.debug("pauseProducer() [producer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","pauseProducer",r)}},{key:"resumeProducer",value:function(e,t){v.debug("resumeProducer() [producer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","resumeProducer",r)}},{key:"replaceProducerTrack",value:function(e,t){return v.debug("replaceProducerTrack() [producer:%o]",e),this._commandQueue.push("replaceProducerTrack",{producer:e,track:t})}},{key:"enableProducerStats",value:function(e,t){v.debug("enableProducerStats() [producer:%o]",e);var r={id:e.id,interval:t};this.safeEmit("@notify","enableProducerStats",r)}},{key:"disableProducerStats",value:function(e){v.debug("disableProducerStats() [producer:%o]",e);var t={id:e.id};this.safeEmit("@notify","disableProducerStats",t)}},{key:"addConsumer",value:function(e){return v.debug("addConsumer() [consumer:%o]",e),this._closed?n.default.reject(new d.InvalidStateError("Transport closed")):"recv"!==this._direction?n.default.reject(new Error("not a receiving Transport")):this._commandQueue.push("addConsumer",{consumer:e})}},{key:"removeConsumer",value:function(e){v.debug("removeConsumer() [consumer:%o]",e),this._commandQueue.push("removeConsumer",{consumer:e}).catch(function(){})}},{key:"pauseConsumer",value:function(e,t){v.debug("pauseConsumer() [consumer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","pauseConsumer",r)}},{key:"resumeConsumer",value:function(e,t){v.debug("resumeConsumer() [consumer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","resumeConsumer",r)}},{key:"setConsumerPreferredProfile",value:function(e,t){v.debug("setConsumerPreferredProfile() [consumer:%o]",e);var r={id:e.id,profile:t};this.safeEmit("@notify","setConsumerPreferredProfile",r)}},{key:"enableConsumerStats",value:function(e,t){v.debug("enableConsumerStats() [consumer:%o]",e);var r={id:e.id,interval:t};this.safeEmit("@notify","enableConsumerStats",r)}},{key:"disableConsumerStats",value:function(e){v.debug("disableConsumerStats() [consumer:%o]",e);var t={id:e.id};this.safeEmit("@notify","disableConsumerStats",t)}},{key:"remoteStats",value:function(e){this.safeEmit("stats",e)}},{key:"_execCommand",value:function(e,t){var r=void 0;try{switch(e.method){case"addProducer":var o=e.producer;r=this._execAddProducer(o);break;case"removeProducer":var a=e.producer;r=this._execRemoveProducer(a);break;case"replaceProducerTrack":var i=e.producer,s=e.track;r=this._execReplaceProducerTrack(i,s);break;case"addConsumer":var u=e.consumer;r=this._execAddConsumer(u);break;case"removeConsumer":var c=e.consumer;r=this._execRemoveConsumer(c);break;case"restartIce":var l=e.remoteIceParameters;r=this._execRestartIce(l);break;default:r=n.default.reject(new Error('unknown command method "'+e.method+'"'))}}catch(e){r=n.default.reject(e)}t.promise=r}},{key:"_execAddProducer",value:function(e){var t=this;v.debug("_execAddProducer()");var r=void 0;return n.default.resolve().then(function(){return t._handler.addProducer(e)}).then(function(n){r=n;var o={id:e.id,kind:e.kind,transportId:t._id,rtpParameters:n,paused:e.locallyPaused,appData:e.appData};return t.safeEmitAsPromise("@request","createProducer",o)}).then(function(){e.setRtpParameters(r)})}},{key:"_execRemoveProducer",value:function(e){return v.debug("_execRemoveProducer()"),this._handler.removeProducer(e)}},{key:"_execReplaceProducerTrack",value:function(e,t){return v.debug("_execReplaceProducerTrack()"),this._handler.replaceProducerTrack(e,t)}},{key:"_execAddConsumer",value:function(e){var t=this;v.debug("_execAddConsumer()");var r=void 0;return n.default.resolve().then(function(){return t._handler.addConsumer(e)}).then(function(n){r=n;var o={id:e.id,transportId:t.id,paused:e.locallyPaused,preferredProfile:e.preferredProfile};return t.safeEmitAsPromise("@request","enableConsumer",o)}).then(function(t){var n=t.paused,o=t.preferredProfile,a=t.effectiveProfile;return n&&e.remotePause(),o&&e.remoteSetPreferredProfile(o),a&&e.remoteEffectiveProfileChanged(a),r})}},{key:"_execRemoveConsumer",value:function(e){return v.debug("_execRemoveConsumer()"),this._handler.removeConsumer(e)}},{key:"_execRestartIce",value:function(e){return v.debug("_execRestartIce()"),this._handler.restartIce(e)}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"direction",get:function(){return this._direction}},{key:"appData",get:function(){return this._appData}},{key:"connectionState",get:function(){return this._connectionState}}]),t}(l.default);r.default=_},{"./CommandQueue":184,"./Device":186,"./EnhancedEventEmitter":187,"./Logger":188,"./errors":193,"./utils":206,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnsupportedError=r.TimeoutError=r.InvalidStateError=void 0;var n=s(e("babel-runtime/core-js/object/get-prototype-of")),o=s(e("babel-runtime/helpers/classCallCheck")),a=s(e("babel-runtime/helpers/possibleConstructorReturn")),i=s(e("babel-runtime/helpers/inherits"));function s(e){return e&&e.__esModule?e:{default:e}}r.InvalidStateError=function(e){(0,i.default)(t,e);function t(e){(0,o.default)(this,t);var r=(0,a.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return Object.defineProperty(r,"name",{enumerable:!1,writable:!1,value:"InvalidStateError"}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(r,t):Object.defineProperty(r,"stack",{enumerable:!1,writable:!1,value:new Error(e).stack}),r}return t}(Error),r.TimeoutError=function(e){(0,i.default)(t,e);function t(e){(0,o.default)(this,t);var r=(0,a.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return Object.defineProperty(r,"name",{enumerable:!1,writable:!1,value:"TimeoutError"}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(r,t):Object.defineProperty(r,"stack",{enumerable:!1,writable:!1,value:new Error(e).stack}),r}return t}(Error),r.UnsupportedError=function(e){(0,i.default)(t,e);function t(e,r){(0,o.default)(this,t);var i=(0,a.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return Object.defineProperty(i,"name",{enumerable:!1,writable:!1,value:"UnsupportedError"}),Object.defineProperty(i,"data",{enumerable:!0,writable:!1,value:r}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(i,t):Object.defineProperty(i,"stack",{enumerable:!1,writable:!1,value:new Error(e).stack}),i}return t}(Error)},{"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37}],194:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=w(e("babel-runtime/core-js/array/from")),o=w(e("babel-runtime/core-js/map")),a=w(e("babel-runtime/core-js/set")),i=w(e("babel-runtime/core-js/promise")),s=w(e("babel-runtime/core-js/object/get-prototype-of")),u=w(e("babel-runtime/helpers/classCallCheck")),c=w(e("babel-runtime/helpers/createClass")),l=w(e("babel-runtime/helpers/possibleConstructorReturn")),d=w(e("babel-runtime/helpers/inherits")),f=w(e("sdp-transform")),p=w(e("../Logger")),h=w(e("../EnhancedEventEmitter")),m=g(e("../utils")),v=g(e("../ortc")),_=g(e("./sdp/commonUtils")),b=g(e("./sdp/planBUtils")),y=w(e("./sdp/RemotePlanBSdp"));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}var k=new p.default("Chrome55"),P=function(e){(0,d.default)(t,e);function t(e,r,n){(0,u.default)(this,t);var o=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,k));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new y.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return(0,c.default)(t,[{key:"close",value:function(){k.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),j=function(e){(0,d.default)(t,e);function t(e,r){(0,u.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n}return(0,c.default)(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(k.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return i.default.reject("track already added");var n=void 0;return i.default.resolve().then(function(){return t._stream.addTrack(r),t._pc.addStream(t._stream),t._pc.createOffer()}).then(function(n){if(e.simulcast){k.debug("addProducer() | enabling simulcast");var o=f.default.parse(n.sdp);b.addSimulcastForTrack(o,r);n={type:"offer",sdp:f.default.write(o)}}return k.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",n),t._pc.setLocalDescription(n)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){n=f.default.parse(t._pc.localDescription.sdp);var e={type:"answer",sdp:t._remoteSdp.createAnswerSdp(n)};return k.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){var o=m.clone(t._rtpParametersByKind[e.kind]);return b.fillRtpParametersForTrack(o,n,r),o}).catch(function(e){throw t._stream.removeTrack(r),t._pc.addStream(t._stream),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return k.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),i.default.resolve().then(function(){return t._stream.removeTrack(r),t._pc.addStream(t._stream),t._pc.createOffer()}).then(function(e){return k.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).catch(function(e){if(0!==t._stream.getTracks().length)throw e;k.warn("removeProducer() | ignoring expected error due no sending tracks: %s",e.toString())}).then(function(){if("stable"!==t._pc.signalingState){var e=f.default.parse(t._pc.localDescription.sdp),r={type:"answer",sdp:t._remoteSdp.createAnswerSdp(e)};return k.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)}})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;k.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track,o=void 0;return i.default.resolve().then(function(){return r._stream.removeTrack(n),r._stream.addTrack(t),r._pc.addStream(r._stream),r._pc.createOffer()}).then(function(n){if(e.simulcast){k.debug("addProducer() | enabling simulcast");var o=f.default.parse(n.sdp);b.addSimulcastForTrack(o,t);n={type:"offer",sdp:f.default.write(o)}}return k.debug("replaceProducerTrack() | calling pc.setLocalDescription() [offer:%o]",n),r._pc.setLocalDescription(n)}).then(function(){o=f.default.parse(r._pc.localDescription.sdp);var e={type:"answer",sdp:r._remoteSdp.createAnswerSdp(o)};return k.debug("replaceProducerTrack() | calling pc.setRemoteDescription() [answer:%o]",e),r._pc.setRemoteDescription(e)}).then(function(){var n=m.clone(r._rtpParametersByKind[e.kind]);b.fillRtpParametersForTrack(n,o,t),r.safeEmit("@needupdateproducer",e,n)}).catch(function(e){throw r._stream.removeTrack(t),r._stream.addTrack(n),r._pc.addStream(r._stream),e})}},{key:"restartIce",value:function(e){var t=this;return k.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),i.default.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=f.default.parse(t._pc.localDescription.sdp),r={type:"answer",sdp:t._remoteSdp.createAnswerSdp(e)};return k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)})}},{key:"_setupTransport",value:function(){var e=this;return k.debug("_setupTransport()"),i.default.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=f.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(P),x=function(e){(0,d.default)(t,e);function t(e,r){(0,u.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,"recv",e,r));return n._transportCreated=!1,n._transportUpdated=!1,n._kinds=new a.default,n._consumerInfos=new o.default,n}return(0,c.default)(t,[{key:"addConsumer",value:function(e){var t=this;if(k.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return i.default.reject("Consumer already added");var r=e.rtpParameters.encodings[0],o=e.rtpParameters.rtcp.cname,a={kind:e.kind,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:o};return r.rtx&&r.rtx.ssrc&&(a.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,a),this._kinds.add(e.kind),i.default.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._kinds),(0,n.default)(t._consumerInfos.values()))};return k.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return k.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getRemoteStreams()[0].getTrackById(a.trackId);if(!e)throw new Error("remote track not found");return e})}},{key:"removeConsumer",value:function(e){var t=this;return k.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id)?(this._consumerInfos.delete(e.id),i.default.resolve().then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._kinds),(0,n.default)(t._consumerInfos.values()))};return k.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return k.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):i.default.reject("Consumer not found")}},{key:"restartIce",value:function(e){var t=this;return k.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),i.default.resolve().then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._kinds),(0,n.default)(t._consumerInfos.values()))};return k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return k.debug("_setupTransport()"),i.default.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){k.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=f.default.parse(e),r={dtlsParameters:_.extractDtlsParameters(t)};this.safeEmit("@needupdatetransport",r),this._transportUpdated=!0}}]),t}(P),C=function(){(0,c.default)(e,null,[{key:"getNativeRtpCapabilities",value:function(){k.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});return e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(t){try{e.close()}catch(e){}var r=f.default.parse(t.sdp);return _.extractRtpCapabilities(r)}).catch(function(t){try{e.close()}catch(e){}throw t})}},{key:"name",get:function(){return"Chrome55"}}]);function e(t,r,n){(0,u.default)(this,e),k.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:v.getSendingRtpParameters("audio",r),video:v.getSendingRtpParameters("video",r)},new j(o,n);case"recv":return o={audio:v.getReceivingFullRtpParameters("audio",r),video:v.getReceivingFullRtpParameters("video",r)},new x(o,n)}}return e}();r.default=C},{"../EnhancedEventEmitter":187,"../Logger":188,"../ortc":205,"../utils":206,"./sdp/RemotePlanBSdp":199,"./sdp/commonUtils":201,"./sdp/planBUtils":202,"babel-runtime/core-js/array/from":17,"babel-runtime/core-js/map":21,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/core-js/set":29,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"sdp-transform":235}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=_(e("babel-runtime/core-js/promise")),o=_(e("babel-runtime/core-js/get-iterator")),a=_(e("babel-runtime/core-js/map")),i=_(e("babel-runtime/core-js/object/get-prototype-of")),s=_(e("babel-runtime/helpers/classCallCheck")),u=_(e("babel-runtime/helpers/possibleConstructorReturn")),c=_(e("babel-runtime/helpers/createClass")),l=_(e("babel-runtime/helpers/inherits")),d=_(e("../Logger")),f=_(e("../EnhancedEventEmitter")),p=v(e("../utils")),h=v(e("../ortc")),m=v(e("./ortc/edgeUtils"));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}var b="CNAME-EDGE-"+p.randomNumber(),y=new d.default("Edge11"),g=function(e){(0,l.default)(t,e),(0,c.default)(t,null,[{key:"getNativeRtpCapabilities",value:function(){return y.debug("getNativeRtpCapabilities()"),m.getCapabilities()}},{key:"name",get:function(){return"Edge11"}}]);function t(e,r,n){(0,s.default)(this,t);var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,y));return y.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",e,r),o._rtpParametersByKind={audio:h.getSendingRtpParameters("audio",r),video:h.getSendingRtpParameters("video",r)},o._transportReady=!1,o._iceGatherer=null,o._iceTransport=null,o._dtlsTransport=null,o._rtpSenders=new a.default,o._rtpReceivers=new a.default,o._transportRemoteParameters=null,o._setIceGatherer(n),o._setIceTransport(),o._setDtlsTransport(),o}return(0,c.default)(t,[{key:"close",value:function(){y.debug("close()");try{this._iceGatherer.close()}catch(e){}try{this._iceTransport.stop()}catch(e){}try{this._dtlsTransport.stop()}catch(e){}var e=!0,t=!1,r=void 0;try{for(var n,a=(0,o.default)(this._rtpSenders.values());!(e=(n=a.next()).done);e=!0){var i=n.value;try{i.stop()}catch(e){}}}catch(e){t=!0,r=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw r}}var s=!0,u=!1,c=void 0;try{for(var l,d=(0,o.default)(this._rtpReceivers.values());!(s=(l=d.next()).done);s=!0){var f=l.value;try{f.stop()}catch(e){}}}catch(e){u=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}}},{key:"addProducer",value:function(e){var t=this,r=e.track;return y.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._rtpSenders.has(e.id)?n.default.reject("Producer already added"):n.default.resolve().then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){y.debug("addProducer() | calling new RTCRtpSender()");var n=new RTCRtpSender(r,t._dtlsTransport),o=p.clone(t._rtpParametersByKind[e.kind]),a={ssrc:p.randomNumber()};o.codecs.some(function(e){return"rtx"===e.name})&&(a.rtx={ssrc:p.randomNumber()}),o.encodings.push(a),o.rtcp={cname:b,reducedSize:!0,mux:!0};var i=m.mangleRtpParameters(o);return y.debug("addProducer() | calling rtpSender.send() [params:%o]",i),n.send(i),t._rtpSenders.set(e.id,n),o})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return y.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),n.default.resolve().then(function(){var r=t._rtpSenders.get(e.id);if(!r)throw new Error("RTCRtpSender not found");t._rtpSenders.delete(e.id);try{y.debug("removeProducer() | calling rtpSender.stop()"),r.stop()}catch(e){y.warn("rtpSender.stop() failed:%o",e)}})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;return y.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id),n.default.resolve().then(function(){var n=r._rtpSenders.get(e.id);if(!n)throw new Error("RTCRtpSender not found");n.setTrack(t)})}},{key:"addConsumer",value:function(e){var t=this;return y.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._rtpReceivers.has(e.id)?n.default.reject("Consumer already added"):n.default.resolve().then(function(){y.debug("addProducer() | calling new RTCRtpReceiver()");var r=new RTCRtpReceiver(t._dtlsTransport,e.kind);r.addEventListener("error",function(e){y.error('iceGatherer "error" event [event:%o]',e)});var n=m.mangleRtpParameters(e.rtpParameters);y.debug("addProducer() | calling rtpReceiver.receive() [params:%o]",n),r.receive(n),t._rtpReceivers.set(e.id,r)})}},{key:"removeConsumer",value:function(e){var t=this;return y.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),n.default.resolve().then(function(){var r=t._rtpReceivers.get(e.id);if(!r)throw new Error("RTCRtpReceiver not found");t._rtpReceivers.delete(e.id);try{y.debug("removeConsumer() | calling rtpReceiver.stop()"),r.stop()}catch(e){y.warn("rtpReceiver.stop() failed:%o",e)}})}},{key:"restartIce",value:function(e){var t=this;y.debug("restartIce()"),n.default.resolve().then(function(){t._transportRemoteParameters.iceParameters=e;var r=t._transportRemoteParameters.iceCandidates;y.debug("restartIce() | calling iceTransport.start()"),t._iceTransport.start(t._iceGatherer,e,"controlling");var n=!0,a=!1,i=void 0;try{for(var s,u=(0,o.default)(r);!(n=(s=u.next()).done);n=!0){var c=s.value;t._iceTransport.addRemoteCandidate(c)}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}t._iceTransport.addRemoteCandidate({})})}},{key:"_setIceGatherer",value:function(e){var t=new RTCIceGatherer({iceServers:e.turnServers||[],gatherPolicy:"all"});t.addEventListener("error",function(e){y.error('iceGatherer "error" event [event:%o]',e)});try{t.gather()}catch(e){y.debug("iceGatherer.gather() failed: %s",e.toString())}this._iceGatherer=t}},{key:"_setIceTransport",value:function(){var e=this,t=new RTCIceTransport(this._iceGatherer);t.addEventListener("statechange",function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}}),t.addEventListener("icestatechange",function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}}),t.addEventListener("candidatepairchange",function(e){y.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)}),this._iceTransport=t}},{key:"_setDtlsTransport",value:function(){var e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",function(){y.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",function(){y.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state)}),e.addEventListener("error",function(e){y.error('dtlsTransport "error" event [event:%o]',e)}),this._dtlsTransport=e}},{key:"_setupTransport",value:function(){var e=this;return y.debug("_setupTransport()"),n.default.resolve().then(function(){var t={},r=e._dtlsTransport.getLocalParameters();return r.role="server",t.dtlsParameters=r,e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._transportRemoteParameters=t;var r=t.iceParameters,n=t.iceCandidates,a=t.dtlsParameters;e._iceTransport.start(e._iceGatherer,r,"controlling");var i=!0,s=!1,u=void 0;try{for(var c,l=(0,o.default)(n);!(i=(c=l.next()).done);i=!0){var d=c.value;e._iceTransport.addRemoteCandidate(d)}}catch(e){s=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}e._iceTransport.addRemoteCandidate({}),a.fingerprints=a.fingerprints.filter(function(e){return"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm}),e._dtlsTransport.start(a),e._transportReady=!0})}}]),t}(f.default);r.default=g},{"../EnhancedEventEmitter":187,"../Logger":188,"../ortc":205,"../utils":206,"./ortc/edgeUtils":198,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/map":21,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37}],196:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=g(e("babel-runtime/core-js/array/from")),o=g(e("babel-runtime/core-js/map")),a=g(e("babel-runtime/core-js/promise")),i=g(e("babel-runtime/core-js/object/get-prototype-of")),s=g(e("babel-runtime/helpers/classCallCheck")),u=g(e("babel-runtime/helpers/createClass")),c=g(e("babel-runtime/helpers/possibleConstructorReturn")),l=g(e("babel-runtime/helpers/inherits")),d=g(e("sdp-transform")),f=g(e("../Logger")),p=g(e("../EnhancedEventEmitter")),h=y(e("../utils")),m=y(e("../ortc")),v=y(e("./sdp/commonUtils")),_=y(e("./sdp/unifiedPlanUtils")),b=g(e("./sdp/RemoteUnifiedPlanSdp"));function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}var w=new f.default("Firefox50"),k=function(e){(0,l.default)(t,e);function t(e,r,n){(0,s.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,w));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new b.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return(0,u.default)(t,[{key:"close",value:function(){w.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(p.default),P=function(e){(0,l.default)(t,e);function t(e,r){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n._nextRid=1,n}return(0,u.default)(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(w.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return a.default.reject("track already added");var n=void 0,o=void 0;return a.default.resolve().then(function(){t._stream.addTrack(r),n=t._pc.addTrack(r,t._stream)}).then(function(){if(e.simulcast){w.debug("addProducer() | enabling simulcast");var r=[];return e.simulcast.high&&r.push({rid:"high"+t._nextRid,active:!0,priority:"high",maxBitrate:e.simulcast.high}),e.simulcast.medium&&r.push({rid:"medium"+t._nextRid,active:!0,priority:"medium",maxBitrate:e.simulcast.medium}),e.simulcast.low&&r.push({rid:"low"+t._nextRid,active:!0,priority:"low",maxBitrate:e.simulcast.low}),t._nextRid++,n.setParameters({encodings:r})}}).then(function(){return t._pc.createOffer()}).then(function(e){return w.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){o=d.default.parse(t._pc.localDescription.sdp);var e={type:"answer",sdp:t._remoteSdp.createAnswerSdp(o)};return w.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){var n=h.clone(t._rtpParametersByKind[e.kind]);return _.fillRtpParametersForTrack(n,o,r),n}).catch(function(e){try{t._pc.removeTrack(n)}catch(e){}throw t._stream.removeTrack(r),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return w.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),a.default.resolve().then(function(){var e=t._pc.getSenders().find(function(e){return e.track===r});if(!e)throw new Error("RTCRtpSender found");return t._pc.removeTrack(e),t._stream.removeTrack(r),a.default.resolve().then(function(){return t._pc.createOffer()}).then(function(e){return w.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)})}).then(function(){var e=d.default.parse(t._pc.localDescription.sdp),r={type:"answer",sdp:t._remoteSdp.createAnswerSdp(e)};return w.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;w.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track;return a.default.resolve().then(function(){var e=r._pc.getSenders().find(function(e){return e.track===n});if(!e)throw new Error("local track not found");return e.replaceTrack(t)}).then(function(){r._stream.removeTrack(n),r._stream.addTrack(t)})}},{key:"restartIce",value:function(e){var t=this;return w.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),a.default.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return w.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=d.default.parse(t._pc.localDescription.sdp),r={type:"answer",sdp:t._remoteSdp.createAnswerSdp(e)};return w.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)})}},{key:"_setupTransport",value:function(){var e=this;return w.debug("_setupTransport()"),a.default.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=d.default.parse(r),o=v.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(k),j=function(e){(0,l.default)(t,e);function t(e,r){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,i.default)(t)).call(this,"recv",e,r));n._transportCreated=!1,n._transportUpdated=!1,n._consumerInfos=new o.default;return n._consumerInfos.set(555,{mid:"fake-datachannel-consumer",kind:"application",closed:!1,cname:null}),n}return(0,u.default)(t,[{key:"addConsumer",value:function(e){var t=this;if(w.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return a.default.reject("Consumer already added");var r=e.rtpParameters.encodings[0],o=e.rtpParameters.rtcp.cname,i={mid:"consumer-"+e.kind+"-"+e.id,kind:e.kind,closed:e.closed,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:o};return r.rtx&&r.rtx.ssrc&&(i.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,i),a.default.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._consumerInfos.values()))};return w.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return w.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getReceivers().find(function(e){var t=e.track;return!!t&&t.id===i.trackId});if(!e)throw new Error("remote track not found");return e.track})}},{key:"removeConsumer",value:function(e){var t=this;w.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind);var r=this._consumerInfos.get(e.id);return r?(r.closed=!0,a.default.resolve().then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._consumerInfos.values()))};return w.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return w.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):a.default.reject("Consumer not found")}},{key:"restartIce",value:function(e){var t=this;return w.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),a.default.resolve().then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._consumerInfos.values()))};return w.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return w.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return w.debug("_setupTransport()"),a.default.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){w.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=d.default.parse(e),r={dtlsParameters:v.extractDtlsParameters(t)};this.safeEmit("@needupdatetransport",r),this._transportUpdated=!0}}]),t}(k),x=function(){(0,u.default)(e,null,[{key:"getNativeRtpCapabilities",value:function(){w.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),t=document.createElement("canvas");t.getContext("2d");var r=t.captureStream(),n=r.getVideoTracks()[0];return e.addTrack(n,r).setParameters({encodings:[{rid:"RID1",maxBitrate:4e4},{rid:"RID2",maxBitrate:1e4}]}),e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(r){try{t.remove()}catch(e){}try{e.close()}catch(e){}var n=d.default.parse(r.sdp);return v.extractRtpCapabilities(n)}).catch(function(r){try{t.remove()}catch(e){}try{e.close()}catch(e){}throw r})}},{key:"name",get:function(){return"Firefox50"}}]);function e(t,r,n){(0,s.default)(this,e),w.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:m.getSendingRtpParameters("audio",r),video:m.getSendingRtpParameters("video",r)},new P(o,n);case"recv":return o={audio:m.getReceivingFullRtpParameters("audio",r),video:m.getReceivingFullRtpParameters("video",r)},new j(o,n)}}return e}();r.default=x},{"../EnhancedEventEmitter":187,"../Logger":188,"../ortc":205,"../utils":206,"./sdp/RemoteUnifiedPlanSdp":200,"./sdp/commonUtils":201,"./sdp/unifiedPlanUtils":203,"babel-runtime/core-js/array/from":17,"babel-runtime/core-js/map":21,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"sdp-transform":235}],197:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=w(e("babel-runtime/core-js/array/from")),o=w(e("babel-runtime/core-js/map")),a=w(e("babel-runtime/core-js/set")),i=w(e("babel-runtime/core-js/promise")),s=w(e("babel-runtime/core-js/object/get-prototype-of")),u=w(e("babel-runtime/helpers/classCallCheck")),c=w(e("babel-runtime/helpers/createClass")),l=w(e("babel-runtime/helpers/possibleConstructorReturn")),d=w(e("babel-runtime/helpers/inherits")),f=w(e("sdp-transform")),p=w(e("../Logger")),h=w(e("../EnhancedEventEmitter")),m=g(e("../utils")),v=g(e("../ortc")),_=g(e("./sdp/commonUtils")),b=g(e("./sdp/planBUtils")),y=w(e("./sdp/RemotePlanBSdp"));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}var k=new p.default("Safari11"),P=function(e){(0,d.default)(t,e);function t(e,r,n){(0,u.default)(this,t);var o=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,k));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new y.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return(0,c.default)(t,[{key:"close",value:function(){k.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),j=function(e){(0,d.default)(t,e);function t(e,r){(0,u.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n}return(0,c.default)(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(k.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return i.default.reject("track already added");var n=void 0,o=void 0;return i.default.resolve().then(function(){return t._stream.addTrack(r),n=t._pc.addTrack(r,t._stream),t._pc.createOffer()}).then(function(e){return k.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){o=f.default.parse(t._pc.localDescription.sdp);var e={type:"answer",sdp:t._remoteSdp.createAnswerSdp(o)};return k.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){var n=m.clone(t._rtpParametersByKind[e.kind]);return b.fillRtpParametersForTrack(n,o,r),n}).catch(function(e){try{t._pc.removeTrack(n)}catch(e){}throw t._stream.removeTrack(r),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return k.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),i.default.resolve().then(function(){var e=t._pc.getSenders().find(function(e){return e.track===r});if(!e)throw new Error("RTCRtpSender found");return t._pc.removeTrack(e),t._stream.removeTrack(r),t._pc.createOffer()}).then(function(e){return k.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).catch(function(e){if(0!==t._stream.getTracks().length)throw e;k.warn("removeLocalTrack() | ignoring expected error due no sending tracks: %s",e.toString())}).then(function(){if("stable"!==t._pc.signalingState){var e=f.default.parse(t._pc.localDescription.sdp),r={type:"answer",sdp:t._remoteSdp.createAnswerSdp(e)};return k.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)}})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;k.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track;return i.default.resolve().then(function(){var e=r._pc.getSenders().find(function(e){return e.track===n});if(!e)throw new Error("local track not found");return e.replaceTrack(t)}).then(function(){r._stream.removeTrack(n),r._stream.addTrack(t)})}},{key:"restartIce",value:function(e){var t=this;return k.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),i.default.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=f.default.parse(t._pc.localDescription.sdp),r={type:"answer",sdp:t._remoteSdp.createAnswerSdp(e)};return k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)})}},{key:"_setupTransport",value:function(){var e=this;return k.debug("_setupTransport()"),i.default.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=f.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(P),x=function(e){(0,d.default)(t,e);function t(e,r){(0,u.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,"recv",e,r));return n._transportCreated=!1,n._transportUpdated=!1,n._kinds=new a.default,n._consumerInfos=new o.default,n}return(0,c.default)(t,[{key:"addConsumer",value:function(e){var t=this;if(k.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return i.default.reject("Consumer already added");var r=e.rtpParameters.encodings[0],o=e.rtpParameters.rtcp.cname,a={kind:e.kind,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:o};return r.rtx&&r.rtx.ssrc&&(a.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,a),this._kinds.add(e.kind),i.default.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._kinds),(0,n.default)(t._consumerInfos.values()))};return k.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return k.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getReceivers().find(function(e){var t=e.track;return!!t&&t.id===a.trackId});if(!e)throw new Error("remote track not found");return e.track})}},{key:"removeConsumer",value:function(e){var t=this;return k.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id)?(this._consumerInfos.delete(e.id),i.default.resolve().then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._kinds),(0,n.default)(t._consumerInfos.values()))};return k.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return k.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):i.default.reject("Consumer not found")}},{key:"restartIce",value:function(e){var t=this;return k.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),i.default.resolve().then(function(){var e={type:"offer",sdp:t._remoteSdp.createOfferSdp((0,n.default)(t._kinds),(0,n.default)(t._consumerInfos.values()))};return k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),t._pc.setRemoteDescription(e)}).then(function(){return t._pc.createAnswer()}).then(function(e){return k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return k.debug("_setupTransport()"),i.default.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){k.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=f.default.parse(e),r={dtlsParameters:_.extractDtlsParameters(t)};this.safeEmit("@needupdatetransport",r),this._transportUpdated=!0}}]),t}(P),C=function(){(0,c.default)(e,null,[{key:"getNativeRtpCapabilities",value:function(){k.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});return e.addTransceiver("audio"),e.addTransceiver("video"),e.createOffer().then(function(t){try{e.close()}catch(e){}var r=f.default.parse(t.sdp);return _.extractRtpCapabilities(r)}).catch(function(t){try{e.close()}catch(e){}throw t})}},{key:"name",get:function(){return"Safari11"}}]);function e(t,r,n){(0,u.default)(this,e),k.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:v.getSendingRtpParameters("audio",r),video:v.getSendingRtpParameters("video",r)},new j(o,n);case"recv":return o={audio:v.getReceivingFullRtpParameters("audio",r),video:v.getReceivingFullRtpParameters("video",r)},new x(o,n)}}return e}();r.default=C},{"../EnhancedEventEmitter":187,"../Logger":188,"../ortc":205,"../utils":206,"./sdp/RemotePlanBSdp":199,"./sdp/commonUtils":201,"./sdp/planBUtils":202,"babel-runtime/core-js/array/from":17,"babel-runtime/core-js/map":21,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/core-js/set":29,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"sdp-transform":235}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("babel-runtime/core-js/get-iterator"),a=(n=o,n&&n.__esModule?n:{default:n});r.getCapabilities=function(){var e=RTCRtpReceiver.getCapabilities(),t=i.clone(e),r=!0,n=!1,o=void 0;try{for(var s,u=(0,a.default)(t.codecs);!(r=(s=u.next()).done);r=!0){var c=s.value;c.channels=c.numChannels,delete c.numChannels,"audio"!==c.kind?delete c.channels:c.channels||(c.channels=1),c.mimeType=c.kind+"/"+c.name,"rtx"===c.name&&(c.parameters.apt=Number(c.parameters.apt));var l=!0,d=!1,f=void 0;try{for(var p,h=(0,a.default)(c.rtcpFeedback||[]);!(l=(p=h.next()).done);l=!0){var m=p.value;m.parameter||delete m.parameter}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}}}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}return t},r.mangleRtpParameters=function(e){var t=i.clone(e),r=!0,n=!1,o=void 0;try{for(var s,u=(0,a.default)(t.codecs);!(r=(s=u.next()).done);r=!0){var c=s.value;c.channels&&(c.numChannels=c.channels,delete c.channels),delete c.mimeType}}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}return t};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../../utils"))},{"../../utils":206,"babel-runtime/core-js/get-iterator":18}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=p(e("babel-runtime/core-js/object/keys")),o=p(e("babel-runtime/core-js/get-iterator")),a=p(e("babel-runtime/core-js/object/get-prototype-of")),i=p(e("babel-runtime/helpers/possibleConstructorReturn")),s=p(e("babel-runtime/helpers/inherits")),u=p(e("babel-runtime/helpers/classCallCheck")),c=p(e("babel-runtime/helpers/createClass")),l=p(e("sdp-transform")),d=p(e("../../Logger")),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../../utils"));function p(e){return e&&e.__esModule?e:{default:e}}var h=new d.default("RemotePlanBSdp"),m=function(){function e(t){(0,u.default)(this,e),this._rtpParametersByKind=t,this._transportLocalParameters=null,this._transportRemoteParameters=null,this._sdpGlobalFields={id:f.randomNumber(),version:0}}return(0,c.default)(e,[{key:"setTransportLocalParameters",value:function(e){h.debug("setTransportLocalParameters() [transportLocalParameters:%o]",e),this._transportLocalParameters=e}},{key:"setTransportRemoteParameters",value:function(e){h.debug("setTransportRemoteParameters() [transportRemoteParameters:%o]",e),this._transportRemoteParameters=e}},{key:"updateTransportRemoteIceParameters",value:function(e){h.debug("updateTransportRemoteIceParameters() [remoteIceParameters:%o]",e),this._transportRemoteParameters.iceParameters=e}}]),e}(),v=function(e){(0,s.default)(t,e);function t(e){return(0,u.default)(this,t),(0,i.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,c.default)(t,[{key:"createAnswerSdp",value:function(e){if(h.debug("createAnswerSdp()"),!this._transportLocalParameters)throw new Error("no transport local parameters");if(!this._transportRemoteParameters)throw new Error("no transport remote parameters");var t=this._transportRemoteParameters.iceParameters,r=this._transportRemoteParameters.iceCandidates,a=this._transportRemoteParameters.dtlsParameters,i={},s=(e.media||[]).map(function(e){return e.mid});this._sdpGlobalFields.version++,i.version=0,i.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},i.name="-",i.timing={start:0,stop:0},i.icelite=t.iceLite?"ice-lite":null,i.msidSemantic={semantic:"WMS",token:"*"},i.groups=[{type:"BUNDLE",mids:s.join(" ")}],i.media=[];var u=a.fingerprints.length;i.fingerprint={type:a.fingerprints[u-1].algorithm,hash:a.fingerprints[u-1].value};var c=!0,d=!1,f=void 0;try{for(var p,m=(0,o.default)(e.media||[]);!(c=(p=m.next()).done);c=!0){var v=p.value,_=v.type,b=this._rtpParametersByKind[_].codecs,y=this._rtpParametersByKind[_].headerExtensions,g={};g.type=v.type,g.port=7,g.protocol="RTP/SAVPF",g.connection={ip:"127.0.0.1",version:4},g.mid=v.mid,g.iceUfrag=t.usernameFragment,g.icePwd=t.password,g.candidates=[];var w=!0,k=!1,P=void 0;try{for(var j,x=(0,o.default)(r);!(w=(j=x.next()).done);w=!0){var C=j.value,E={};E.component=1,E.foundation=C.foundation,E.ip=C.ip,E.port=C.port,E.priority=C.priority,E.transport=C.protocol,E.type=C.type,C.tcpType&&(E.tcptype=C.tcpType),g.candidates.push(E)}}catch(e){k=!0,P=e}finally{try{!w&&x.return&&x.return()}finally{if(k)throw P}}switch(g.endOfCandidates="end-of-candidates",g.iceOptions="renomination",a.role){case"client":g.setup="active";break;case"server":g.setup="passive"}switch(v.direction){case"sendrecv":case"sendonly":g.direction="recvonly";break;case"recvonly":case"inactive":g.direction="inactive"}"video"===_&&(g.xGoogleFlag="conference"),g.rtp=[],g.rtcpFb=[],g.fmtp=[];var S=!0,R=!1,T=void 0;try{for(var O,I=(0,o.default)(b);!(S=(O=I.next()).done);S=!0){var A=O.value,M={payload:A.payloadType,codec:A.name,rate:A.clockRate};if(A.channels>1&&(M.encoding=A.channels),g.rtp.push(M),A.parameters){var N={payload:A.payloadType,config:""},D=!0,L=!1,F=void 0;try{for(var U,W=(0,o.default)((0,n.default)(A.parameters));!(D=(U=W.next()).done);D=!0){var B=U.value;N.config&&(N.config+=";"),N.config+=B+"="+A.parameters[B]}}catch(e){L=!0,F=e}finally{try{!D&&W.return&&W.return()}finally{if(L)throw F}}N.config&&g.fmtp.push(N)}if(A.rtcpFeedback){var z=!0,q=!1,G=void 0;try{for(var V,K=(0,o.default)(A.rtcpFeedback);!(z=(V=K.next()).done);z=!0){var $=V.value;g.rtcpFb.push({payload:A.payloadType,type:$.type,subtype:$.parameter||""})}}catch(e){q=!0,G=e}finally{try{!z&&K.return&&K.return()}finally{if(q)throw G}}}}}catch(e){R=!0,T=e}finally{try{!S&&I.return&&I.return()}finally{if(R)throw T}}g.payloads=b.map(function(e){return e.payloadType}).join(" "),g.ext=[];var H=!0,J=!1,Y=void 0;try{for(var Z,Q=function(){var e=Z.value;if(!(v.ext||[]).find(function(t){return t.uri===e.uri}))return"continue";g.ext.push({uri:e.uri,value:e.id})},X=(0,o.default)(y);!(H=(Z=X.next()).done);H=!0){Q()}}catch(e){J=!0,Y=e}finally{try{!H&&X.return&&X.return()}finally{if(J)throw Y}}g.rtcpMux="rtcp-mux",g.rtcpRsize="rtcp-rsize",i.media.push(g)}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}return l.default.write(i)}}]),t}(m),_=function(e){(0,s.default)(t,e);function t(e){(0,u.default)(this,t);var r=(0,i.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r._streamId="recv-stream-"+f.randomNumber(),r}return(0,c.default)(t,[{key:"createOfferSdp",value:function(e,t){var r=this;if(h.debug("createOfferSdp()"),!this._transportRemoteParameters)throw new Error("no transport remote parameters");var a=this._transportRemoteParameters.iceParameters,i=this._transportRemoteParameters.iceCandidates,s=this._transportRemoteParameters.dtlsParameters,u={},c=e;this._sdpGlobalFields.version++,u.version=0,u.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},u.name="-",u.timing={start:0,stop:0},u.icelite=a.iceLite?"ice-lite":null,u.msidSemantic={semantic:"WMS",token:"*"},u.groups=[{type:"BUNDLE",mids:c.join(" ")}],u.media=[];var d=s.fingerprints.length;u.fingerprint={type:s.fingerprints[d-1].algorithm,hash:s.fingerprints[d-1].value};var f=!0,p=!1,m=void 0;try{for(var v,_=function(){var e=v.value,s=r._rtpParametersByKind[e].codecs,c=r._rtpParametersByKind[e].headerExtensions,l={};l.type=e,l.port=7,l.protocol="RTP/SAVPF",l.connection={ip:"127.0.0.1",version:4},l.mid=e,l.iceUfrag=a.usernameFragment,l.icePwd=a.password,l.candidates=[];var d=!0,f=!1,p=void 0;try{for(var h,m=(0,o.default)(i);!(d=(h=m.next()).done);d=!0){var _=h.value,b={};b.component=1,b.foundation=_.foundation,b.ip=_.ip,b.port=_.port,b.priority=_.priority,b.transport=_.protocol,b.type=_.type,_.tcpType&&(b.tcptype=_.tcpType),l.candidates.push(b)}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}l.endOfCandidates="end-of-candidates",l.iceOptions="renomination",l.setup="actpass",t.some(function(t){return t.kind===e})?l.direction="sendonly":l.direction="inactive",l.rtp=[],l.rtcpFb=[],l.fmtp=[];var y=!0,g=!1,w=void 0;try{for(var k,P=(0,o.default)(s);!(y=(k=P.next()).done);y=!0){var j=k.value,x={payload:j.payloadType,codec:j.name,rate:j.clockRate};if(j.channels>1&&(x.encoding=j.channels),l.rtp.push(x),j.parameters){var C={payload:j.payloadType,config:""},E=!0,S=!1,R=void 0;try{for(var T,O=(0,o.default)((0,n.default)(j.parameters));!(E=(T=O.next()).done);E=!0){var I=T.value;C.config&&(C.config+=";"),C.config+=I+"="+j.parameters[I]}}catch(e){S=!0,R=e}finally{try{!E&&O.return&&O.return()}finally{if(S)throw R}}C.config&&l.fmtp.push(C)}if(j.rtcpFeedback){var A=!0,M=!1,N=void 0;try{for(var D,L=(0,o.default)(j.rtcpFeedback);!(A=(D=L.next()).done);A=!0){var F=D.value;l.rtcpFb.push({payload:j.payloadType,type:F.type,subtype:F.parameter||""})}}catch(e){M=!0,N=e}finally{try{!A&&L.return&&L.return()}finally{if(M)throw N}}}}}catch(e){g=!0,w=e}finally{try{!y&&P.return&&P.return()}finally{if(g)throw w}}l.payloads=s.map(function(e){return e.payloadType}).join(" "),l.ext=[];var U=!0,W=!1,B=void 0;try{for(var z,q=(0,o.default)(c);!(U=(z=q.next()).done);U=!0){var G=z.value;l.ext.push({uri:G.uri,value:G.id})}}catch(e){W=!0,B=e}finally{try{!U&&q.return&&q.return()}finally{if(W)throw B}}l.rtcpMux="rtcp-mux",l.rtcpRsize="rtcp-rsize",l.ssrcs=[],l.ssrcGroups=[];var V=!0,K=!1,$=void 0;try{for(var H,J=(0,o.default)(t);!(V=(H=J.next()).done);V=!0){var Y=H.value;Y.kind===e&&(l.ssrcs.push({id:Y.ssrc,attribute:"msid",value:r._streamId+" "+Y.trackId}),l.ssrcs.push({id:Y.ssrc,attribute:"mslabel",value:r._streamId}),l.ssrcs.push({id:Y.ssrc,attribute:"label",value:Y.trackId}),l.ssrcs.push({id:Y.ssrc,attribute:"cname",value:Y.cname}),Y.rtxSsrc&&(l.ssrcs.push({id:Y.rtxSsrc,attribute:"msid",value:r._streamId+" "+Y.trackId}),l.ssrcs.push({id:Y.rtxSsrc,attribute:"mslabel",value:r._streamId}),l.ssrcs.push({id:Y.rtxSsrc,attribute:"label",value:Y.trackId}),l.ssrcs.push({id:Y.rtxSsrc,attribute:"cname",value:Y.cname}),l.ssrcGroups.push({semantics:"FID",ssrcs:Y.ssrc+" "+Y.rtxSsrc})))}}catch(e){K=!0,$=e}finally{try{!V&&J.return&&J.return()}finally{if(K)throw $}}u.media.push(l)},b=(0,o.default)(e);!(f=(v=b.next()).done);f=!0)_()}catch(e){p=!0,m=e}finally{try{!f&&b.return&&b.return()}finally{if(p)throw m}}return l.default.write(u)}}]),t}(m);r.default=function e(t,r){switch((0,u.default)(this,e),h.debug("constructor() [direction:%s, rtpParametersByKind:%o]",t,r),t){case"send":return new v(r);case"recv":return new _(r)}}},{"../../Logger":188,"../../utils":206,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/object/keys":26,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"sdp-transform":235}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=p(e("babel-runtime/core-js/object/keys")),o=p(e("babel-runtime/core-js/get-iterator")),a=p(e("babel-runtime/core-js/object/get-prototype-of")),i=p(e("babel-runtime/helpers/possibleConstructorReturn")),s=p(e("babel-runtime/helpers/inherits")),u=p(e("babel-runtime/helpers/classCallCheck")),c=p(e("babel-runtime/helpers/createClass")),l=p(e("sdp-transform")),d=p(e("../../Logger")),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e("../../utils"));function p(e){return e&&e.__esModule?e:{default:e}}var h=new d.default("RemoteUnifiedPlanSdp"),m=function(){function e(t){(0,u.default)(this,e),this._rtpParametersByKind=t,this._transportLocalParameters=null,this._transportRemoteParameters=null,this._sdpGlobalFields={id:f.randomNumber(),version:0}}return(0,c.default)(e,[{key:"setTransportLocalParameters",value:function(e){h.debug("setTransportLocalParameters() [transportLocalParameters:%o]",e),this._transportLocalParameters=e}},{key:"setTransportRemoteParameters",value:function(e){h.debug("setTransportRemoteParameters() [transportRemoteParameters:%o]",e),this._transportRemoteParameters=e}},{key:"updateTransportRemoteIceParameters",value:function(e){h.debug("updateTransportRemoteIceParameters() [remoteIceParameters:%o]",e),this._transportRemoteParameters.iceParameters=e}}]),e}(),v=function(e){(0,s.default)(t,e);function t(e){return(0,u.default)(this,t),(0,i.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,c.default)(t,[{key:"createAnswerSdp",value:function(e){if(h.debug("createAnswerSdp()"),!this._transportLocalParameters)throw new Error("no transport local parameters");if(!this._transportRemoteParameters)throw new Error("no transport remote parameters");var t=this._transportRemoteParameters.iceParameters,r=this._transportRemoteParameters.iceCandidates,a=this._transportRemoteParameters.dtlsParameters,i={},s=(e.media||[]).filter(function(e){return e.mid}).map(function(e){return e.mid});this._sdpGlobalFields.version++,i.version=0,i.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},i.name="-",i.timing={start:0,stop:0},i.icelite=t.iceLite?"ice-lite":null,i.msidSemantic={semantic:"WMS",token:"*"},s.length>0&&(i.groups=[{type:"BUNDLE",mids:s.join(" ")}]),i.media=[];var u=a.fingerprints.length;i.fingerprint={type:a.fingerprints[u-1].algorithm,hash:a.fingerprints[u-1].value};var c=!0,d=!1,f=void 0;try{for(var p,m=(0,o.default)(e.media||[]);!(c=(p=m.next()).done);c=!0){var v=p.value,_="inactive"===v.direction,b=v.type,y=this._rtpParametersByKind[b].codecs,g=this._rtpParametersByKind[b].headerExtensions,w={};w.type=v.type,w.port=7,w.protocol="RTP/SAVPF",w.connection={ip:"127.0.0.1",version:4},w.mid=v.mid,w.iceUfrag=t.usernameFragment,w.icePwd=t.password,w.candidates=[];var k=!0,P=!1,j=void 0;try{for(var x,C=(0,o.default)(r);!(k=(x=C.next()).done);k=!0){var E=x.value,S={};S.component=1,S.foundation=E.foundation,S.ip=E.ip,S.port=E.port,S.priority=E.priority,S.transport=E.protocol,S.type=E.type,E.tcpType&&(S.tcptype=E.tcpType),w.candidates.push(S)}}catch(e){P=!0,j=e}finally{try{!k&&C.return&&C.return()}finally{if(P)throw j}}switch(w.endOfCandidates="end-of-candidates",w.iceOptions="renomination",a.role){case"client":w.setup="active";break;case"server":w.setup="passive"}switch(v.direction){case"sendrecv":case"sendonly":w.direction="recvonly";break;case"recvonly":case"inactive":w.direction="inactive"}w.rtp=[],w.rtcpFb=[],w.fmtp=[];var R=!0,T=!1,O=void 0;try{for(var I,A=(0,o.default)(y);!(R=(I=A.next()).done);R=!0){var M=I.value,N={payload:M.payloadType,codec:M.name,rate:M.clockRate};if(M.channels>1&&(N.encoding=M.channels),w.rtp.push(N),M.parameters){var D={payload:M.payloadType,config:""},L=!0,F=!1,U=void 0;try{for(var W,B=(0,o.default)((0,n.default)(M.parameters));!(L=(W=B.next()).done);L=!0){var z=W.value;D.config&&(D.config+=";"),D.config+=z+"="+M.parameters[z]}}catch(e){F=!0,U=e}finally{try{!L&&B.return&&B.return()}finally{if(F)throw U}}D.config&&w.fmtp.push(D)}if(M.rtcpFeedback){var q=!0,G=!1,V=void 0;try{for(var K,$=(0,o.default)(M.rtcpFeedback);!(q=(K=$.next()).done);q=!0){var H=K.value;w.rtcpFb.push({payload:M.payloadType,type:H.type,subtype:H.parameter||""})}}catch(e){G=!0,V=e}finally{try{!q&&$.return&&$.return()}finally{if(G)throw V}}}}}catch(e){T=!0,O=e}finally{try{!R&&A.return&&A.return()}finally{if(T)throw O}}if(w.payloads=y.map(function(e){return e.payloadType}).join(" "),!_){w.ext=[];var J=!0,Y=!1,Z=void 0;try{for(var Q,X=function(){var e=Q.value;if(!(v.ext||[]).find(function(t){return t.uri===e.uri}))return"continue";w.ext.push({uri:e.uri,value:e.id})},ee=(0,o.default)(g);!(J=(Q=ee.next()).done);J=!0){X()}}catch(e){Y=!0,Z=e}finally{try{!J&&ee.return&&ee.return()}finally{if(Y)throw Z}}}if(v.simulcast_03){w.simulcast_03={value:v.simulcast_03.value.replace(/send/g,"recv")},w.rids=[];var te=!0,re=!1,ne=void 0;try{for(var oe,ae=(0,o.default)(v.rids||[]);!(te=(oe=ae.next()).done);te=!0){var ie=oe.value;"send"===ie.direction&&w.rids.push({id:ie.id,direction:"recv"})}}catch(e){re=!0,ne=e}finally{try{!te&&ae.return&&ae.return()}finally{if(re)throw ne}}}w.rtcpMux="rtcp-mux",w.rtcpRsize="rtcp-rsize",i.media.push(w)}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}return l.default.write(i)}}]),t}(m),_=function(e){(0,s.default)(t,e);function t(e){(0,u.default)(this,t);var r=(0,i.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r._streamId="recv-stream-"+f.randomNumber(),r}return(0,c.default)(t,[{key:"createOfferSdp",value:function(e){if(h.debug("createOfferSdp()"),!this._transportRemoteParameters)throw new Error("no transport remote parameters");var t=this._transportRemoteParameters.iceParameters,r=this._transportRemoteParameters.iceCandidates,a=this._transportRemoteParameters.dtlsParameters,i={},s=e.filter(function(e){return!e.closed}).map(function(e){return e.mid});this._sdpGlobalFields.version++,i.version=0,i.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},i.name="-",i.timing={start:0,stop:0},i.icelite=t.iceLite?"ice-lite":null,i.msidSemantic={semantic:"WMS",token:"*"},s.length>0&&(i.groups=[{type:"BUNDLE",mids:s.join(" ")}]),i.media=[];var u=a.fingerprints.length;i.fingerprint={type:a.fingerprints[u-1].algorithm,hash:a.fingerprints[u-1].value};var c=!0,d=!1,f=void 0;try{for(var p,m=(0,o.default)(e);!(c=(p=m.next()).done);c=!0){var v=p.value,_=v.closed,b=v.kind,y=void 0,g=void 0;"application"!==v.kind&&(y=this._rtpParametersByKind[b].codecs,g=this._rtpParametersByKind[b].headerExtensions);var w={};"application"!==v.kind?(w.type=b,w.port=7,w.protocol="RTP/SAVPF",w.connection={ip:"127.0.0.1",version:4},w.mid=v.mid,w.msid=this._streamId+" "+v.trackId):(w.type=b,w.port=9,w.protocol="DTLS/SCTP",w.connection={ip:"127.0.0.1",version:4},w.mid=v.mid),w.iceUfrag=t.usernameFragment,w.icePwd=t.password,w.candidates=[];var k=!0,P=!1,j=void 0;try{for(var x,C=(0,o.default)(r);!(k=(x=C.next()).done);k=!0){var E=x.value,S={};S.component=1,S.foundation=E.foundation,S.ip=E.ip,S.port=E.port,S.priority=E.priority,S.transport=E.protocol,S.type=E.type,E.tcpType&&(S.tcptype=E.tcpType),w.candidates.push(S)}}catch(e){P=!0,j=e}finally{try{!k&&C.return&&C.return()}finally{if(P)throw j}}if(w.endOfCandidates="end-of-candidates",w.iceOptions="renomination",w.setup="actpass","application"!==v.kind){w.direction=_?"inactive":"sendonly",w.rtp=[],w.rtcpFb=[],w.fmtp=[];var R=!0,T=!1,O=void 0;try{for(var I,A=(0,o.default)(y);!(R=(I=A.next()).done);R=!0){var M=I.value,N={payload:M.payloadType,codec:M.name,rate:M.clockRate};if(M.channels>1&&(N.encoding=M.channels),w.rtp.push(N),M.parameters){var D={payload:M.payloadType,config:""},L=!0,F=!1,U=void 0;try{for(var W,B=(0,o.default)((0,n.default)(M.parameters));!(L=(W=B.next()).done);L=!0){var z=W.value;D.config&&(D.config+=";"),D.config+=z+"="+M.parameters[z]}}catch(e){F=!0,U=e}finally{try{!L&&B.return&&B.return()}finally{if(F)throw U}}D.config&&w.fmtp.push(D)}if(M.rtcpFeedback){var q=!0,G=!1,V=void 0;try{for(var K,$=(0,o.default)(M.rtcpFeedback);!(q=(K=$.next()).done);q=!0){var H=K.value;w.rtcpFb.push({payload:M.payloadType,type:H.type,subtype:H.parameter||""})}}catch(e){G=!0,V=e}finally{try{!q&&$.return&&$.return()}finally{if(G)throw V}}}}}catch(e){T=!0,O=e}finally{try{!R&&A.return&&A.return()}finally{if(T)throw O}}if(w.payloads=y.map(function(e){return e.payloadType}).join(" "),!_){w.ext=[];var J=!0,Y=!1,Z=void 0;try{for(var Q,X=(0,o.default)(g);!(J=(Q=X.next()).done);J=!0){var ee=Q.value;w.ext.push({uri:ee.uri,value:ee.id})}}catch(e){Y=!0,Z=e}finally{try{!J&&X.return&&X.return()}finally{if(Y)throw Z}}}w.rtcpMux="rtcp-mux",w.rtcpRsize="rtcp-rsize",_||(w.ssrcs=[],w.ssrcGroups=[],w.ssrcs.push({id:v.ssrc,attribute:"cname",value:v.cname}),v.rtxSsrc&&(w.ssrcs.push({id:v.rtxSsrc,attribute:"cname",value:v.cname}),w.ssrcGroups.push({semantics:"FID",ssrcs:v.ssrc+" "+v.rtxSsrc})))}else w.payloads=5e3,w.sctpmap={app:"webrtc-datachannel",maxMessageSize:256,sctpmapNumber:5e3};i.media.push(w)}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}return l.default.write(i)}}]),t}(m);r.default=function e(t,r){switch((0,u.default)(this,e),h.debug("constructor() [direction:%s, rtpParametersByKind:%o]",t,r),t){case"send":return new v(r);case"recv":return new _(r)}}},{"../../Logger":188,"../../utils":206,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/object/keys":26,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,"sdp-transform":235}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("babel-runtime/core-js/get-iterator")),o=s(e("babel-runtime/core-js/array/from")),a=s(e("babel-runtime/core-js/map"));r.extractRtpCapabilities=function(e){var t=new a.default,r=[],s=!1,u=!1,c=!0,l=!1,d=void 0;try{for(var f,p=(0,n.default)(e.media);!(c=(f=p.next()).done);c=!0){var h=f.value,m=h.type;switch(m){case"audio":if(s)continue;s=!0;break;case"video":if(u)continue;u=!0;break;default:continue}var v=!0,_=!1,b=void 0;try{for(var y,g=(0,n.default)(h.rtp);!(v=(y=g.next()).done);v=!0){var w=y.value,k={name:w.codec,mimeType:m+"/"+w.codec,kind:m,clockRate:w.rate,preferredPayloadType:w.payload,channels:w.encoding,rtcpFeedback:[],parameters:{}};"audio"!==k.kind?delete k.channels:k.channels||(k.channels=1),t.set(k.preferredPayloadType,k)}}catch(e){_=!0,b=e}finally{try{!v&&g.return&&g.return()}finally{if(_)throw b}}var P=!0,j=!1,x=void 0;try{for(var C,E=(0,n.default)(h.fmtp||[]);!(P=(C=E.next()).done);P=!0){var S=C.value,R=i.default.parseFmtpConfig(S.config),T=t.get(S.payload);T&&(T.parameters=R)}}catch(e){j=!0,x=e}finally{try{!P&&E.return&&E.return()}finally{if(j)throw x}}var O=!0,I=!1,A=void 0;try{for(var M,N=(0,n.default)(h.rtcpFb||[]);!(O=(M=N.next()).done);O=!0){var D=M.value,L=t.get(D.payload);if(L){var F={type:D.type,parameter:D.subtype};F.parameter||delete F.parameter,L.rtcpFeedback.push(F)}}}catch(e){I=!0,A=e}finally{try{!O&&N.return&&N.return()}finally{if(I)throw A}}var U=!0,W=!1,B=void 0;try{for(var z,q=(0,n.default)(h.ext||[]);!(U=(z=q.next()).done);U=!0){var G=z.value,V={kind:m,uri:G.uri,preferredId:G.value};r.push(V)}}catch(e){W=!0,B=e}finally{try{!U&&q.return&&q.return()}finally{if(W)throw B}}}}catch(e){l=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(l)throw d}}return{codecs:(0,o.default)(t.values()),headerExtensions:r,fecMechanisms:[]}},r.extractDtlsParameters=function(e){var t=(o=e,(o.media||[]).find(function(e){return e.iceUfrag&&0!==e.port})),r=t.fingerprint||e.fingerprint,n=void 0;var o;switch(t.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto"}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}};var i=s(e("sdp-transform"));function s(e){return e&&e.__esModule?e:{default:e}}},{"babel-runtime/core-js/array/from":17,"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/map":21,"sdp-transform":235}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("babel-runtime/helpers/slicedToArray")),o=s(e("babel-runtime/core-js/get-iterator")),a=s(e("babel-runtime/core-js/map")),i=s(e("babel-runtime/core-js/set"));r.fillRtpParametersForTrack=function(e,t,r){var s=r.kind,u={cname:null,reducedSize:!0,mux:!0},c=(t.media||[]).find(function(e){return e.type===s});if(!c)throw new Error("m="+s+" section not found");var l=void 0,d=new i.default,f=!0,p=!1,h=void 0;try{for(var m,v=(0,o.default)(c.ssrcs||[]);!(f=(m=v.next()).done);f=!0){var _=m.value;if("msid"===_.attribute){var b=_.value.split(" ")[1];if(b===r.id){var y=_.id;d.add(y),l||(l=y)}}}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}if(0===d.size)throw new Error("a=ssrc line not found for local track [track.id:"+r.id+"]");var g=new a.default,w=!0,k=!1,P=void 0;try{for(var j,x=(0,o.default)(c.ssrcGroups||[]);!(w=(j=x.next()).done);w=!0){var C=j.value;if("FID"===C.semantics){var E=C.ssrcs.split(/\s+/),S=(0,n.default)(E,2),R=S[0],T=S[1];R=Number(R),T=Number(T),d.has(R)&&(d.delete(R),d.delete(T),g.set(R,T))}}}catch(e){k=!0,P=e}finally{try{!w&&x.return&&x.return()}finally{if(k)throw P}}var O=!0,I=!1,A=void 0;try{for(var M,N=(0,o.default)(d);!(O=(M=N.next()).done);O=!0){var D=M.value;g.set(D,null)}}catch(e){I=!0,A=e}finally{try{!O&&N.return&&N.return()}finally{if(I)throw A}}var L=c.ssrcs.find(function(e){return"cname"===e.attribute&&e.id===l});L&&(u.cname=L.value);e.rtcp=u,e.encodings=[];var F=g.size>1,U=["low","medium","high"],W=!0,B=!1,z=void 0;try{for(var q,G=(0,o.default)(g);!(W=(q=G.next()).done);W=!0){var V=(0,n.default)(q.value,2),K=V[0],T=V[1],$={ssrc:K};T&&($.rtx={ssrc:T}),F&&($.profile=U.shift()),e.encodings.push($)}}catch(e){B=!0,z=e}finally{try{!W&&G.return&&G.return()}finally{if(B)throw z}}},r.addSimulcastForTrack=function(e,t){var r=t.kind,n=(e.media||[]).find(function(e){return e.type===r});if(!n)throw new Error("m="+r+" section not found");var o=void 0,a=void 0,i=void 0;if(!(n.ssrcs||[]).find(function(e){if("msid"!==e.attribute)return!1;var r=e.value.split(" ")[1];return r===t.id?(o=e.id,i=e.value.split(" ")[0],!0):void 0}))throw new Error("a=ssrc line not found for local track [track.id:"+t.id+"]");(n.ssrcGroups||[]).some(function(e){if("FID"===e.semantics){var t=e.ssrcs.split(/\s+/);return Number(t[0])===o?(a=Number(t[1]),!0):void 0}});var s=n.ssrcs.find(function(e){return"cname"===e.attribute&&e.id===o});if(!s)throw new Error("CNAME line not found for local track [track.id:"+t.id+"]");var u=s.value,c=o+1,l=o+2;if(n.ssrcGroups=n.ssrcGroups||[],n.ssrcGroups.push({semantics:"SIM",ssrcs:o+" "+c+" "+l}),n.ssrcs.push({id:c,attribute:"cname",value:u}),n.ssrcs.push({id:c,attribute:"msid",value:i+" "+t.id}),n.ssrcs.push({id:l,attribute:"cname",value:u}),n.ssrcs.push({id:l,attribute:"msid",value:i+" "+t.id}),a){var d=a+1,f=a+2;n.ssrcGroups.push({semantics:"FID",ssrcs:c+" "+d}),n.ssrcs.push({id:d,attribute:"cname",value:u}),n.ssrcs.push({id:d,attribute:"msid",value:i+" "+t.id}),n.ssrcGroups.push({semantics:"FID",ssrcs:l+" "+f}),n.ssrcs.push({id:f,attribute:"cname",value:u}),n.ssrcs.push({id:f,attribute:"msid",value:i+" "+t.id})}};function s(e){return e&&e.__esModule?e:{default:e}}},{"babel-runtime/core-js/get-iterator":18,"babel-runtime/core-js/map":21,"babel-runtime/core-js/set":29,"babel-runtime/helpers/slicedToArray":38}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("babel-runtime/core-js/get-iterator"),a=(n=o,n&&n.__esModule?n:{default:n});r.fillRtpParametersForTrack=function(e,t,r){var n=r.kind,o={cname:null,reducedSize:!0,mux:!0},i=(t.media||[]).find(function(e){if(e.type===n){var t=e.msid;if(t){var o=t.split(" ")[1];return o===r.id||void 0}}});if(!i)throw new Error("m="+n+" section not found");var s=(i.ssrcs||[]).find(function(e){return"cname"===e.attribute}),u=void 0;s&&(u=s.id,o.cname=s.value);var c=[],l=!0,d=!1,f=void 0;try{for(var p,h=(0,a.default)(i.rids||[]);!(l=(p=h.next()).done);l=!0){var m=p.value;"send"===m.direction&&(/^low/.test(m.id)?c.push({rid:m.id,profile:"low"}):/^medium/.test(m.id)&&c.push({rid:m.id,profile:"medium"}),/^high/.test(m.id)&&c.push({rid:m.id,profile:"high"}))}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}if(e.rtcp=o,e.encodings=[],0===c.length){var v={ssrc:u};e.encodings.push(v)}else{var _=!0,b=!1,y=void 0;try{for(var g,w=(0,a.default)(c);!(_=(g=w.next()).done);_=!0){var k=g.value,P={encodingId:k.rid,profile:k.profile};e.encodings.push(P)}}catch(e){b=!0,y=e}finally{try{!_&&w.return&&w.return()}finally{if(b)throw y}}}}},{"babel-runtime/core-js/get-iterator":18}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Room=void 0,r.isDeviceSupported=function(){return n.default.isSupported()},r.getDeviceInfo=function(){return{flag:n.default.flag,name:n.default.name,version:n.default.version,bowser:n.default.bowser}};var n=a(e("./Device")),o=a(e("./Room"));function a(e){return e&&e.__esModule?e:{default:e}}r.Room=o.default},{"./Device":186,"./Room":191}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o=e("babel-runtime/core-js/get-iterator"),a=(n=o,n&&n.__esModule?n:{default:n});r.getExtendedRtpCapabilities=function(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=!0,o=!1,i=void 0;try{for(var s,u=function(){var t=s.value;if("rtx"===t.name)return"continue";var n=(e.codecs||[]).find(function(e){return function(e,t){var r=e.mimeType.toLowerCase(),n=t.mimeType.toLowerCase();if(r!==n)return!1;if(e.clockRate!==t.clockRate)return!1;if(e.channels!==t.channels)return!1;if("video/h264"===r){var o=(e.parameters||{})["packetization-mode"]||0,a=(t.parameters||{})["packetization-mode"]||0;if(o!==a)return!1}return!0}(e,t)});if(n){var o={name:t.name,mimeType:t.mimeType,kind:t.kind,clockRate:t.clockRate,sendPayloadType:n.preferredPayloadType,sendRtxPayloadType:null,recvPayloadType:t.preferredPayloadType,recvRtxPayloadType:null,channels:t.channels,rtcpFeedback:function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,u=function(){var e=s.value,n=(t.rtcpFeedback||[]).find(function(t){return t.type===e.type&&t.parameter===e.parameter});n&&r.push(n)},c=(0,a.default)(e.rtcpFeedback||[]);!(n=(s=c.next()).done);n=!0)u()}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return r}(n,t),parameters:t.parameters};o.channels||delete o.channels,r.codecs.push(o)}},c=(0,a.default)(t.codecs||[]);!(n=(s=c.next()).done);n=!0){u()}}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}var l=!0,d=!1,f=void 0;try{for(var p,h=function(){var r=p.value,n=(e.codecs||[]).find(function(e){return"rtx"===e.name&&e.parameters.apt===r.sendPayloadType}),o=(t.codecs||[]).find(function(e){return"rtx"===e.name&&e.parameters.apt===r.recvPayloadType});n&&o&&(r.sendRtxPayloadType=n.preferredPayloadType,r.recvRtxPayloadType=o.preferredPayloadType)},m=(0,a.default)(r.codecs||[]);!(l=(p=m.next()).done);l=!0)h()}catch(e){d=!0,f=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw f}}var v=!0,_=!1,b=void 0;try{for(var y,g=function(){var t=y.value,n=(e.headerExtensions||[]).find(function(e){return n=t,!((r=e).kind&&n.kind&&r.kind!==n.kind||r.uri!==n.uri);var r,n});if(n){var o={kind:t.kind,uri:t.uri,sendId:n.preferredId,recvId:t.preferredId};r.headerExtensions.push(o)}},w=(0,a.default)(t.headerExtensions||[]);!(v=(y=w.next()).done);v=!0)g()}catch(e){_=!0,b=e}finally{try{!v&&w.return&&w.return()}finally{if(_)throw b}}return r},r.getRtpCapabilities=function(e){var t={codecs:[],headerExtensions:[],fecMechanisms:[]},r=!0,n=!1,o=void 0;try{for(var i,s=(0,a.default)(e.codecs);!(r=(i=s.next()).done);r=!0){var u=i.value,c={name:u.name,mimeType:u.mimeType,kind:u.kind,clockRate:u.clockRate,preferredPayloadType:u.recvPayloadType,channels:u.channels,rtcpFeedback:u.rtcpFeedback,parameters:u.parameters};if(c.channels||delete c.channels,t.codecs.push(c),u.recvRtxPayloadType){var l={name:"rtx",mimeType:u.kind+"/rtx",kind:u.kind,clockRate:u.clockRate,preferredPayloadType:u.recvRtxPayloadType,parameters:{apt:u.recvPayloadType}};t.codecs.push(l)}}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}var d=!0,f=!1,p=void 0;try{for(var h,m=(0,a.default)(e.headerExtensions);!(d=(h=m.next()).done);d=!0){var v=h.value,_={kind:v.kind,uri:v.uri,preferredId:v.recvId};t.headerExtensions.push(_)}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}return t.fecMechanisms=e.fecMechanisms,t},r.getUnsupportedCodecs=function(e,t,r){if(!Array.isArray(t))return[];var n=[],o=e.codecs,i=r.codecs,s=!0,u=!1,c=void 0;try{for(var l,d=function(){var e=l.value;if(!i.some(function(t){return t.recvPayloadType===e})){var t=o.find(function(t){return t.preferredPayloadType===e});if(!t)throw new Error("mandatory codec PT "+e+" not found in remote codecs");n.push(t)}},f=(0,a.default)(t);!(s=(l=f.next()).done);s=!0)d()}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return n},r.canSend=function(e,t){return t.codecs.some(function(t){return t.kind===e})},r.canReceive=function(e,t){if(0===e.codecs.length)return!1;var r=e.codecs[0];return t.codecs.some(function(e){return e.recvPayloadType===r.payloadType})},r.getSendingRtpParameters=function(e,t){var r={muxId:null,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},n=!0,o=!1,i=void 0;try{for(var s,u=(0,a.default)(t.codecs);!(n=(s=u.next()).done);n=!0){var c=s.value;if(c.kind===e){var l={name:c.name,mimeType:c.mimeType,clockRate:c.clockRate,payloadType:c.sendPayloadType,channels:c.channels,rtcpFeedback:c.rtcpFeedback,parameters:c.parameters};if(l.channels||delete l.channels,r.codecs.push(l),c.sendRtxPayloadType){var d={name:"rtx",mimeType:c.kind+"/rtx",clockRate:c.clockRate,payloadType:c.sendRtxPayloadType,parameters:{apt:c.sendPayloadType}};r.codecs.push(d)}break}}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}var f=!0,p=!1,h=void 0;try{for(var m,v=(0,a.default)(t.headerExtensions);!(f=(m=v.next()).done);f=!0){var _=m.value;if(!_.kind||_.kind===e){var b={uri:_.uri,id:_.sendId};r.headerExtensions.push(b)}}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}return r},r.getReceivingFullRtpParameters=function(e,t){var r={muxId:null,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},n=!0,o=!1,i=void 0;try{for(var s,u=(0,a.default)(t.codecs);!(n=(s=u.next()).done);n=!0){var c=s.value;if(c.kind===e){var l={name:c.name,mimeType:c.mimeType,clockRate:c.clockRate,payloadType:c.recvPayloadType,channels:c.channels,rtcpFeedback:c.rtcpFeedback,parameters:c.parameters};if(l.channels||delete l.channels,r.codecs.push(l),c.recvRtxPayloadType){var d={name:"rtx",mimeType:c.kind+"/rtx",clockRate:c.clockRate,payloadType:c.recvRtxPayloadType,parameters:{apt:c.recvPayloadType}};r.codecs.push(d)}}}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}var f=!0,p=!1,h=void 0;try{for(var m,v=(0,a.default)(t.headerExtensions);!(f=(m=v.next()).done);f=!0){var _=m.value;if(!_.kind||_.kind===e){var b={uri:_.uri,id:_.recvId};r.headerExtensions.push(b)}}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}return r}},{"babel-runtime/core-js/get-iterator":18}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("babel-runtime/core-js/json/stringify"));r.randomNumber=function(){return a()},r.clone=function(e){return JSON.parse((0,n.default)(e))};function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("random-number")).default.generator({min:1e7,max:99999999,integer:!0})},{"babel-runtime/core-js/json/stringify":20,"random-number":219}],207:[function(e,t,r){arguments[4][169][0].apply(r,arguments)},{"./debug":208,_process:210,dup:169}],208:[function(e,t,r){arguments[4][170][0].apply(r,arguments)},{dup:170,ms:209}],209:[function(e,t,r){var n=1e3,o=60*n,a=60*o,i=24*a,s=365.25*i;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*s;case"days":case"day":case"d":return r*i;case"hours":case"hour":case"hrs":case"hr":case"h":return r*a;case"minutes":case"minute":case"mins":case"min":case"m":return r*o;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?u(c=e,i,"day")||u(c,a,"hour")||u(c,o,"minute")||u(c,n,"second")||c+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=a)return Math.round(e/a)+"h";if(e>=o)return Math.round(e/o)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);var c;throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function u(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}},{}],210:[function(e,t,r){var n,o,a=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var c,l=[],d=!1,f=-1;function p(){d&&c&&(d=!1,c.length?l=c.concat(l):f=-1,l.length&&h())}function h(){if(!d){var e=u(p);d=!0;for(var t=l.length;t;){for(c=l,l=[];++f<t;)c&&c[f].run();f=-1,t=l.length}c=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||d||u(h)};function m(e,t){this.fun=e,this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={};function v(){}a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],211:[function(e,t,r){"use strict";var n=i(e("babel-runtime/helpers/typeof")),o=i(e("babel-runtime/helpers/classCallCheck")),a=i(e("babel-runtime/helpers/createClass"));function i(e){return e&&e.__esModule?e:{default:e}}var s=e("./logger")("Message"),u=e("./utils"),c=function(){function e(){(0,o.default)(this,e)}return(0,a.default)(e,null,[{key:"parse",value:function(e){var t=void 0,r={};try{t=JSON.parse(e)}catch(e){return void s.error("parse() | invalid JSON: %s",e)}if("object"!==(void 0===t?"undefined":(0,n.default)(t))||Array.isArray(t))s.error("parse() | not an object");else{if("number"==typeof t.id){if(r.id=t.id,t.request){if(r.request=!0,"string"!=typeof t.method)return void s.error("parse() | missing/invalid method field");r.method=t.method,r.data=t.data||{}}else{if(!t.response)return void s.error("parse() | missing request/response field");r.response=!0,t.ok?(r.ok=!0,r.data=t.data||{}):(r.errorCode=t.errorCode,r.errorReason=t.errorReason)}return r}s.error("parse() | missing/invalid id field")}}},{key:"requestFactory",value:function(e,t){return{request:!0,id:u.randomNumber(),method:e,data:t||{}}}},{key:"successResponseFactory",value:function(e,t){return{response:!0,id:e.id,ok:!0,data:t||{}}}},{key:"errorResponseFactory",value:function(e,t,r){return{response:!0,id:e.id,codeCode:t,errorReason:r}}}]),e}();t.exports=c},{"./logger":214,"./utils":217,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/typeof":40}],212:[function(e,t,r){"use strict";var n=l(e("babel-runtime/core-js/promise")),o=l(e("babel-runtime/core-js/map")),a=l(e("babel-runtime/core-js/object/get-prototype-of")),i=l(e("babel-runtime/helpers/classCallCheck")),s=l(e("babel-runtime/helpers/createClass")),u=l(e("babel-runtime/helpers/possibleConstructorReturn")),c=l(e("babel-runtime/helpers/inherits"));function l(e){return e&&e.__esModule?e:{default:e}}var d=e("events").EventEmitter,f=e("./logger")("Peer"),p=e("./Message"),h=function(e){(0,c.default)(t,e);function t(e){(0,i.default)(this,t),f.debug("constructor()");var r=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return r.setMaxListeners(1/0),r._transport=e,r._closed=!1,r._data={},r._requestHandlers=new o.default,r._handleTransport(),r}return(0,s.default)(t,[{key:"send",value:function(e,t){var r=this,o=p.requestFactory(e,t);return this._transport.send(o).then(function(){return new n.default(function(e,t){var n={resolve:function(t){r._requestHandlers.delete(o.id)&&(clearTimeout(n.timer),e(t))},reject:function(e){r._requestHandlers.delete(o.id)&&(clearTimeout(n.timer),t(e))},timer:setTimeout(function(){r._requestHandlers.delete(o.id)&&t(new Error("request timeout"))},2e4),close:function(){clearTimeout(n.timer),t(new Error("peer closed"))}};r._requestHandlers.set(o.id,n)})})}},{key:"close",value:function(){f.debug("close()"),this._closed||(this._closed=!0,this._transport.close(),this._requestHandlers.forEach(function(e){return e.close()}),this.emit("close"))}},{key:"_handleTransport",value:function(){var e=this;if(this._transport.closed)return this._closed=!0,void setTimeout(function(){return e.emit("close")});this._transport.on("connecting",function(t){e.emit("connecting",t)}),this._transport.on("open",function(){e._closed||e.emit("open")}),this._transport.on("disconnected",function(){e.emit("disconnected")}),this._transport.on("failed",function(t){e.emit("failed",t)}),this._transport.on("close",function(){e._closed||(e._closed=!0,e.emit("close"))}),this._transport.on("message",function(t){t.response?e._handleResponse(t):t.request&&e._handleRequest(t)})}},{key:"_handleResponse",value:function(e){var t=this._requestHandlers.get(e.id);if(t)if(e.ok)t.resolve(e.data);else{var r=new Error(e.errorReason);r.code=e.errorCode,t.reject(r)}else f.error("received response does not match any sent request")}},{key:"_handleRequest",value:function(e){var t=this;this.emit("request",e,function(r){var n=p.successResponseFactory(e,r);t._transport.send(n).catch(function(e){f.warn("accept() failed, response could not be sent: %o",e)})},function(r,n){r instanceof Error?(n=r.toString(),r=500):"number"==typeof r&&n instanceof Error&&(n=n.toString());var o=p.errorResponseFactory(e,r,n);t._transport.send(o).catch(function(e){f.warn("reject() failed, response could not be sent: %o",e)})})}},{key:"data",get:function(){return this._data},set:function(e){this._data=e||{}}},{key:"closed",get:function(){return this._closed}}]),t}(d);t.exports=h},{"./Message":211,"./logger":214,"babel-runtime/core-js/map":21,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,events:171}],213:[function(e,t,r){"use strict";var n=e("./Peer"),o=e("./transports");t.exports={Peer:n,WebSocketTransport:o.WebSocketTransport}},{"./Peer":212,"./transports":216}],214:[function(e,t,r){"use strict";var n=a(e("babel-runtime/helpers/classCallCheck")),o=a(e("babel-runtime/helpers/createClass"));function a(e){return e&&e.__esModule?e:{default:e}}var i=e("debug"),s="protoo-client",u=function(){function e(t){(0,n.default)(this,e),t?(this._debug=i(s+":"+t),this._warn=i(s+":WARN:"+t),this._error=i(s+":ERROR:"+t)):(this._debug=i(s),this._warn=i(s+":WARN"),this._error=i(s+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,o.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();t.exports=function(e){return new u(e)}},{"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,debug:169}],215:[function(e,t,r){"use strict";var n=l(e("babel-runtime/core-js/json/stringify")),o=l(e("babel-runtime/core-js/promise")),a=l(e("babel-runtime/core-js/object/get-prototype-of")),i=l(e("babel-runtime/helpers/classCallCheck")),s=l(e("babel-runtime/helpers/createClass")),u=l(e("babel-runtime/helpers/possibleConstructorReturn")),c=l(e("babel-runtime/helpers/inherits"));function l(e){return e&&e.__esModule?e:{default:e}}var d=e("events").EventEmitter,f=e("websocket").w3cwebsocket,p=e("retry"),h=e("../logger")("WebSocketTransport"),m=e("../Message"),v={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},_=function(e){(0,c.default)(t,e);function t(e,r){(0,i.default)(this,t),h.debug('constructor() [url:"%s", options:%o]',e,r);var n=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return n.setMaxListeners(1/0),n._url=e,n._options=r||{},n._ws=null,n._closed=!1,n._setWebSocket(),n}return(0,s.default)(t,[{key:"send",value:function(e){if(this._closed)return o.default.reject(new Error("transport closed"));try{return this._ws.send((0,n.default)(e)),o.default.resolve()}catch(e){return h.error("send() | error sending message: %o",e),o.default.reject(e)}}},{key:"close",value:function(){if(h.debug("close()"),!this._closed){this._closed=!0,this.emit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(e){h.error("close() | error closing the WebSocket: %o",e)}}}},{key:"_setWebSocket",value:function(){var e=this,t=this._options,r=p.operation(this._options.retry||v),n=!1;r.attempt(function(o){e._closed?r.stop():(h.debug("_setWebSocket() [currentAttempt:%s]",o),e._ws=new f(e._url,"protoo",t.origin,t.headers,t.requestOptions,t.clientConfig),e.emit("connecting",o),e._ws.onopen=function(){e._closed||(n=!0,e.emit("open"))},e._ws.onclose=function(t){if(!e._closed){if(h.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',t.wasClean,t.code,t.reason),4e3!==t.code){if(n)return r.stop(),e.emit("disconnected"),void e._setWebSocket();if(e.emit("failed",o),r.retry(!0))return}e._closed=!0,e.emit("close")}},e._ws.onerror=function(){e._closed||h.error('WebSocket "error" event')},e._ws.onmessage=function(t){if(!e._closed){var r=m.parse(t.data);r&&(0!==e.listenerCount("message")?e.emit("message",r):h.error('no listeners for WebSocket "message" event, ignoring received message'))}})})}},{key:"closed",get:function(){return this._closed}}]),t}(d);t.exports=_},{"../Message":211,"../logger":214,"babel-runtime/core-js/json/stringify":20,"babel-runtime/core-js/object/get-prototype-of":25,"babel-runtime/core-js/promise":28,"babel-runtime/helpers/classCallCheck":32,"babel-runtime/helpers/createClass":33,"babel-runtime/helpers/inherits":36,"babel-runtime/helpers/possibleConstructorReturn":37,events:171,retry:231,websocket:242}],216:[function(e,t,r){"use strict";var n=e("./WebSocketTransport");t.exports={WebSocketTransport:n}},{"./WebSocketTransport":215}],217:[function(e,t,r){"use strict";var n=e("random-number").generator({min:1e6,max:9999999,integer:!0});t.exports={randomNumber:n}},{"random-number":219}],218:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;function o(e){return decodeURIComponent(e.replace(/\+/g," "))}r.stringify=function(e,t){var r=[];"string"!=typeof(t=t||"")&&(t="?");for(var o in e)n.call(e,o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.length?t+r.join("&"):""},r.parse=function(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,n={};t=r.exec(e);n[o(t[1])]=o(t[2]));return n}},{}],219:[function(e,t,r){!function(e){function r(e){var t=(e=e||{}).min,r=e.max,n=e.integer||!1;if(null==t&&null==r?(t=0,r=1):null==t?t=r-1:null==r&&(r=t+1),r<t)throw new Error("invalid options, max must be >= min");return{min:t,max:r,integer:n}}function n(e){if((e=r(e)).max===e.min)return e.min;var t=Math.random()*(e.max-e.min+Number(!!e.integer))+e.min;return e.integer?Math.floor(t):t}t.exports=n,t.exports.generator=function(e){return e=r(e),function(t,r,o){return e.min=null!=t?t:e.min,e.max=null!=r?r:e.max,e.integer=null!=o?o:e.integer,n(e)}},t.exports.defaults=r}()},{}],220:[function(e,t,r){"use strict";var n="0123456789",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a="!$%^&*()_+|~-=`{}[]:;<>?,./";t.exports=function(e){(t=e)||(t={});var t,r,i,s="",u=(e={length:t.length||8,numeric:"boolean"!=typeof t.numeric||t.numeric,letters:"boolean"!=typeof t.letters||t.letters,special:"boolean"==typeof t.special&&t.special,exclude:Array.isArray(t.exclude)?t.exclude:[]}).length,c=(e.exclude,function(e){var t="";e.numeric&&(t+=n),e.letters&&(t+=o),e.special&&(t+=a);for(var r=0;r<=e.exclude.length;r++)t=t.replace(e.exclude[r],"");return t}(e));for(r=1;r<=u;r++)s+=c.substring(i=Math.floor(Math.random()*c.length),i+1);return s}},{}],221:[function(e,t,r){(function(e){n=this,function(t){"use strict";function r(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function o(e,t,r){o.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function i(e,t){i.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,r){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function u(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function c(e){var t=void 0===e?"undefined":j(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,r,n,d,f,p){d=d||[],p=p||[];var h=d.slice(0);if(void 0!==f){if(n){if("function"==typeof n&&n(h,f))return;if("object"===(void 0===n?"undefined":j(n))){if(n.prefilter&&n.prefilter(h,f))return;if(n.normalize){var m=n.normalize(h,f,e,t);m&&(e=m[0],t=m[1])}}}h.push(f)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var v=void 0===e?"undefined":j(e),_=void 0===t?"undefined":j(t),b="undefined"!==v||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(f),y="undefined"!==_||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(f);if(!b&&y)r(new a(h,t));else if(!y&&b)r(new i(h,e));else if(c(e)!==c(t))r(new o(h,e,t));else if("date"===c(e)&&e-t!=0)r(new o(h,e,t));else if("object"===v&&null!==e&&null!==t)if(p.filter(function(t){return t.lhs===e}).length)e!==t&&r(new o(h,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var g;for(e.length,g=0;g<e.length;g++)g>=t.length?r(new s(h,g,new i(void 0,e[g]))):l(e[g],t[g],r,n,h,g,p);for(;g<t.length;)r(new s(h,g,new a(void 0,t[g++])))}else{var w=Object.keys(e),k=Object.keys(t);w.forEach(function(o,a){var i=k.indexOf(o);i>=0?(l(e[o],t[o],r,n,h,o,p),k=u(k,i)):l(e[o],void 0,r,n,h,o,p)}),k.forEach(function(e){l(void 0,t[e],r,n,h,e,p)})}p.length=p.length-1}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||r(new o(h,e,t)))}function d(e,t,r,n){return n=n||[],l(e,t,function(e){e&&n.push(e)},r),n.length?n:void 0}function f(e,t,r){if(r.path&&r.path.length){var n,o=e[t],a=r.path.length-1;for(n=0;n<a;n++)o=o[r.path[n]];switch(r.kind){case"A":f(o[r.path[n]],r.index,r.item);break;case"D":delete o[r.path[n]];break;case"E":case"N":o[r.path[n]]=r.rhs}}else switch(r.kind){case"A":f(e[t],r.index,r.item);break;case"D":e=u(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function p(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,o=-1,a=r.path?r.path.length-1:0;++o<a;)void 0===n[r.path[o]]&&(n[r.path[o]]="number"==typeof r.path[o]?[]:{}),n=n[r.path[o]];switch(r.kind){case"A":f(r.path?n[r.path[o]]:n,r.index,r.item);break;case"D":delete n[r.path[o]];break;case"E":case"N":n[r.path[o]]=r.rhs}}}function h(e,t,r){if(r.path&&r.path.length){var n,o=e[t],a=r.path.length-1;for(n=0;n<a;n++)o=o[r.path[n]];switch(r.kind){case"A":h(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}else switch(r.kind){case"A":h(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=u(e,t)}return e}function m(e,t,r,n){var o=d(e,t);try{n?r.groupCollapsed("diff"):r.group("diff")}catch(e){r.log("diff")}o?o.forEach(function(e){var t=e.kind,n=function(e){var t=e.kind,r=e.path,n=e.lhs,o=e.rhs,a=e.index,i=e.item;switch(t){case"E":return[r.join("."),n,"",o];case"N":return[r.join("."),o];case"D":return[r.join(".")];case"A":return[r.join(".")+"["+a+"]",i];default:return[]}}(e);r.log.apply(r,["%c "+E[t].text,(o=t,"color: "+E[o].color+"; font-weight: bold")].concat(x(n)));var o}):r.log(" no diff ");try{r.groupEnd()}catch(e){r.log(" diff end  ")}}function v(e,t,r,n){switch(void 0===e?"undefined":j(e)){case"object":return"function"==typeof e[n]?e[n].apply(e,x(r)):e[n];case"function":return e(t);default:return e}}function _(e,t){var r=t.logger,n=t.actionTransformer,o=t.titleFormatter,a=void 0===o?function(e){var t=e.timestamp,r=e.duration;return function(e,n,o){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+n),r&&a.push("%c(in "+o.toFixed(2)+" ms)"),a.join(" ")}}(t):o,i=t.collapsed,s=t.colors,u=t.level,c=t.diff,l=void 0===t.titleFormatter;e.forEach(function(o,d){var f=o.started,p=o.startedTime,h=o.action,_=o.prevState,b=o.error,y=o.took,g=o.nextState,w=e[d+1];w&&(g=w.prevState,y=w.started-f);var P=n(h),j="function"==typeof i?i(function(){return g},h,o):i,x=k(p),C=s.title?"color: "+s.title(P)+";":"",E=["color: gray; font-weight: lighter;"];E.push(C),t.timestamp&&E.push("color: gray; font-weight: lighter;"),t.duration&&E.push("color: gray; font-weight: lighter;");var S=a(P,x,y);try{j?s.title&&l?r.groupCollapsed.apply(r,["%c "+S].concat(E)):r.groupCollapsed(S):s.title&&l?r.group.apply(r,["%c "+S].concat(E)):r.group(S)}catch(e){r.log(S)}var R=v(u,P,[_],"prevState"),T=v(u,P,[P],"action"),O=v(u,P,[b,_],"error"),I=v(u,P,[g],"nextState");if(R)if(s.prevState){var A="color: "+s.prevState(_)+"; font-weight: bold";r[R]("%c prev state",A,_)}else r[R]("prev state",_);if(T)if(s.action){var M="color: "+s.action(P)+"; font-weight: bold";r[T]("%c action    ",M,P)}else r[T]("action    ",P);if(b&&O)if(s.error){var N="color: "+s.error(b,_)+"; font-weight: bold;";r[O]("%c error     ",N,b)}else r[O]("error     ",b);if(I)if(s.nextState){var D="color: "+s.nextState(g)+"; font-weight: bold";r[I]("%c next state",D,g)}else r[I]("next state",g);c&&m(_,g,r,j);try{r.groupEnd()}catch(e){r.log(" log end ")}})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},S,e),r=t.logger,n=t.stateTransformer,o=t.errorTransformer,a=t.predicate,i=t.logErrors,s=t.diffPredicate;if(void 0===r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var r=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(r,c))return e(c);var l={};u.push(l),l.started=P.now(),l.startedTime=new Date,l.prevState=n(r()),l.action=c;var d=void 0;if(i)try{d=e(c)}catch(e){l.error=o(e)}else d=e(c);l.took=P.now()-l.started,l.nextState=n(r());var f=t.diff&&"function"==typeof s?s(r,c):t.diff;if(_(u,Object.assign({},t,{diff:f})),u.length=0,l.error)throw l.error;return d}}}}var y,g,w=function(e,t){return r="0",n=t-e.toString().length,new Array(n+1).join(r)+e;var r,n},k=function(e){return w(e.getHours(),2)+":"+w(e.getMinutes(),2)+":"+w(e.getSeconds(),2)+"."+w(e.getMilliseconds(),3)},P="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},C=[];y="object"===(void 0===e?"undefined":j(e))&&e?e:"undefined"!=typeof window?window:{},(g=y.DeepDiff)&&C.push(function(){void 0!==g&&y.DeepDiff===d&&(y.DeepDiff=g,g=void 0)}),r(o,n),r(a,n),r(i,n),r(s,n),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:function(e,t,r){e&&t&&l(e,t,function(n){r&&!r(e,t,n)||p(e,t,n)})},enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:function(e,t,r){if(e&&t&&r&&r.kind){var n,o,a=e;for(o=r.path.length-1,n=0;n<o;n++)void 0===a[r.path[n]]&&(a[r.path[n]]={}),a=a[r.path[n]];switch(r.kind){case"A":h(a[r.path[n]],r.index,r.item);break;case"D":case"E":a[r.path[n]]=r.lhs;break;case"N":delete a[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==g},enumerable:!0},noConflict:{value:function(){return C&&(C.forEach(function(e){e()}),C=null),d},enumerable:!0}});var E={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},S={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return"function"==typeof t||"function"==typeof r?b()({dispatch:t,getState:r}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=S,t.createLogger=b,t.logger=R,t.default=R,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof r&&void 0!==t?r:n.reduxLogger=n.reduxLogger||{});var n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],222:[function(e,t,r){"use strict";r.__esModule=!0;function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}var o=n();o.withExtraArgument=n,r.default=o},{}],223:[function(e,t,r){"use strict";r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,o,a){var s=e(r,o,a),u=s.dispatch,c=[],l={getState:s.getState,dispatch:function(e){return u(e)}};return c=t.map(function(e){return e(l)}),u=i.default.apply(void 0,c)(s.dispatch),n({},s,{dispatch:u})}}};var o,a=e("./compose"),i=(o=a,o&&o.__esModule?o:{default:o})},{"./compose":226}],224:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),o={},a=0;a<r.length;a++){var i=r[a],s=e[i];"function"==typeof s&&(o[i]=n(s,t))}return o};function n(e,t){return function(){return t(e.apply(void 0,arguments))}}},{}],225:[function(e,t,r){(function(t){"use strict";r.__esModule=!0,r.default=function(e){for(var r=Object.keys(e),i={},u=0;u<r.length;u++){var c=r[u];"production"!==t.env.NODE_ENV&&void 0===e[c]&&(0,a.default)('No reducer provided for key "'+c+'"'),"function"==typeof e[c]&&(i[c]=e[c])}var l=Object.keys(i),d=void 0;"production"!==t.env.NODE_ENV&&(d={});var f=void 0;try{p=i,Object.keys(p).forEach(function(e){var t=p[e],r=t(void 0,{type:n.ActionTypes.INIT});if(void 0===r)throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===t(void 0,{type:o}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+n.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){f=e}var p;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];if(f)throw f;if("production"!==t.env.NODE_ENV){var u=function(e,t,r,a){var i=Object.keys(t),s=r&&r.type===n.ActionTypes.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===i.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!(0,o.default)(e))return"The "+s+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+i.join('", "')+'"';var u=Object.keys(e).filter(function(e){return!t.hasOwnProperty(e)&&!a[e]});if(u.forEach(function(e){a[e]=!0}),u.length>0)return"Unexpected "+(u.length>1?"keys":"key")+' "'+u.join('", "')+'" found in '+s+'. Expected to find one of the known reducer keys instead: "'+i.join('", "')+'". Unexpected keys will be ignored.'}(e,i,r,d);u&&(0,a.default)(u)}for(var c=!1,p={},h=0;h<l.length;h++){var m=l[h],v=i[m],_=e[m],b=v(_,r);if(void 0===b){var y=s(m,r);throw new Error(y)}p[m]=b,c=c||b!==_}return c?p:e}};var n=e("./createStore"),o=i(e("lodash/isPlainObject")),a=i(e("./utils/warning"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=t&&t.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}}).call(this,e("_process"))},{"./createStore":227,"./utils/warning":229,_process:210,"lodash/isPlainObject":182}],226:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}},{}],227:[function(e,t,r){"use strict";r.__esModule=!0,r.ActionTypes=void 0,r.default=s;var n=a(e("lodash/isPlainObject")),o=a(e("symbol-observable"));function a(e){return e&&e.__esModule?e:{default:e}}var i=r.ActionTypes={INIT:"@@redux/INIT"};function s(e,t,r){var a;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,c=t,l=[],d=l,f=!1;function p(){d===l&&(d=l.slice())}function h(){return c}function m(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return p(),d.push(e),function(){if(t){t=!1,p();var r=d.indexOf(e);d.splice(r,1)}}}function v(e){if(!(0,n.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,c=u(c,e)}finally{f=!1}for(var t=l=d,r=0;r<t.length;r++){(0,t[r])()}return e}return v({type:i.INIT}),(a={dispatch:v,subscribe:m,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,v({type:i.INIT})}})[o.default]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(h())}return r(),{unsubscribe:t(r)}}})[o.default]=function(){return this},e},a}},{"lodash/isPlainObject":182,"symbol-observable":238}],228:[function(e,t,r){(function(t){"use strict";r.__esModule=!0,r.compose=r.applyMiddleware=r.bindActionCreators=r.combineReducers=r.createStore=void 0;var n=c(e("./createStore")),o=c(e("./combineReducers")),a=c(e("./bindActionCreators")),i=c(e("./applyMiddleware")),s=c(e("./compose")),u=c(e("./utils/warning"));function c(e){return e&&e.__esModule?e:{default:e}}function l(){}"production"!==t.env.NODE_ENV&&"string"==typeof l.name&&"isCrushed"!==l.name&&(0,u.default)("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build."),r.createStore=n.default,r.combineReducers=o.default,r.bindActionCreators=a.default,r.applyMiddleware=i.default,r.compose=s.default}).call(this,e("_process"))},{"./applyMiddleware":223,"./bindActionCreators":224,"./combineReducers":225,"./compose":226,"./createStore":227,"./utils/warning":229,_process:210}],229:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},{}],230:[function(e,t,r){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],231:[function(e,t,r){t.exports=e("./lib/retry")},{"./lib/retry":232}],232:[function(e,t,r){var n=e("./retry_operation");r.operation=function(e){var t=r.timeouts(e);return new n(t,{forever:e&&e.forever,unref:e&&e.unref})},r.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],o=0;o<t.retries;o++)n.push(this.createTimeout(o,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(o,t)),n.sort(function(e,t){return e-t}),n},r.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},r.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n){n=[];for(var o in e)"function"==typeof e[o]&&n.push(o)}for(var a=0;a<n.length;a++){var i=n[a],s=e[i];e[i]=function(){var n=r.operation(t),o=Array.prototype.slice.call(arguments),a=o.pop();o.push(function(e){n.retry(e)||(e&&(arguments[0]=n.mainError()),a.apply(this,arguments))}),n.attempt(function(){s.apply(e,o)})},e[i].options=t}}},{"./retry_operation":233}],233:[function(e,t,r){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._timeouts=e,this._options=t||{},this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=n,n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;this._errors.push(e);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift()}var r=this,n=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),this._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t);return this._options.unref&&n.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var o=this._errors[n],a=o.message,i=(e[a]||0)+1;e[a]=i,i>=r&&(t=o,r=i)}return t}},{}],234:[function(e,t,r){var n=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],235:[function(e,t,r){var n=e("./parser"),o=e("./writer");r.write=o,r.parse=n.parse,r.parseFmtpConfig=n.parseFmtpConfig,r.parseParams=n.parseParams,r.parsePayloads=n.parsePayloads,r.parseRemoteCandidates=n.parseRemoteCandidates,r.parseImageAttributes=n.parseImageAttributes,r.parseSimulcastStreamList=n.parseSimulcastStreamList},{"./parser":236,"./writer":237}],236:[function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},o=function(e,t,r){var o=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:o&&!t[e.name]&&(t[e.name]={});var a=e.push?{}:o?t[e.name]:t;!function(e,t,r,o){if(o&&!r)t[o]=n(e[1]);else for(var a=0;a<r.length;a+=1)null!=e[a+1]&&(t[r[a]]=n(e[a+1]))}(r.match(e.reg),a,e.names,e.name),e.push&&t[e.push].push(a)},a=e("./grammar"),i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);r.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var u=a[t][s];if(u.reg.test(i))return o(u,n,i)}}),t.media=r,t};var s=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length&&(e[r[0]]=n(r[1])),e};r.parseParams=function(e){return e.split(/\;\s?/).reduce(s,{})},r.parseFmtpConfig=r.parseParams,r.parsePayloads=function(e){return e.split(" ").map(Number)},r.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),o=0;o<r.length;o+=3)t.push({component:r[o],ip:r[o+1],port:r[o+2]});return t},r.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})})},r.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}})})}},{"./grammar":234}],237:[function(e,t,r){var n=e("./grammar"),o=/%[sdv%]/g,a=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var a=0;a<t.names.length;a+=1){var i=t.names[a];t.name?n.push(r[t.name][i]):n.push(r[t.names[a]])}else n.push(r[t.name]);return function(e){var t=1,r=arguments,n=r.length;return e.replace(o,function(e){if(t>=n)return e;var o=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})}.apply(null,n)},i=["v","o","s","i","u","e","p","c","b","t","r","z","a"],s=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var r=t.outerOrder||i,o=t.innerOrder||s,u=[];return r.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?u.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){u.push(a(t,r,e))})})}),e.media.forEach(function(e){u.push(a("m",n.m[0],e)),o.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?u.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){u.push(a(t,r,e))})})})}),u.join("\r\n")+"\r\n"}},{"./grammar":234}],238:[function(e,t,r){t.exports=e("./lib/index")},{"./lib/index":239}],239:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,a=e("./ponyfill.js"),i=(o=a,o&&o.__esModule?o:{default:o});var s;s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==t?t:Function("return this")();var u=(0,i.default)(s);r.default=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":240}],240:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t,r=e.Symbol;"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable";return t}},{}],241:[function(e,t,r){(function(r){"use strict";var n=e("requires-port"),o=e("querystringify"),a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function c(e){var t,n={},o=typeof(e=e||r.location||{});if("blob:"===e.protocol)n=new d(unescape(e.pathname),{});else if("string"===o){n=new d(e,{});for(t in u)delete n[t]}else if("object"===o){for(t in e)t in u||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=i.test(e.href))}return n}function l(e){var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function d(e,t,r){if(!(this instanceof d))return new d(e,t,r);var a,i,u,f,p,h,m=s.slice(),v=typeof t,_=0;for("object"!==v&&"string"!==v&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),t=c(t),a=!(i=l(e||"")).protocol&&!i.slashes,this.slashes=i.slashes||a&&t.slashes,this.protocol=i.protocol||t.protocol||"",e=i.rest,i.slashes||(m[2]=[/(.*)/,"pathname"]);_<m.length;_++)u=(f=m[_])[0],h=f[1],u!=u?this[h]=e:"string"==typeof u?~(p=e.indexOf(u))&&("number"==typeof f[2]?(this[h]=e.slice(0,p),e=e.slice(p+f[2])):(this[h]=e.slice(p),e=e.slice(0,p))):(p=u.exec(e))&&(this[h]=p[1],e=e.slice(0,p.index)),this[h]=this[h]||(a&&f[3]?t[h]||"":""),f[4]&&(this[h]=this[h].toLowerCase());r&&(this.query=r(this.query)),a&&t.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==t.pathname)&&(this.pathname=function(e,t){for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(a=!0),r.splice(n,1),i--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(this.pathname,t.pathname)),n(this.port,this.protocol)||(this.host=this.hostname,this.port=""),this.username=this.password="",this.auth&&(f=this.auth.split(":"),this.username=f[0]||"",this.password=f[1]||""),this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}d.prototype={set:function(e,t,r){switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),this[e]=t;break;case"port":this[e]=t,n(t,this.protocol)?t&&(this.host=this.hostname+":"+t):(this.host=this.hostname,this[e]="");break;case"hostname":this[e]=t,this.port&&(t+=":"+this.port),this.host=t;break;case"host":this[e]=t,/:\d+$/.test(t)?(t=t.split(":"),this.port=t.pop(),this.hostname=t.join(":")):(this.hostname=t,this.port="");break;case"protocol":this.protocol=t.toLowerCase(),this.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";this[e]=t.charAt(0)!==a?a+t:t}else this[e]=t;break;default:this[e]=t}for(var i=0;i<s.length;i++){var u=s[i];u[4]&&(this[u[1]]=this[u[1]].toLowerCase())}return this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString(),this},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var n=r+(this.slashes?"//":"");return this.username&&(n+=this.username,this.password&&(n+=":"+this.password),n+="@"),n+=this.host+this.pathname,(t="object"==typeof this.query?e(this.query):this.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),this.hash&&(n+=this.hash),n}},d.extractProtocol=l,d.location=c,d.qs=o,t.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:218,"requires-port":230}],242:[function(e,t,r){var n=function(){return this}(),o=n.WebSocket||n.MozWebSocket,a=e("./version");function i(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(i,e,{get:function(){return o[e]}})}),t.exports={w3cwebsocket:o?i:null,version:a}},{"./version":243}],243:[function(e,t,r){t.exports=e("../package.json").version},{"../package.json":244}],244:[function(e,t,r){t.exports={_from:"websocket@^1.0.25",_id:"websocket@1.0.25",_inBundle:!1,_integrity:"sha512-M58njvi6ZxVb5k7kpnHh2BvNKuBWiwIYvsToErBzWhvBZYwlEiLcyLrG41T1jRcrY9ettqPYEqduLI7ul54CVQ==",_location:"/websocket",_phantomChildren:{ms:"2.0.0"},_requested:{type:"range",registry:!0,raw:"websocket@^1.0.25",name:"websocket",escapedName:"websocket",rawSpec:"^1.0.25",saveSpec:null,fetchSpec:"^1.0.25"},_requiredBy:["/protoo-client"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.25.tgz",_shasum:"998ec790f0a3eacb8b08b50a4350026692a11958",_spec:"websocket@^1.0.25",_where:"/home/alex/Desktop/JS/easy-mediasoup/node_modules/protoo-client",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},bundleDependencies:!1,config:{verbose:!1},contributors:[{name:"Iaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},deprecated:!1,description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.25"}},{}],245:[function(e,t,r){t.exports=n;function n(){}n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,r){this.callbacks=this.callbacks||{};var n=3===arguments.length,o=n?arguments[1]:void 0,a=n?arguments[2]:arguments[1];return a._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(a),this},t.once=function(e,t,r){var n=this,o=3===arguments.length,a=o?arguments[1]:void 0,i=o?arguments[2]:arguments[1];function s(){n.off(e,s),i.apply(this,arguments)}return this.on(e,a,s),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,r,n,o;for(t in this.callbacks)for(r=0,n=(o=this.callbacks[t]).length;r<n;r++)o[r]._groupName===e&&(o.splice(r,1),r--,n--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var r,n=this.callbacks[e];return n?1===arguments.length?(delete this.callbacks[e],this):(r=n.indexOf(t),n.splice(r,1),0===n.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,r,n,o=[].slice.call(arguments,1),a=this.callbacks[e],i=this.getWildcardCallbacks(e);if(a)for(t=0,r=(n=a.slice()).length;t<r&&n[t];++t)n[t].apply(this,o);if(i)for(r=i.length,t=0,r=(n=i.slice()).length;t<r&&n[t];++t)n[t].apply(this,[e].concat(o));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,r,n=[];for(t in this.callbacks)r=t.split("*"),("*"===t||2===r.length&&e.slice(0,r[0].length)===r[0])&&(n=n.concat(this.callbacks[t]));return n}},n.mixin(n)},{}]},{},[4])(4)});